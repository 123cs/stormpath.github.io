
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Stormpath REST API Product Guide - Stormpath</title>
  <meta name="author" content="Stormpath, Inc.">

  
  <meta name="description" content="Authenticate, manage and secure users easily. Complete product guide for the Stormpath REST API.">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stormpath.github.io/rest/product-guide">
  <link href="/favicon.ico" rel="icon">

  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

<style>
@import url("/stylesheets/normalize.css?mrrrji");
@import url("/stylesheets/wireframes.css?mrrrji");
@import url("/stylesheets/html-elements.css?mrrrji");
@import url("/stylesheets/tabs.css?mrrrji");
@import url("/stylesheets/tinybox2.css?mrrrji");
@import url("/stylesheets/flexnav.css?mrrrji");
@import url("/stylesheets/pages.css?mrrrji");
@import url("/stylesheets/docs.css?mrrrji");
@import url("/stylesheets/blocks.css?mrrrji");
@import url("/stylesheets/navigation.css?mrrrji");
@import url("/stylesheets/views-styles.css?mrrrji");
@import url("/stylesheets/nodes.css?mrrrji");
@import url("/stylesheets/comments.css?mrrrji");
@import url("/stylesheets/forms.css?mrrrji");
@import url("/stylesheets/fields.css?mrrrji");
@import url("/stylesheets/layouts/responsive-sidebars.css?mrrrji");
</style>













  <link href="/atom.xml" rel="alternate" title="Stormpath" type="application/atom+xml">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Covered+By+Your+Grace|Open+Sans:300italic,400italic,600italic,700italic,800italic,300,400,600,700,800" media="all" />

<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/cupertino/jquery-ui.css" />
<link rel="stylesheet" href="/stylesheets/mono-blue.min.css" />

<!--[if lt IE 9]>
<script src="/javascripts/html5-respond.js"></script>
<![endif]-->

<link rel="publisher" href="https://plus.google.com/117307959654441669381" />
<!-- twitter card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="goStormpath">
<meta name="twitter:title" content="Stormpath REST API Product Guide - Stormpath">
<meta name="twitter:description" content="Authenticate, manage and secure users easily. Complete product guide for the Stormpath REST API.">
<meta name="twitter:image:src" content="https://docs.stormpath.com/images/icons/twitter-stormpath-icon.jpg">
<!-- opengraph -->
<meta property="og:title" content="Stormpath REST API Product Guide - Stormpath" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://stormpath.github.io/rest/product-guide" />
<meta property="og:image" content="https://docs.stormpath.com/images/icons/og-stormpath-icon.jpg" />
<meta property="og:description" content="Authenticate, manage and secure users easily. Complete product guide for the Stormpath REST API." />
<meta property="og:site_name" content="Stormpath" />
<meta property="fb:admins" content="3230401" />

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-29159574-1', 'auto');
    ga('send', 'pageview');

</script>

<!-- kissmetrics -->
<script type="text/javascript">
  var _kmq = _kmq || [];
  var _kmk = _kmk || '684b854336bd3a6523260ebd991eec06b18b929a';
  function _kms(u){
    setTimeout(function(){
      var d = document, f = d.getElementsByTagName('script')[0],
      s = d.createElement('script');
      s.type = 'text/javascript'; s.async = true; s.src = u;
      f.parentNode.insertBefore(s, f);
    }, 1);
  }
  _kms('//i.kissmetrics.com/i.js');
  _kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
</script>

<!-- Optimizely -->
<script src="//cdn.optimizely.com/js/225847041.js"></script>

  

</head>

<body  class="not-front  node-type-documentation  ">
<!-- Qualaroo for stormpath.com -->
<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript" src="//s3.amazonaws.com/ki.js/47725/9JM.js" async="true"></script>
      
<script type="text/javascript" src="//assets.zendesk.com/external/zenbox/v2.6/zenbox.js"></script>
<style type="text/css" media="screen, projection">
  @import url(//assets.zendesk.com/external/zenbox/v2.6/zenbox.css);
</style>
<script type="text/javascript">
  if (typeof(Zenbox) !== "undefined") {
    Zenbox.init({
      dropboxID:   "20184231",
      url:         "https://stormpath.zendesk.com",
      tabTooltip:  "Get Help",
      tabImageURL: "/images/tab_questions_black_right.png",
      tabColor:    "689ed0",
      tabPosition: "Right"
    });
  }
</script>


<script src="/javascripts/stormpath_docs.js"></script>
<script type="text/javascript">
	var sp_docs_menu = {};
	
		sp_docs_menu['_includes'] = [];
		
	
		sp_docs_menu['_layouts'] = [];
		
	
		sp_docs_menu['angularjs'] = [];
		
	
		sp_docs_menu['assets'] = [];
		
	
		sp_docs_menu['console'] = [];
		
			sp_docs_menu['console'].push('product-guide');
		
			sp_docs_menu['console'].push('quickstart');
		
	
		sp_docs_menu['errors'] = [];
		
			sp_docs_menu['errors'].push('1101');
		
			sp_docs_menu['errors'].push('1902');
		
			sp_docs_menu['errors'].push('2000');
		
			sp_docs_menu['errors'].push('2001');
		
			sp_docs_menu['errors'].push('2002');
		
			sp_docs_menu['errors'].push('2003');
		
			sp_docs_menu['errors'].push('2004');
		
			sp_docs_menu['errors'].push('2005');
		
			sp_docs_menu['errors'].push('2006');
		
			sp_docs_menu['errors'].push('2007');
		
			sp_docs_menu['errors'].push('2008');
		
			sp_docs_menu['errors'].push('2009');
		
			sp_docs_menu['errors'].push('2010');
		
			sp_docs_menu['errors'].push('2011');
		
			sp_docs_menu['errors'].push('2012');
		
			sp_docs_menu['errors'].push('2013');
		
			sp_docs_menu['errors'].push('2014');
		
			sp_docs_menu['errors'].push('2015');
		
			sp_docs_menu['errors'].push('2016');
		
			sp_docs_menu['errors'].push('2017');
		
			sp_docs_menu['errors'].push('2018');
		
			sp_docs_menu['errors'].push('2100');
		
			sp_docs_menu['errors'].push('2101');
		
			sp_docs_menu['errors'].push('2102');
		
			sp_docs_menu['errors'].push('2103');
		
			sp_docs_menu['errors'].push('2104');
		
			sp_docs_menu['errors'].push('2105');
		
			sp_docs_menu['errors'].push('2106');
		
			sp_docs_menu['errors'].push('2107');
		
			sp_docs_menu['errors'].push('3000');
		
			sp_docs_menu['errors'].push('3001');
		
			sp_docs_menu['errors'].push('3002');
		
			sp_docs_menu['errors'].push('3003');
		
			sp_docs_menu['errors'].push('3004');
		
			sp_docs_menu['errors'].push('4001');
		
			sp_docs_menu['errors'].push('4002');
		
			sp_docs_menu['errors'].push('5010');
		
			sp_docs_menu['errors'].push('5100');
		
			sp_docs_menu['errors'].push('5101');
		
			sp_docs_menu['errors'].push('5102');
		
			sp_docs_menu['errors'].push('5103');
		
			sp_docs_menu['errors'].push('5104');
		
			sp_docs_menu['errors'].push('5106');
		
			sp_docs_menu['errors'].push('5108');
		
			sp_docs_menu['errors'].push('5110');
		
			sp_docs_menu['errors'].push('5112');
		
			sp_docs_menu['errors'].push('5114');
		
			sp_docs_menu['errors'].push('6100');
		
			sp_docs_menu['errors'].push('6101');
		
			sp_docs_menu['errors'].push('6201');
		
			sp_docs_menu['errors'].push('6202');
		
			sp_docs_menu['errors'].push('7100');
		
			sp_docs_menu['errors'].push('7101');
		
			sp_docs_menu['errors'].push('7102');
		
			sp_docs_menu['errors'].push('7103');
		
			sp_docs_menu['errors'].push('7104');
		
			sp_docs_menu['errors'].push('7200');
		
			sp_docs_menu['errors'].push('7201');
		
			sp_docs_menu['errors'].push('7202');
		
			sp_docs_menu['errors'].push('9000');
		
			sp_docs_menu['errors'].push('9001');
		
			sp_docs_menu['errors'].push('9002');
		
			sp_docs_menu['errors'].push('9003');
		
			sp_docs_menu['errors'].push('9004');
		
			sp_docs_menu['errors'].push('9005');
		
			sp_docs_menu['errors'].push('9006');
		
	
		sp_docs_menu['express'] = [];
		
			sp_docs_menu['express'].push('quickstart');
		
	
		sp_docs_menu['flask'] = [];
		
			sp_docs_menu['flask'].push('quickstart');
		
	
		sp_docs_menu['guides'] = [];
		
			sp_docs_menu['guides'].push('ad-ldap');
		
			sp_docs_menu['guides'].push('api-key-management');
		
			sp_docs_menu['guides'].push('dev-test-prod-environments');
		
			sp_docs_menu['guides'].push('multi-tenant');
		
			sp_docs_menu['guides'].push('social-integrations');
		
			sp_docs_menu['guides'].push('token-management');
		
			sp_docs_menu['guides'].push('using-id-site');
		
	
		sp_docs_menu['home'] = [];
		
	
		sp_docs_menu['how-do-i'] = [];
		
	
		sp_docs_menu['images'] = [];
		
	
		sp_docs_menu['integrations'] = [];
		
	
		sp_docs_menu['java'] = [];
		
			sp_docs_menu['java'].push('product-guide');
		
			sp_docs_menu['java'].push('quickstart');
		
	
		sp_docs_menu['javascripts'] = [];
		
	
		sp_docs_menu['nodejs'] = [];
		
			sp_docs_menu['nodejs'].push('quickstart');
		
	
		sp_docs_menu['php'] = [];
		
			sp_docs_menu['php'].push('product-guide');
		
			sp_docs_menu['php'].push('quickstart');
		
	
		sp_docs_menu['python'] = [];
		
			sp_docs_menu['python'].push('product-guide');
		
			sp_docs_menu['python'].push('quickstart');
		
	
		sp_docs_menu['rest'] = [];
		
			sp_docs_menu['rest'].push('api');
		
			sp_docs_menu['rest'].push('product-guide');
		
			sp_docs_menu['rest'].push('quickstart');
		
	
		sp_docs_menu['ruby'] = [];
		
			sp_docs_menu['ruby'].push('product-guide');
		
			sp_docs_menu['ruby'].push('quickstart');
		
	
		sp_docs_menu['sample-apps'] = [];
		
	
		sp_docs_menu['stylesheets'] = [];
		
	
</script>

<div id="page">
    <div class="fixed-header" id="wrap">
      

<nav class="navbar navbar-storm" role="navigation">
  <div class="navbar-container">

    <div class="navbar-header">
      <a class="navbar-brand" href="https://stormpath.com/">
        <img src="/images/template/logo_nav.png"/>
      </a>
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="navbar-collapse collapse" id="main-nav">
      <a type="button" class="btn navbar-btn button-primary-bordered button-signup navbar-right" href="https://api.stormpath.com/register" onClick="ga('send', 'event', { eventCategory: 'sign up', eventAction: 'sign up button click', eventLabel: 'www', eventValue: 1});">Sign Up Now</a>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="http://docs.stormpath.com/">Docs</a></li>
        <li><a href="https://stormpath.com/tutorial">Tutorial</a></li>
        <li><a href="https://stormpath.com/product" class="arrow_box">Product</a></li>
        <li><a href="https://stormpath.com/pricing">Pricing</a></li>
        <li><a href="https://stormpath.com/about">About</a></li>
        <li><a href="https://api.stormpath.com/login">Login</a></li>
      </ul>
    </div>
    <!--/.nav-collapse -->
  </div>
</nav>



    </div>
<!--
  <div id="header-wrapper">
  	<header id="header" role="banner" class="container">
      
    </header>
  </div>-->
  <div id="main-wrapper">
    <div id="main">
      <div id="main-inner">
        <div id="main-inner-inner">
          <div id="content" class="column" role="main">
            <a id="main-content"></a>
            
              <h1 class="title" id="page-title">Stormpath REST API Product Guide</h1>
            
            
<div class="sharing" style="height:22px">
    <div class="addthis_sharing_toolbox"></div>
</div>

          	<p>Stormpath is a User Management API that reduces development time with instant-on, scalable user infrastructure. Stormpath’s intuitive API and expert support make it easy for developers to authenticate, manage and secure users and roles in any application.</p>

<p>To get started with the basics of Stormpath quickly, check out the <a href="/rest/quickstart">REST API Quickstart Guide</a>. For a more complete understanding and reference of the full Stormpath service, read on.</p>

<hr />

<h2><a id="what-is-stormpath"></a>What is Stormpath?</h2>

<p>Stormpath is the first easy, secure user management and authentication service for developers.</p>

<p>Fast and intuitive to use, Stormpath enables plug-and-play security and accelerates application development on any platform.</p>

<p>Built for developers, it offers an easy API, open source SDKs, and an active community. The flexible cloud service can manage millions of users with a scalable pricing model that is ideal for projects of any size.</p>

<p>By offloading user management and authentication to Stormpath, developers can bring new applications to market faster, reduce development and operations costs, and protect their users with best-in-class security.</p>

<h3><a id="overview"></a>Overview</h3>

<p><img src="/images/docs/Architecture.png" alt="High-level Architecture" title="High-level Architecture" width="700" height="430"></p>

<p>Stormpath is a REST API service.  You use a REST client (or one of our open-source language-specific SDKs) inside your application to communicate with the Stormpath API. Stormpath&rsquo;s API allows you to offload user management and authentication by helping you do the following:</p>

<ul>
<li>Account registration, complete with sending welcome emails</li>
<li>Account email verification (send email &ndash;> user clicks a link &ndash;> their account is verified and they can login)</li>
<li>Secure password storage with continuously updated cryptography best practices</li>
<li>Password reset (send email &ndash;> user clicks a link &ndash;> sets new password &ndash;> account password encrypted and stored securely)</li>
<li>Account login (authentication)</li>
<li>Seamless integration with LDAP and Active Directory &ndash; you&rsquo;ll never have to worry about integrating your application with them again</li>
<li>A complete administrative user interface to allow you to manage your applications, directories, accounts and groups</li>
<li>And more&hellip;</li>
</ul>


<p>When building your applications in the past, how much time have you spent writing some or all of this functionality?  It is quite a large amount of work, and this logic has nothing to do with why you&rsquo;re writing your application!  But you need it, and you need it to be secure.</p>

<p>By offloading all of this effort to Stormpath, a service with deep security roots, you can quickly get back to writing your actual application and never worry about password attacks again.</p>

<p><a class="anchor" name="core"></a></p>

<h3><a id="core-concepts"></a>Core Concepts</h3>

<p>Stormpath has five core concepts, and everything else in the Stormpath REST API exists to support them:</p>

<ul>
<li>Applications</li>
<li>Directories</li>
<li>Groups</li>
<li>Accounts</li>
<li>Tenants</li>
<li>Account Stores</li>
</ul>


<p>These resources and their relationships are manageable by the REST API as described in this document, but you may also manage them via the <a href="https://api.stormpath.com">Stormpath Admin Console</a> user interface.</p>

<p><strong>Applications</strong></p>

<p>An <a href="#applications">Application</a> is a real-world software application that communicates with Stormpath to offload user management, authentication, and security workflows.  Each application that communicates with Stormpath is represented within Stormpath so you may manage its security needs.</p>

<p>You can assign one or more <em>Account Stores</em> to an Application.  Accounts within assigned account stores may login to the application.</p>

<p><strong>Account Stores</strong></p>

<p>An <em>Account Store</em> is a generic term for either a <code>Directory</code> or a <code>Group</code>. Directories and Groups are both are considered &lsquo;account stores&rsquo; because they both contain, or &lsquo;store&rsquo;, Accounts.</p>

<ul>
<li><p><strong>Directories</strong></p>

<p>A <a href="#directories">Directory</a> is a top-level storage container of Accounts and Groups.  A Directory also manages security policies (like password strength) for the Accounts it contains.  Stormpath supports two types of Directories: natively hosted &lsquo;Cloud&rsquo; directories that originate in Stormpath and &lsquo;Mirror&rsquo; directories that act as secure mirrors or replicas of existing directories outside of Stormpath, for example LDAP or Active Directory servers.</p>

<p>Directories can be used to cleanly manage segmented account populations &ndash; for example, you might use one Directory for company employees and another Directory for customers, each with its own security policies.</p></li>
<li><p><strong>Groups</strong></p>

<p>A <a href="#groups">Group</a> is a uniquely named collection of Accounts within a Directory.  Each Group within a Directory must have a unique name and may contain Accounts within their own Directory.  Groups are mostly used for security and access control, often called Role-Based Access Control.</p>

<p>For example, you might only show a particular user interface button if an Account is in the &lsquo;Administrators&rsquo; Group. It might be helpful to note that Stormpath does not have an explicit Role concept &ndash; you use Stormpath Groups as Roles for Role-Based Access Control.</p></li>
</ul>


<p><strong>Accounts</strong></p>

<p>An <a href="#accounts">Account</a> is a unique identity within a Directory, with a unique username and/or email address. An account can log in to applications using either the email address or username associated with it. Accounts can represent people end-users, but they can also be used to represent services, machines, or any &lsquo;entity&rsquo; that needs to login to a Stormpath-enabled application.</p>

<p><strong>Tenants</strong></p>

<p>Stormpath is a <a href="http://en.wikipedia.org/wiki/Multitenancy">multi-tenant</a> software service. When you <a href="https://api.stormpath.com/register">sign up for Stormpath</a>, a private data &lsquo;space&rsquo;, called a Tenant, is created for you.  This private <a href="#tenants">tenant space</a> contains all of the data you own, including your applications, directories, accounts and groups and more.  The Tenant concept is mostly &lsquo;behind the scenes&rsquo; and you don&rsquo;t need to use it all that often, but sometimes it is necessary or useful to use directly.</p>

<hr />

<h2><a id="rest-api-general-concepts"></a>REST API General Concepts</h2>

<p><a class="anchor" name="base-url"></a></p>

<h3><a id="base-url"></a>Base URL</h3>

<p>All URLs referenced in the API documentation begin with the following base URL:</p>

<pre><code>https://api.stormpath.com/v1
</code></pre>

<p><a class="anchor" name="authentication"></a></p>

<h3><a id="authentication"></a>Authentication</h3>

<p>Every request to the Stormpath REST API must be authenticated with an API key over HTTPS. HTTP is not supported. If you want to make a REST request to Stormpath, we assume you have already:</p>

<ol>
<li><a href="https://api.stormpath.com/register">Signed up for Stormpath</a>.</li>
<li><a href="/console/product-guide#!ManageAPIkeys">Obtained your API key</a>.</li>
</ol>


<p>When you have an API key, you can choose one of two ways to authenticate with Stormpath:</p>

<ul>
<li><a href="#authentication-basic">HTTP Basic Authentication</a></li>
<li><a href="#authentication-digest">Digest Authentication</a></li>
</ul>


<div class='docs-note'><p>Security Notice: Any account that can access the Stormpath application within the Stormpath Admin Console has full administrative access to your Stormpath data and settings, including access to the REST API if they have an API Key.</p>

<p>Assign user accounts to Stormpath, through <a href="#account-store-mappings">account stores</a>, wisely.</p>
</div>


<p><a class="anchor" name="authentication-basic"></a></p>

<h4>Basic Authentication over HTTPS</h4>

<p>Most clients (including web browsers) show a dialog or prompt for you to provide a username and password for HTTP Basic Authentication.</p>

<p>When using an API key with basic authentication, the <code>API key id</code> is the username and the <code>API key secret</code> is the password:</p>

<pre><code>HTTP basic username: apiKey.id value
HTTP basic password: apiKey.secret value
</code></pre>

<p>For example, if using curl:</p>

<pre><code>curl -u $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -L https://api.stormpath.com/v1/tenants/current
</code></pre>

<!-- {: .bash} -->


<p>or perhaps <a href="https://github.com/jkbr/httpie">httpie</a> (which assumes application/json by default):</p>

<pre><code>http -a $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/tenants/current
</code></pre>

<!-- {: .bash} -->


<p><a class="anchor" name="authentication-digest"></a></p>

<h4>Digest Authentication Over HTTPS</h4>

<p>Stormpath also supports a more secure authentication scheme known as digest authentication. This approach computes a <a href="http://en.wikipedia.org/wiki/Cryptographic_hash_function">cryptographic digest</a> of the request and sends the digest value along with the request. If the transmitted digest matches what the Stormpath API server computes for the same request, the request is authenticated.</p>

<p>This technique is especially secure because the API key secret is <em>never transmitted outside of the application</em>, making it extremely difficult for anything (or anyone) outside of the application to interfere with a request or see the secret.</p>

<p>We recommend using digest authentication whenever possible because it is inherently more secure. However, due to its complexity, it might not be feasible for some projects.</p>

<p>All Stormpath SDKs (currently <a href="/java/product_guide">Java</a>, <a href="/ruby/product_guide">Ruby</a>, <a href="/php/product_guide">PHP</a>, and <a href="/python/product_guide">Python</a>) use this more secure digest authentication so we recommend that you use the SDKs whenever possible. However, if we do not yet have an SDK for your programming language, you should use basic authentication over HTTPS.</p>

<p>Finally, if you would like to use Stormpath digest authentication in a programming language that Stormpath does not yet support, you can attempt to port the algorithm to that language. You can try to replicate the algorithm and use Stormpath existing code as examples or the <a href="https://github.com/stormpath/stormpath-sdk-spec/blob/master/specifications/algorithms/sauthc1.md">documented algorithm</a>:</p>

<ul>
<li>Java: <a href="https://github.com/stormpath/stormpath-sdk-java/blob/master/impl/src/main/java/com/stormpath/sdk/impl/http/authc/SAuthc1RequestAuthenticator.java">SAuthc1RequestAuthenticator</a> (the <strong>authenticate</strong> method)</li>
<li>Ruby: <a href="https://github.com/stormpath/stormpath-sdk-ruby/blob/master/lib/stormpath-sdk/http/authc/sauthc1_signer.rb">Sauthc1Signer</a> (the <strong>sign_request</strong> method)</li>
<li>PHP: <a href="https://github.com/stormpath/stormpath-sdk-php/blob/master/src/Stormpath/Http/Authc/Sauthc1Signer.php">Sauthc1Signer</a> (the <strong>signRequest</strong> method)</li>
<li>Python: <a href="https://github.com/stormpath/stormpath-sdk-python/blob/master/stormpath/auth.py">Sauthc1Signer</a> (the <strong><strong>call</strong></strong> method)</li>
</ul>


<p>If you port the algorithm to other languages, please let us know. We are happy to help. Email us at <a href="&#109;&#97;&#105;&#108;&#116;&#x6f;&#x3a;&#115;&#x75;&#112;&#x70;&#111;&#114;&#116;&#x40;&#x73;&#116;&#111;&#114;&#109;&#x70;&#97;&#x74;&#104;&#46;&#x63;&#111;&#x6d;">&#x73;&#117;&#x70;&#112;&#x6f;&#114;&#116;&#x40;&#x73;&#x74;&#x6f;&#114;&#x6d;&#x70;&#x61;&#116;&#x68;&#46;&#x63;&#111;&#109;</a> and we will help as best as we can.</p>

<div class='docs-info'><p>The Stormpath <code>SAuthc1</code> digest algorithm is NOT the same as <a href="http://www.ietf.org/rfc/rfc2617.txt" title="RFC 2617">RFC 2617</a> HTTP digest authentication. The Stormpath <code>SAuthc1</code> digest-based authentication scheme is more secure than standard HTTP digest authentication.</p>
</div>


<p><a class="anchor" name="resource-format"></a></p>

<h3><a id="resource-format"></a>Resource Format</h3>

<p>The Stormpath REST API currently only supports JSON resource representations. If you would like other formats supported, please email us at <a href="&#109;&#97;&#x69;&#108;&#x74;&#x6f;&#58;&#115;&#x75;&#112;&#112;&#111;&#x72;&#116;&#x40;&#x73;&#116;&#111;&#x72;&#109;&#x70;&#x61;&#x74;&#104;&#46;&#x63;&#111;&#109;">&#x73;&#117;&#112;&#x70;&#111;&#114;&#x74;&#64;&#x73;&#x74;&#111;&#x72;&#x6d;&#112;&#x61;&#x74;&#104;&#46;&#99;&#x6f;&#109;</a> to let us know!</p>

<p><a class="anchor" name="resource-create"></a></p>

<h3><a id="creating-resources"></a>Creating Resources</h3>

<p>You create a resource by submitting an HTTP <code>POST</code> to a resource URI. Any POST body must be represented as JSON.</p>

<p><strong>Request</strong></p>

<p>Requests that contain body content must specify the HTTP <code>Content-Type</code> header with a value of <code>application/json</code>.</p>

<p>An example <strong>Create POST Request</strong>:</p>

<pre><code>curl -X POST \
     -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "name": "Desired name",
           "description": "Desired description",
           "status": "enabled"
         }` \
     "https://api.stormpath.com/v1/tenants/$YOUR_TENANT_ID/applications"
</code></pre>

<!-- {: .bash} -->


<p><strong>Response</strong></p>

<p>Create <code>POST</code> responses contain:</p>

<table>
<thead>
<tr>
<th align="left">Item </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">HTTP Status Code </td>
<td align="left"> The code indicates general success or failure of the request.</td>
</tr>
<tr>
<td align="left">HTTP Headers </td>
<td align="left"> Various response headers are set relevant to the particular request.</td>
</tr>
<tr>
<td align="left">Response Body </td>
<td align="left"> Successful requests contain the created entity resource representation, while failed requests show an <a href="#errors">error representation</a>.</td>
</tr>
</tbody>
</table>


<p>Possible <strong>Create POST Response Status Codes</strong> include:</p>

<table>
<thead>
<tr>
<th align="left">Response Code </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>201 CREATED</code> </td>
<td align="left"> The request was successful, we created a new resource, and the response body contains the representation. The <code>Location</code> header contains the new resource&rsquo;s canonical URI.</td>
</tr>
<tr>
<td align="left"><code>400 BAD REQUEST</code> </td>
<td align="left"> The data given in the <code>POST</code> or <code>PUT</code> failed validation. Inspect the response body for details.</td>
</tr>
<tr>
<td align="left"><code>401 UNAUTHORIZED</code> </td>
<td align="left"> Authentication credentials are required to access the resource. All requests must be authenticated.</td>
</tr>
<tr>
<td align="left"><code>403 FORBIDDEN</code> </td>
<td align="left"> The supplied authentication credentials are not sufficient to access the resource.</td>
</tr>
<tr>
<td align="left"><code>404 NOT FOUND</code> </td>
<td align="left"> We could not locate the resource based on the specified URI.</td>
</tr>
<tr>
<td align="left"><code>405 METHOD NOT ALLOWED</code> </td>
<td align="left"> <code>POST</code> is not supported for the resource.</td>
</tr>
<tr>
<td align="left"><code>409 CONFLICT</code> </td>
<td align="left"> You cannot create or update a resource because another resource already exists or conflicts with one you are submitting.</td>
</tr>
<tr>
<td align="left"><code>415 UNSUPPORTED MEDIA TYPE</code> </td>
<td align="left"> You did not specify the request <code>Content-Type</code> header to have a value of <code>application/json</code>.  Only <code>application/json</code> is currently supported.</td>
</tr>
<tr>
<td align="left"><code>429 TOO MANY REQUESTS</code> </td>
<td align="left"> Your application is sending too many simultaneous requests.</td>
</tr>
<tr>
<td align="left"><code>500 SERVER ERROR</code> </td>
<td align="left"> We could not create or update the resource. Please try again.</td>
</tr>
<tr>
<td align="left"><code>503 SERVICE UNAVAILABLE</code> </td>
<td align="left"> We are temporarily unable to service the request. Please wait for a bit and try again.</td>
</tr>
</tbody>
</table>


<p>Example <strong>Create POST Response</strong>:</p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
  "name": "Desired name",
  "description": "Desired description",
  "status": "ENABLED",
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
  },
  "accounts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
  },
  "groups": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  },
  "loginAttempts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/loginAttempts"
  },
  "accountStoreMappings": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accountStoreMappings"
  },
  "defaultAccountStoreMapping": {
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7bKZXzXxHFrVeNOExAmPlE"
  },
  "defaultGroupStoreMapping": {
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7bKZXzXxHFrVeNOExAmPlE"
  },
  "passwordResetTokens": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
  },
}
</code></pre>

<!-- {: .http} -->


<p><a class="anchor" name="resource-retrieve"></a></p>

<h3><a id="retrieving-resources"></a>Retrieving Resources</h3>

<p><strong>Request</strong></p>

<p>You can retrieve a resource representation by <code>GET</code>ting its url.</p>

<p>An example API <code>GET</code>:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     -L https://api.stormpath.com/v1/tenants/current
</code></pre>

<!-- {: .bash} -->


<p><strong>Response</strong></p>

<p><code>GET</code> responses contain:</p>

<table>
<thead>
<tr>
<th align="left">Item </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">HTTP Status Code </td>
<td align="left"> The code indicates general success or failure of the request.</td>
</tr>
<tr>
<td align="left">HTTP Headers </td>
<td align="left"> Various response headers are set relevant to the particular request.</td>
</tr>
<tr>
<td align="left">Response Body </td>
<td align="left"> Successful requests contain the requested entity resource representation, while failed requests show an <a href="#errors">error representation</a>.</td>
</tr>
</tbody>
</table>


<p>Possible <strong>GET Response Status Codes</strong> include:</p>

<table>
<thead>
<tr>
<th align="left">Response Code </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>200 OK</code> </td>
<td align="left"> The request was successful and the response body contains the representation requested.</td>
</tr>
<tr>
<td align="left"><code>302 FOUND</code> </td>
<td align="left"> A common redirect response; you can <code>GET</code> the representation at the URI in the <code>location</code> response header.</td>
</tr>
<tr>
<td align="left"><code>304 NOT MODIFIED</code> </td>
<td align="left"> Your client&rsquo;s cached version of the representation is still up to date.</td>
</tr>
<tr>
<td align="left"><code>401 UNAUTHORIZED</code> </td>
<td align="left"> Authentication credentials are required to access the resource. All requests must be authenticated.</td>
</tr>
<tr>
<td align="left"><code>403 FORBIDDEN</code> </td>
<td align="left"> The supplied authentication credentials are not sufficient to access the resource.</td>
</tr>
<tr>
<td align="left"><code>404 NOT FOUND</code> </td>
<td align="left"> We could not locate the resource based on the specified URI.</td>
</tr>
<tr>
<td align="left"><code>429 TOO MANY REQUESTS</code> </td>
<td align="left"> Your application is sending too many simultaneous requests.</td>
</tr>
<tr>
<td align="left"><code>500 SERVER ERROR</code> </td>
<td align="left"> We could not return the representation due to an internal server error.</td>
</tr>
<tr>
<td align="left"><code>503 SERVICE UNAVAILABLE</code> </td>
<td align="left"> We are temporarily unable to service the request. Please wait for a bit and try again.</td>
</tr>
</tbody>
</table>


<p>An example <strong>API GET Response</strong>:</p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA",
  "name": "My Tenant",
  "key": "myTenant"
}
</code></pre>

<p><a class="anchor" name="resource-update"></a></p>

<h3><a id="updating-resources"></a>Updating Resources</h3>

<p>If you want to update a resource, submit an HTTP <code>POST</code> to a resource URI. Any <code>POST</code> body must be represented as JSON. You can submit one or more attributes of a resource, but at least one attribute must be specified.</p>

<p><strong>Request</strong></p>

<p>Requests that contain body content must specify the HTTP <code>Content-Type</code> header with a value of <code>application/json</code>.</p>

<p>An example <strong>Update (HTTP POST) request</strong>, updating a single attribute:</p>

<pre><code>curl -X POST \
     -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "name": "New name"
         }' \
     "https://api.stormpath.com/v1/applications/$APPLICATION_ID"
</code></pre>

<!-- {: .bash} -->


<p>Notice that the post body in this particular example contains only a single JSON name/value pair, although application resources have multiple name/value pairs.</p>

<p>Updates enable updating one or more resource attribute values. At least one resource attribute value must be specified.</p>

<p><strong>Response</strong></p>

<p>Update <code>POST</code> responses contain:</p>

<table>
<thead>
<tr>
<th align="left">Item </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">HTTP Status Code </td>
<td align="left"> The code indicates general success or failure of the request.</td>
</tr>
<tr>
<td align="left">HTTP Headers </td>
<td align="left"> Various response headers are set relevant to the particular request.</td>
</tr>
<tr>
<td align="left">Response Body </td>
<td align="left"> Successful requests contain the updated entity resource representation, while failed requests show an <a href="#errors">error representation</a>.</td>
</tr>
</tbody>
</table>


<p>Possible <strong>Update POST Response Status Codes</strong> include:</p>

<table>
<thead>
<tr>
<th align="left">Response Code </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>200 OK</code> </td>
<td align="left"> The request was successful, we updated the resource, and the response body contains the resource full representation.</td>
</tr>
<tr>
<td align="left"><code>400 BAD REQUEST</code> </td>
<td align="left"> The data given in the POST request body failed validation. Inspect the response body for details.</td>
</tr>
<tr>
<td align="left"><code>401 UNAUTHORIZED</code> </td>
<td align="left"> The supplied credentials, if any, are not sufficient to create or update the resource.</td>
</tr>
<tr>
<td align="left"><code>403 FORBIDDEN</code> </td>
<td align="left"> The supplied authentication credentials are not sufficient to access the resource.</td>
</tr>
<tr>
<td align="left"><code>404 NOT FOUND</code> </td>
<td align="left"> We could not locate the resource based on the specified URI.</td>
</tr>
<tr>
<td align="left"><code>405 METHOD NOT ALLOWED</code> </td>
<td align="left"> POST is not supported for the resource.</td>
</tr>
<tr>
<td align="left"><code>409 CONFLICT</code> </td>
<td align="left"> You cannot create or update a resource because another resource already exists or conflicts with one you are submitting.</td>
</tr>
<tr>
<td align="left"><code>415 UNSUPPORTED MEDIA TYPE</code> </td>
<td align="left"> You did not specify the request <code>Content-Type</code> header to have a value of <code>application/json</code>.  Only <code>application/json</code> is currently supported.</td>
</tr>
<tr>
<td align="left"><code>429 TOO MANY REQUESTS</code> </td>
<td align="left"> Your application is sending too many simultaneous requests.</td>
</tr>
<tr>
<td align="left"><code>500 SERVER ERROR</code> </td>
<td align="left"> We could not create or update the resource. Please try again.</td>
</tr>
<tr>
<td align="left"><code>503 SERVICE UNAVAILABLE</code> </td>
<td align="left"> We are temporarily unable to service the request. Please wait for a bit and try again.</td>
</tr>
</tbody>
</table>


<p>Example <strong>Update POST response</strong>:</p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
  "name": "New name",
  "description": "Really. The best application ever.",
  "status": "ENABLED",
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
  },
  "accounts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
  },
  "groups": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  },
  "loginAttempts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/loginAttempts"
  },
  "accountStoreMappings": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accountStoreMappings"
  },
  "defaultAccountStoreMapping": {
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7bKZXzXxHFrVeNOExAmPlE"
  },
  "defaultGroupStoreMapping": {
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7bKZXzXxHFrVeNOExAmPlE"
  },
  "passwordResetTokens": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
  },
}
</code></pre>

<!-- {: .http} -->


<p><a class="anchor" name="resource-delete"></a></p>

<h3><a id="deleting-resources"></a>Deleting Resources</h3>

<p>To delete a resource, make an HTTP <code>DELETE</code> request to the resource URL. Note that not all Stormpath REST API resources support delete.</p>

<p><strong>Request</strong></p>

<p>An example <strong>DELETE request</strong>:</p>

<pre><code>curl -X DELETE -u $API_KEY_ID:$API_KEY_SECRET "https://api.stormpath.com/v1/applications/$APPLICATION_ID"
</code></pre>

<!-- {: .bash} -->


<p><strong>Response</strong></p>

<p>Possible <strong>DELETE Response Status Codes</strong> include:</p>

<table>
<thead>
<tr>
<th align="left">Response Code </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>204 NO CONTENT</code> </td>
<td align="left"> The request was successful; the resource was deleted. The deleted resource representation will not be returned.</td>
</tr>
<tr>
<td align="left"><code>401 UNAUTHORIZED</code> </td>
<td align="left"> The supplied credentials, if any, are not sufficient to create or update the resource.</td>
</tr>
<tr>
<td align="left"><code>403 FORBIDDEN</code> </td>
<td align="left"> The supplied authentication credentials are not sufficient to access the resource.</td>
</tr>
<tr>
<td align="left"><code>404 NOT FOUND</code> </td>
<td align="left"> We could not locate the resource based on the specified URI.</td>
</tr>
<tr>
<td align="left"><code>405 METHOD NOT ALLOWED</code> </td>
<td align="left"> DELETE is not supported for the resource.</td>
</tr>
<tr>
<td align="left"><code>429 TOO MANY REQUESTS</code> </td>
<td align="left"> Your application is sending too many simultaneous requests.</td>
</tr>
<tr>
<td align="left"><code>500 SERVER ERROR</code> </td>
<td align="left"> We could not create or update the resource. Please try again.</td>
</tr>
<tr>
<td align="left"><code>503 SERVICE UNAVAILABLE</code> </td>
<td align="left"> We are temporarily unable to service the request. Please wait for a bit and try again.</td>
</tr>
</tbody>
</table>


<p>Example <strong>DELETE response</strong>:</p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<!-- {: .http} -->


<p><a class="anchor" name="http-method-overloading"></a></p>

<h3><a id="http-method-overloading"></a>HTTP Method Overloading</h3>

<p>The Stormpath REST API uses HTTP <code>GET</code>, <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> methods. Because some HTTP clients do not support PUT and DELETE methods, you can simulate them by sending a POST request to a resource endpoint with a <strong><code>_method</code></strong> query string parameter. The parameter value can be DELETE (<code>_method=DELETE</code>) or PUT (<code>_method=PUT</code>).</p>

<p>For example, if you want to delete a particular application resource, you would ordinarily execute an HTTP <code>DELETE</code> request:</p>

<pre><code>curl -X DELETE -u $API_KEY_ID:$API_KEY_SECRET "https://api.stormpath.com/v1/applications/$APPLICATION_ID"
</code></pre>

<!-- {: .bash} -->


<p>But if your HTTP client only supports GET and POST, you can send a POST request with the <code>_method</code> query string parameter:</p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET "https://api.stormpath.com/v1/applications/$APPLICATION_ID?_method=DELETE"
</code></pre>

<!-- {: .bash} -->


<p><a class="anchor" name="errors"></a></p>

<h3><a id="errors"></a>Errors</h3>

<p>REST API responses indicating an error or warning are represented by a proper response HTTP status code (403, 404, etc). Additionally, a response body is provided containing the following information:</p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a class="anchor" name="errors-status"></a><code>status</code> </td>
<td align="left"> The corresponding HTTP status code. </td>
<td align="left"> Integer</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="errors-code"></a><code>code</code> </td>
<td align="left"> A <a href="/errors">Stormpath-specific error code</a> that can be used to obtain more information. </td>
<td align="left"> Integer</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="errors-message"></a><code>message</code> </td>
<td align="left"> A simple, easy to understand message that you can show directly to your application end-user. </td>
<td align="left"> String</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="errors-developer-message"></a><code>developerMessage</code> </td>
<td align="left"> A clear, plain text explanation with technical details that might assist a developer calling the Stormpath API. </td>
<td align="left"> String</td>
</tr>
<tr>
<td align="left"><code>moreInfo</code> </td>
<td align="left"> A fully qualified URL that may be accessed to obtain more information about the error. </td>
<td align="left"> String</td>
</tr>
</tbody>
</table>


<p><strong>Example</strong></p>

<p>Example request for a resource that does not exist:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     https://api.stormpath.com/v1/applications/thisApplicationDoesNotExist
</code></pre>

<!-- {: .bash} -->


<p>Example response:</p>

<pre><code>HTTP/1.1 404 Not Found

{
  "status": 404,
  "code": 404,
  "message": "Oops! The application you specified cannot be found.",
  "developerMessage": "The specified Application cannot be found. If you accessed this url via a stale href reference, it might be helpful to acquire the tenant's Application Collection Resource to obtain the current list of applications.",
  "moreInfo": "https://docs.stormpath.com/errors/404"
}
</code></pre>

<!-- {: .http} -->


<h4>Error Code Reference</h4>

<p>The <a href="/errors">Stormpath Error Code Reference</a> provides the list of all Stormpath-specific error codes and their meanings.</p>

<p><a class="anchor" name="collections"></a></p>

<h3><a id="collection-resources"></a>Collection Resources</h3>

<p>A <code>Collection Resource</code> is a resource containing other resources. It is known as a Collection <em>Resource</em> because it is itself a first class resource &ndash; it has its own attributes similar to any other resource in addition to the instances it contains.</p>

<p>If you want to interact with multiple resources, you must do so with a Collection Resource. Collection Resources also support additional behavior specific to collections, such as <a href="#pagination">pagination</a>, <a href="#sorting">sort ordering</a>, and <a href="#search">searching</a>.</p>

<p><strong>Collection Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The fully qualified location URI of the Collection Resource. </td>
<td align="left"> String</td>
</tr>
<tr>
<td align="left"><a id="collections-offset"></a><code>offset</code></td>
<td align="left"> The zero-based starting index in the entire collection of the first item to return. The default value is <code>0</code>. This is a <a href="#pagination">pagination</a>-specific attribute. </td>
<td align="left"> Integer</td>
</tr>
<tr>
<td align="left"><a id="collections-limit"></a><code>limit</code> </td>
<td align="left"> The maximum number of collection items to return for a single request. Minimum value is <code>1</code>. The maximum value is <code>100</code> and the default value is <code>25</code>. This is a <a href="#pagination">pagination</a>-specific attribute. </td>
<td align="left"> Integer</td>
</tr>
<tr>
<td align="left"><code>size</code> </td>
<td align="left"> An integer that represents the total number of items in the collection </td>
<td align="left"> Integer</td>
</tr>
<tr>
<td align="left"><a id="collections-items"></a><code>items</code> </td>
<td align="left"> An array containing the current page of resources. The size of this array can be less than the requested <code>limit</code>. For example, if the limit requested is greater than the maximum allowed or if the response represents the final page in the total collection and the item count of the final page is less than the <code>limit</code>. This is a <a href="#pagination">pagination</a>-specific attribute. </td>
<td align="left"> Array</td>
</tr>
</tbody>
</table>


<p><strong>Request</strong></p>

<p>To acquire a Collection Resource, submit an HTTP <code>GET</code> to the Collection Resource URI.</p>

<p><a class="anchor" name="pagination"></a></p>

<h3><a id="pagination"></a>Pagination</h3>

<p>If a Collection Resource represents a large enough number of resource instances, it will not include them all in a single response. Instead a technique known as <em>pagination</em> is used to break up the results into one or more pages of data. You can request additional pages as separate requests.</p>

<p><a class="anchor" name="pagination-query-parameters"></a></p>

<h4>Query Parameters</h4>

<p>There are two optional query parameters that may be specified to control pagination:</p>

<ul>
<li><a href="#collections-offset">offset</a>: The zero-based starting index in the entire collection of the first item to return. Default is <code>0</code>.</li>
<li><a href="#collections-limit">limit</a>: The maximum number of collection items to return for a single request. Minimum value is <code>1</code>. Maximum value is <code>100</code>. Default is <code>25</code>.</li>
</ul>


<p><strong>Example Collection Resource Request</strong></p>

<p>An example <code>GET</code> request for a Collection Resource using pagination:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/applications?offset=10&amp;limit=40"
</code></pre>

<!-- {: .bash} -->


<p>This example requests a tenant&rsquo;s <code>applications</code> Collection Resource from the server with page results starting at index 10 (the 11th element), with a maximum of 40 total elements.</p>

<p><strong>Example Collection Resource Response</strong></p>

<pre><code>HTTP/1.1 200 OK

{
  "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDEXAMPLE/applications?offset=10&amp;limit=40"
  "offset": 10,
  "limit": 40,
  "items" : [
    {
      ... Application 10's name/value pairs ...
    },
    ...,
    {
      ... Application 49's name/value pairs ...
    }
  ]
}
</code></pre>

<p><a class="anchor" name="sorting"></a></p>

<h3><a id="sorting"></a>Sorting</h3>

<p>A request for a Collection Resource can contain an optional <code>orderBy</code> query parameter. The query parameter value is a <a href="http://en.wikipedia.org/wiki/Percent-encoding" title="HTML URL Encoding">URL-encoded</a> comma-delimited list of ordering statements.</p>

<p>For example, a sorted request (where <code>%2C</code> is the URL encoding for the comma character) might look like this:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     https://api.stormpath.com/v1/accounts?orderBy=orderStatement1%2CorderStatement2%2C...%2CorderStatementN
</code></pre>

<!-- {: .bash} -->


<p>When URL-decoded, the URL looks like this:</p>

<pre><code>https://api.stormpath.com/v1/accounts?orderBy=orderStatement1,orderStatement2,...,orderStatementN
</code></pre>

<p>Each <code>orderStatement</code> is defined as follows:</p>

<p><code>orderStatement ::= sortableAttributeName optionalAscendingOrDescendingStatement</code></p>

<p>where:</p>

<ul>
<li><code>sortableAttributeName</code> is the name of a sortable attribute of a resource in the <code>items</code> array. Sortable attributes are primitives (non-complex and non-link) attributes, such as integers and strings.</li>
<li><code>optionalAscendingOrDescendingStatement</code> is composed of the following:

<ul>
<li>a space character (<code>%20</code> URL encoded) followed by:</li>
<li>the token <code>asc</code> (ascending) or <code>desc</code> (descending)</li>
</ul>
</li>
</ul>


<p>If the <code>optionalAscendingOrDescendingStatement</code> parameter is not included (the query parameter value is a sortable attribute name only), <code>asc</code> is assumed by default.</p>

<p>For example, to get all accounts of an application and order the results by <code>surname</code> ascending and then <code>givenName</code> descending:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/someRandomId/accounts?orderBy=surname%2CgivenName%20desc"
</code></pre>

<!-- {: .bash} -->


<p>Which, if URL decoded, the URL would look like this:</p>

<pre><code>https://api.stormpath.com/v1/applications/someRandomId/accounts?orderBy=surname,givenName desc
</code></pre>

<p>Notice the <code>surname</code> order statement does not specify <code>asc</code> or <code>desc</code>, implying <code>asc</code> by default.</p>

<p><a class="anchor" name="search"></a></p>

<h3><a id="search"></a>Search</h3>

<p>You can search for specific resources within a Collection Resource by using certain query parameters to specify your search criteria.</p>

<p>There are currently two different types of searches that might be performed: a generic <a href="#search-filter">Filter</a>-based search and a more targeted <a href="#search-attribute">Attribute</a>-based search. Both options support result <a href="#sorting">ordering</a>, <a href="#pagination">pagination</a>, and <a href="#links-expansion">link expansion</a>.</p>

<div class='docs-info'><p>Currently, a REST search request must be targeted at resources of the same type. For example, a search can be performed across accounts or groups, but not both at the same time.</p>

<p>Because the Stormpath REST API always represents one or more resources of the same type as a Collection Resource, a REST search is always sent to a Collection Resource endpoint.</p>
</div>


<p><a class="anchor" name="search-filter"></a></p>

<h4>Filter Search</h4>

<p>A filter search consists of specifying a <code>q</code> query parameter and a corresponding search value on a Collection Resource URL:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/someCollection?q=some+criteria"
</code></pre>

<!-- {: .bash} -->


<p>For example, to search across an application&rsquo;s accounts for any account that has a searchable attribute containing the text &lsquo;Joe&rsquo;:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
    "https://api.stormpath.com/v1/applications/someAppId/accounts?q=Joe"
</code></pre>

<!-- {: .bash} -->


<p><strong>Matching Logic</strong></p>

<p>If the entered criteria, through a case-<em>insensitive</em> comparison, exists within (or is equal to) any viewable attribute on an instance in the collection, that instance is included in the query results. Only instances visible to the current caller (owned by the caller&rsquo;s tenant), are returned in the query results.</p>

<p>For example, consider the following query:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts?q=Joe"
</code></pre>

<!-- {: .bash} -->


<p>This returns all accounts where:</p>

<ul>
<li>Each account is owned by the caller&rsquo;s <a href="#tenants">tenant</a></li>
<li>The account <code>givenName</code> equals or contains &lsquo;joe&rsquo; (case insensitive) OR</li>
<li>The account <code>surname</code> equals or contains &lsquo;joe&rsquo; (case insensitive) OR</li>
<li>The account <code>email</code> equals or contains &lsquo;joe&rsquo; (case insensitive) OR</li>
<li>&hellip; etc &hellip;</li>
</ul>


<p>In other words, each attribute comparison is similar to a &lsquo;like&rsquo; operation in traditional RDBMS contexts. For example, if SQL was used to execute the query, it might look like this:</p>

<pre><code>select * from my_tenant_accounts where
    (lower(givenName) like '%joe%' OR
     lower(surname) like '%joe%' OR
     lower(email) like '%joe%' OR ... );
</code></pre>

<p><a class="anchor" name="search-attribute"></a></p>

<h4>Attribute Search</h4>

<p>Attribute-based search is the ability to find resources based on full and partial matching of specific individual resource attributes:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/someCollection?anAttribute=someValue&amp;anotherAttribute=anotherValue"
</code></pre>

<!-- {: .bash} -->


<p>For example, to search an application&rsquo;s accounts for an account with a <code>givenName</code> of <code>Joe</code>:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/someAppId/accounts?givenName=Joe"
</code></pre>

<!-- {: .bash} -->


<p><strong>Matching Logic</strong></p>

<p>Attribute-based queries use standard URI query parameters and function as follows:</p>

<ul>
<li>Each query parameter name is the same name of a searchable attribute on an instance in the <a href="#collections">Collection Resource</a>.</li>
<li>A query parameter value triggers one of four types of matching criteria:

<ul>
<li>No asterisk at the beginning or end of the value indicates a direct case-insensitive match.</li>
<li>An asterisk only at the beginning of the value indicates that the case-insensitive value is at the end.</li>
<li>An asterisk only at the end of the value indicates that the case-insensitive value is at the beginning.</li>
<li>An asterisk at the end AND at the beginning of the value indicates the value is contained in the string.</li>
</ul>
</li>
</ul>


<p>For example, consider the following query:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts?givenName=Joe&amp;middleName=*aul&amp;surname=*mit*&amp;email=joePaul*&amp;status=disabled"
</code></pre>

<!-- {: .bash} -->


<p>This returns all accounts where:</p>

<ul>
<li>Each account is owned by the caller <a href="#tenants">tenant</a>.</li>
<li>The account <code>givenName</code> is equal to &lsquo;Joe&rsquo; (case insensitive) AND</li>
<li>The account <code>middleName</code> ends with &lsquo;aul&rsquo; (case insensitive) AND</li>
<li>The account <code>surname</code> equals or contains &lsquo;mit&rsquo; (case insensitive) AND</li>
<li>The account <code>email</code> starts with with &lsquo;joePaul&rsquo; (case insensitive) AND</li>
<li>The account <code>status</code> equals &lsquo;disabled&rsquo; (case insensitive).</li>
</ul>


<div class='docs-note'><p>For resources with a <code>status</code> attribute, status query values <strong>must be the exact value</strong>. For example, <code>enabled</code> or <code>disabled</code> must be passed and fragments such as <code>ena</code>, <code>dis</code>, <code>bled</code> are not acceptable.</p>
</div>


<p><a class="anchor" name="datetime-search"></a></p>

<h4>Datetime Search</h4>

<p>Stormpath exposes properties on all resources that will give you information about when the resource was created or modified.  This includes, but isn&rsquo;t exclusive to common resources like <code>Account</code>, <code>Group</code>, <code>Directory</code>, <code>Application</code>.  For example, an <code>Account</code> resource will have the <code>createdAt</code> and <code>modifiedAt</code> properties:</p>

<pre><code>{
    ...
    "createdAt": "2015-02-02T12:44:28+00:00",
    "customData": {
        "href": "https://api.stormpath.com/v1/accounts/MYNtz266FZK0ruvbKziwc/customData"
    },
    "directory": {
        "href": "https://api.stormpath.com/v1/directories/5r0p5s4uFj70MjL3bQ6EoZ"
    },
    "email": "tom+66@stormpath.com",
    "emailVerificationToken": null,
    "fullName": "tom tom",
    "givenName": "tom",
    "groupMemberships": {
        "href": "https://api.stormpath.com/v1/accounts/MYNtz266FZK0ruvbKziwc/groupMemberships"
    },
    "groups": {
        "href": "https://api.stormpath.com/v1/accounts/MYNtz266FZK0ruvbKziwc/groups"
    },
    "href": "https://api.stormpath.com/v1/accounts/MYNtz266FZK0ruvbKziwc",
    "middleName": null, 
    "modifiedAt": "2015-02-02T12:44:28+00:00",
    ...
}
</code></pre>

<p>Stormpath stores the datetime in <code>ISO 8601</code> which is human readable and has common support across all languages.  The timezone is coordinated universal time (UTC).  Both of these parameters can be queried from collection.</p>

<p><code>createdAt</code> and <code>modifiedAt</code> query parameters are a type of <a href="#search-attribute">Attribute Search</a> that allow you to filter or search collections that were created or modified at a particular time.  The query parameters are supported for all collections.  This includes <code>Account</code>, <code>Group</code>, <code>Directory</code>, <code>Application</code>. As an example, if you want wanted to get all accounts created between Jan 12, 2015 and Jan 14, 2015 you would request:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
 -H "Accept: application/json" \
 "https://api.stormpath.com/v1/applications/MYNK0ruvbKziwc/accounts?createdAt=[2015-01-12, 2015-01-14]"
</code></pre>

<p>The response would be a <a href="#collection-resources">collection</a> of accounts created between the two days.  The datetime range is denoted as:</p>

<pre><code>createdAt|modifiedAt=[ISO-8601-BEGIN-DATETIME, ISO-8601-END-DATETIME]
</code></pre>

<div class='docs-note'><p> Omitting the beginning or ending date is valid for requests.  Omitting the begin datetime range [,ISO-8601-END-DATETIME] would include all resources created or modified before the end datetime.  Omitting the end datetime range [ISO-8601-BEGIN-DATETIME,] would include all resources created or modified after the the begin datetime.</p>
</div>


<p><strong>Exclusion vs Inclusion</strong></p>

<p>The brackets <code>[]</code> denote inclusion, but <code>createdAt</code> and <code>modifiedAt</code> also support exclusion with parentheses <code>()</code>.  For example, if you wanted to get all accounts created between Jan 12, 2015 and Jan 14, 2015 not including the 14th, you would request:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
 -H "Accept: application/json" \
 "https://api.stormpath.com/v1/applications/MYNK0ruvbKziwc/accounts?createdAt=[2015-01-12, 2015-01-14)"
</code></pre>

<p><strong>Precision</strong></p>

<p>Precision of datetime for this request is controlled by the granularity of the ISO-8601 Datetime you specify.  For example, if you need precision in seconds:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
   -H "Accept: application/json" \
   "https://api.stormpath.com/v1/applications/MYNK0ruvbKziwc/accounts?createdAt=[2015-01-12T12:00:00, 2015-01-12T12:00:05]"
</code></pre>

<p>And, if you need precision in years:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
   -H "Accept: application/json" \
   "https://api.stormpath.com/v1/applications/MYNK0ruvbKziwc/accounts?createdAt=[2014, 2015]"
</code></pre>

<p><strong>Shorthand</strong></p>

<p><code>createdAt</code> and <code>modifiedAt</code> can use shorthand for the range to simplify the query parameter.  This is useful for queries where the range can be encapsulated in a particular year, month, day, hour, minute or second.</p>

<p>For example if you wanted all accounts created in Jan 2015 :</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
   -H "Accept: application/json" \
   "https://api.stormpath.com/v1/applications/MYNK0ruvbKziwc/accounts?createdAt=2015-01"
</code></pre>

<p>is shorthand for:</p>

<pre><code>createdAt=[2015-01-01T00:00:00.000Z,2015-02-01T00:00:00.000)
</code></pre>

<p>If you wanted all accounts modified at in the 12th hour UTC on Feb 03, 2015:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
   -H "Accept: application/json" \
   "https://api.stormpath.com/v1/applications/MYNK0ruvbKziwc/accounts?modifiedAt=2015-02-03T12"
</code></pre>

<p>is shorthand for:</p>

<pre><code>modifiedAt=[2015-02-03T12:00:00.000Z, 2015-02-04T13:00:00.000)
</code></pre>

<p><a class="anchor" name="links"></a></p>

<h3><a id="links"></a>Links</h3>

<p>REST resources that reference other resources, such as an account referencing its parent directory, represent the references as a <em>Link</em> object.</p>

<p>A <code>Link</code> is an object nested within an existing resource representation that has, at a minimum, an <code>href</code> attribute.</p>

<p>The <code>href</code> attribute is the fully qualified location URI of the linked resource.</p>

<p>Example Link in <code>JSON</code>:</p>

<pre><code>{
  "href": "https://api.stormpath.com/v1/directories/S2HZc7gXTumVYEXAMPLE"
}
</code></pre>

<p>This JSON object structure is called a link as it provides a similar functionality to more familiar HTML Anchors, often called hyperlinks or just &lsquo;links&rsquo; for short.</p>

<p>The following example <code>account</code> resource has four links &ndash; <code>groups</code>, <code>groupMemberships</code>, <code>directory</code>, and <code>tenant</code>:</p>

<pre><code>{
  "href": "https://api.stormpath.com/v1/accounts/ZugcG3JHQFOTKGEXAMPLE",
  "username": "lonestarr",
  "email": "lonestarr@druidia.com",
  "fullName": "Lonestarr Schwartz",
  "givenName": "Lonestarr",
  "middleName": "",
  "surname": "Schwartz",
  "status": "ENABLED",
  "emailVerificationToken": null,
  "groups": {
    "href": "https://api.stormpath.com/v1/accounts/ZugcG3JHQFOTKGEXAMPLE/groups"
  },
  "groupMemberships": {
    "href": "https://api.stormpath.com/v1/accounts/ZugcG3JHQFOTKGEXAMPLE/groupMemberships"
  },
  "directory": {
    "href": "https://api.stormpath.com/v1/directories/S2HZc7gXTumVYEXAMPLE"
  },
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/wGbGaSNuTUix9EXAMPLE"
  },
}
</code></pre>

<p>When encountering a link object, you can use the link <code>href</code> attribute to interact with that resource as necessary.
<a class="anchor" name="links-expansion"></a></p>

<h3><a id="link-expansion"></a>Link Expansion</h3>

<p>When requesting a resource you might want the Stormpath API server to return not only that resource, but also one or more of its linked resources. Link expansion allows you to retrieve related resources in a single request to the server instead of having to issue multiple separate requests.</p>

<h4>Expand Query Parameter</h4>

<p>For example, to retrieve an account and its parent directory, instead of issuing two requests (one for the account and another for its directory) add an <code>expand</code> query parameter with a value of <code>directory</code> to the resource URI.</p>

<p>For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts/$ACCOUNT_ID?expand=directory"
</code></pre>

<p>Response:</p>

<pre><code>{
    "href": "https://api.stormpath.com/v1/accounts/ZugcG3JHQFOTKGEXAMPLE",
    "username": "lonestarr",
    "email": "lonestarr@druidia.com",
    "fullName": "Lonestarr Schwartz",
    "givenName": "Lonestarr",
    "middleName": "",
    "surname": "Schwartz",
    "status": "ENABLED",
    "emailVerificationToken": null,
    "groups": {
        "href": "https://api.stormpath.com/v1/accounts/ZugcG3JHQFOTKGEXAMPLE/groups"
    },
    "groupMemberships": {
        "href": "https://api.stormpath.com/v1/accounts/ZugcG3JHQFOTKGEXAMPLE/groupMemberships"
    },
    "directory": {
        "href": "https://api.stormpath.com/v1/directories/S2HZc7gXTumVYEXAMPLE",
        "name": "Spaceballs",
        "description": "",
        "status": "ENABLED",
        "accounts": {
            "href":"https://api.stormpath.com/v1/directories/S2HZc7gXTumVYEXAMPLE/accounts"
        },
        "groups": {
            "href":"https://api.stormpath.com/v1/directories/S2HZc7gXTumVYEXAMPLE/groups"
        },
        "tenant":{
            "href":"https://api.stormpath.com/v1/tenants/wGbGaSNuTUix9EXAMPLE"
        }
    },
    "tenant": {
        "href": "https://api.stormpath.com/v1/tenants/wGbGaSNuTUix9EXAMPLE"
    }
}
</code></pre>

<p>Notice that the account&rsquo;s <code>directory</code> attribute is no longer a link; it has been <em>expanded</em> in-line and included in the response body.</p>

<p>You can use this technique to reduce the number of round-trip communication requests to Stormpath API server, enhancing the performance of your application.</p>

<h4>Expandable Attributes</h4>

<p>Most link attributes are expandable. Check the resource&rsquo;s specific documentation to see which of its link attributes are expandable.</p>

<h4>Expansion Depth Limit</h4>

<p>It is currently only possible to expand a resource&rsquo;s immediate links. It is not currently possible to expand links of links.</p>

<p>For example, it would not be possible to return an account with its directory expanded and also the directory&rsquo;s groups expanded as well. Link expansion is currently only possible one level &lsquo;deep&rsquo;.</p>

<p>If you have a critical need of multi-depth expansion, please contact us at <a href="&#x6d;&#x61;&#x69;&#x6c;&#116;&#111;&#x3a;&#115;&#117;&#112;&#x70;&#111;&#114;&#116;&#64;&#115;&#x74;&#111;&#114;&#109;&#x70;&#x61;&#116;&#x68;&#46;&#x63;&#111;&#109;">&#x73;&#x75;&#112;&#x70;&#111;&#x72;&#116;&#64;&#x73;&#x74;&#111;&#x72;&#x6d;&#x70;&#x61;&#116;&#x68;&#46;&#99;&#111;&#109;</a> and submit a feature request.</p>

<h4>Expanding Multiple Links</h4>

<p>You can specify more than one link attribute by specifying a comma-delimited list of attribute names to expand.</p>

<p>For example, to expand the example account&rsquo;s <code>directory</code> and <code>tenant</code> links, execute the following <code>GET</code> request:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts/$ACCOUNT_ID?expand=directory,tenant"
</code></pre>

<!-- {: .bash} -->


<h4>Expanding Collection Links</h4>

<p>It is possible to expand links to Collection Resources as well.  You can additionally provide pagination parameters to control the paged output of the expanded collection.</p>

<p>For example, to expand the above account&rsquo;s groups (starting at the first group &ndash; index 0) and limiting to 10 results total, you can specify the <code>groups</code> attribute name followed <code>offset</code> and/or <code>limit</code> parameters enclosed in parenthesis. For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts/$ACCOUNT_ID?expand=groups(offset:0,limit:10)"
</code></pre>

<!-- {: .bash} -->


<p>The <code>offset</code> and <code>limit</code> values are enclosed in parenthesis and delimited by the colon <code>:</code> character.</p>

<div class='docs-note'><p>If you specify parenthesis for a collection expansion, you <strong>must</strong> specify an <code>offset</code> value or a <code>limit</code> value or both. Parenthesis without an <code>offset</code> or <code>limit</code> is a query syntax error and should be fixed. For example, <code>?expand=groups()</code> is invalid and should be changed to only <code>?expand=groups</code>.</p>
</div>


<p>If you expand a Collection Resource and you do not specify parenthesis with an offset or limit (for example <code>?expand=groups</code>), the default <a href="#pagination">pagination</a> values are used automatically.</p>

<h4>Expansion Combinations</h4>

<p>Finally, it should be noted that you can expand both standard (non-collection) links and collection links in the same <code>expand</code> directive. For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts/$ACCOUNT_ID?expand=directory,groups(offset:0,limit:10)"
</code></pre>

<!-- {: .bash} -->


<p>You can combine the two techniques to more precisely customize your desired output.</p>

<hr />

<p><a class="anchor" name="tenants"></a></p>

<h2><a id="tenants"></a>Tenants</h2>

<p>Stormpath is a <a href="http://en.wikipedia.org/wiki/Multitenancy">multi-tenant</a> software service. When you <a href="https://api.stormpath.com/register">sign up for Stormpath</a>, a private data &lsquo;space&rsquo; is created for you.  This space is represented as a <code>Tenant</code> resource in the Stormpath REST API.</p>

<p>It might help to think of a <code>Tenant</code> as a Stormpath customer.  As a Stormpath Tenant (customer), you own your Tenant resource and everything in it &ndash; <code>Applications</code>, <code>Directories</code>, <code>Accounts</code>, <code>Groups</code>, and so on.</p>

<p>In the Stormpath REST API specifically, your <code>Tenant</code> resource can be thought of as your global starting point.  You can access everything in your tenant space by accessing your tenant resource first and then interacting with its other linked resources (applications collection, directories collection, etc).</p>

<p><a class="anchor" name="tenant-resource"></a></p>

<h3><a id="tenant-resource"></a>Tenant Resource</h3>

<p><a class="anchor" name="tenant-resource-uri"></a></p>

<h4>Resource URI</h4>

<pre><code>/v1/tenants/:tenantId
</code></pre>

<p><a class="anchor" name="tenant-resource-attributes"></a></p>

<h4>Tenant Resource Attributes</h4>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a class="anchor" name="tenant-resource-href"></a><code>href</code> </td>
<td align="left"> The tenant resource&rsquo;s fully qualified URL. </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="tenant-resource-name"></a><code>name</code> </td>
<td align="left"> The name of the tenant. Unique across all tenants. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="tenant-resource-key"></a><code>key</code> </td>
<td align="left"> Human readable tenant key. Unique across all tenants. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 63 characters, no whitespace, lower-case a-z and dash &lsquo;&ndash;&rsquo; characters only, cannot start or end with a dash &lsquo;&ndash;&rsquo; character.</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="tenant-resource-applications"></a><code>applications</code> </td>
<td align="left"> A link to the tenant&rsquo;s applications. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="tenant-resource-directories"></a><code>directories</code> </td>
<td align="left"> A link to the tenant&rsquo;s directories. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>For Tenants, you can:</p>

<ul>
<li><a href="#tenant-retrieve">Retrieve a tenant</a></li>
<li><a href="#tenant-current">Retrieve the current tenant</a></li>
<li><a href="#tenant-applications">Access a tenant&rsquo;s applications</a></li>
<li><a href="#tenant-directories">Access a tenant&rsquo;s directories</a></li>
</ul>


<!-- TODO: We do not want users to update their Tenant information yet: * [Update (HTTP `POST`) a tenant resource](#UpdateTenantResource) -->


<p>&ldquo;Create&rdquo; and &ldquo;Delete&rdquo; Tenant operations are currently not supported via the REST API. If you require this functionality, please email <a href="&#109;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#115;&#x75;&#x70;&#x70;&#111;&#x72;&#116;&#64;&#x73;&#116;&#111;&#114;&#109;&#x70;&#97;&#x74;&#104;&#x2e;&#x63;&#111;&#x6d;">&#115;&#117;&#112;&#112;&#x6f;&#x72;&#116;&#64;&#115;&#x74;&#111;&#x72;&#x6d;&#112;&#x61;&#116;&#104;&#x2e;&#x63;&#x6f;&#109;</a> and request it.</p>

<p><a class="anchor" name="tenant-retrieve"></a></p>

<h3><a id="retrieve-a-tenant"></a>Retrieve a Tenant</h3>

<p>Execute a <code>GET</code> request with the tenant URI to retrieve the <code>Tenant</code> resource.  You may only retrieve your own Tenant: every API Key that executes REST requests is associated with a Tenant, and the request caller may only retrieve the Tenant corresponding to the API Key used.</p>

<p>If you do not have your Tenant&rsquo;s specific URI handy, you can always retrieve your Tenant using the <a href="#tenant-current">current Tenant alias URI</a>.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA",
  "name": "My Tenant",
  "key": "myTenant",
  "applications": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA/applications"
  },
  "directories": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA/directories"
  }
}
</code></pre>

<p><a class="anchor" name="tenant-current"></a></p>

<h3><a id="retrieve-the-current-tenant"></a>Retrieve the Current Tenant</h3>

<p>Because a REST caller can retrieve one and only one <code>Tenant</code> resource, it is often more convenient not to be concerned with the Tenant-specific URL is when performing a request, and instead use a simpler permanent alias.</p>

<p>You can request the <code>current</code> Tenant resource, and the API server will automatically issue a <code>302</code> redirect to the <code>Tenant</code> resource corresponding to the currently executing API caller. In other words, this endpoint redirects the API caller to their own Tenant&rsquo;s URI.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET -H "Accept: application/json" -L https://api.stormpath.com/v1/tenants/current
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 302 Moved Temporarily
Location: https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDExaMpLe
Expires: 0
Cache-Control: no-cache, no-store, must-revalidate, max-age=0, proxy-revalidate, no-transform
Pragma: no-cache
</code></pre>

<p>Most REST libraries and web browsers will automatically issue a request for the resource in the <code>Location</code> header.  If you do not see this, just execute a <code>GET</code> request to that <code>Location</code> and you will see your <code>Tenant</code> resource.</p>

<!-- TODO: re-enable after AM-1903 is complete:
<a class="anchor" name="tenant-update"></a>
### Update a Tenant {#tenant-update}  <-- FYI, this type or anchor tag doesn't work.

If you want to update one or more attribute of your `Tenant` resource, execute an HTTP `POST` request to the tenant URI.  Unspecified attribute are not changed. At least one attribute must be specified.

**Optional Attributes**

* [name](#Tname)

**Example Request**

    POST https://api.stormpath.com/v1/tenants/WpM9nyZ2TbaEzfbRvLk9KA

    {
      "name": "New Name"
    }

**Example Response**

    HTTP/1.1 200 OK
    Content-Type: application/json;charset=UTF-8

    {
      "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA",
      "name": "New Name",
      "key": "my-existing-key",
      "applications": {
        "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA/applications"
      },
      "directories": {
        "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA/directories"
      }
    }

-->


<p><a class="anchor" name="tenant-applications"></a></p>

<h3><a id="tenant-applications"></a>Tenant Applications</h3>

<p>A <code>Tenant</code> has one or more <a href="#applications">Applications</a> registered with Stormpath.  Each registered application may communicate with Stormpath to simplify and automate its user management and authentication needs.</p>

<p><strong>Tenant Applications Collection Resource URI</strong></p>

<pre><code>/v1/tenants/:tenantId/applications
</code></pre>

<p><a class="anchor" name="tenant-applications-list"></a></p>

<h4>List Tenant Applications</h4>

<p>You can list your tenant&rsquo;s applications by sending a <code>GET</code> request to your tenant&rsquo;s <code>applications</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of tenant applications.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/applications"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA/applications",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA"
      ... remaining Application name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/applications/aLlyOUrBAse34js9hjiH9j"
      ... remaining Application name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/applications/Xhf0a9HLA02djsdP90dsQ2"
      ... remaining Application name/value pairs ...
    },
  ]
}
</code></pre>

<p><a class="anchor" name="tenant-applications-search"></a></p>

<h4>Search Tenant Applications</h4>

<p>You may search for applications by sending a <code>GET</code> request to your tenant&rsquo;s <code>applications</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching applications within your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Application Attributes</h5>

<p>The following application attributes are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>name</code></li>
<li><code>description</code></li>
<li><code>status</code></li>
</ul>


<p>In addition to the the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/applications?q=foo&amp;orderBy=name&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<h4>Working With Tenant Applications</h4>

<p>Application resources supports the full suite of CRUD commands and other interactions.  Please see the <a href="#applications">Applications section</a> for more information.</p>

<p><a class="anchor" name="tenant-directories"></a></p>

<h3><a id="tenant-directories"></a>Tenant Directories</h3>

<p>A <code>Tenant</code> has one or more <a href="#directories">Directories</a> that contain accounts and groups.  Accounts may login to <a href="#applications">applications</a> and groups can be used for access control within applications.</p>

<p><strong>Tenant Directories Collection Resource URI</strong></p>

<pre><code>/v1/tenants/:tenantId/directories
</code></pre>

<p><a class="anchor" name="tenant-directories-list"></a></p>

<h4>List Tenant Directories</h4>

<p>You can list your tenant&rsquo;s directories by sending a <code>GET</code> request your tenant&rsquo;s <code>directories</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of your tenant&rsquo;s  directories.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/directories"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW/directories"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
      ... remaining Directory name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/directories/lIKeabOss8w9fJf0fJfb34"
      ... remaining Directory name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/directories/Hfjks7kj9sfKfh9fhsPifa"
      ... remaining Directory name/value pairs ...
    }
  ]
}
</code></pre>

<p><a class="anchor" name="tenant-directories-search"></a></p>

<h4>Search Tenant Directories</h4>

<p>You may search for directories by sending a <code>GET</code> request to your tenant&rsquo;s <code>directories</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching directories with your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Directory Attributes</h5>

<p>The following <a href="#directory">directory attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>name</code></li>
<li><code>description</code></li>
<li><code>status</code></li>
</ul>


<p>In addition to the the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/directories?q=foo&amp;orderBy=name&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<h4>Working With Tenant Directories</h4>

<p>Directory resources support the full suite of CRUD commands and other interactions. Please see the <a href="#directories">Directories section</a> for more information.</p>

<h3><a id="tenant-accounts"></a>Tenant Accounts</h3>

<p>A <code>Tenant</code> has <a href="#accounts">Accounts</a> that represent the users of your <code>Applications</code>.  Accounts may login to <a href="#applications">applications</a> and can have <code>Groups</code> assigned to them.  Accounts across applications and directories can be accessed from your <code>Tenant</code> to provide a tenant-wide view of your account base.</p>

<p><strong>Tenant Account Collection Resource URI</strong></p>

<p>/v1/tenants/:tenantId/accounts</p>

<h4>List Tenant Accounts</h4>

<p>You can list your tenant&rsquo;s accounts by sending a <code>GET</code> request your tenant&rsquo;s <code>accounts</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of your tenant&rsquo;s  accounts.</p>

<p><strong>Example request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/accounts"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW/accounts"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/accounts/bckhcGMXQDujIXpbCDRb2Q"
      ... remaining Account name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/accounts/lIKeabOss8w9fJf0fJfb34"
      ... remaining Accounts name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/accounts/Hfjks7kj9sfKfh9fhsPifa"
      ... remaining Account name/value pairs ...
    }
  ]
}
</code></pre>

<h4>Search Tenant Accounts</h4>

<p>You may search for accounts by sending a <code>GET</code> request to your tenant&rsquo;s <code>accounts</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching accounts with your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<p>In addition to the the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a>, <a href="#sorting">sorting</a>, and <a href="#link-expansion">link expansion</a> query parameters to customize the paginated response.</p>

<h3><a id="tenant-groups"></a>Tenant Groups</h3>

<p>A <code>Tenant</code> has <a href="#groups">Groups</a> that represent the groups of your <code>Applications</code>.  Groups may be assigned to <code>Accounts</code> for access control or authorization.  Groups across applications and directories can be accessed from your <code>Tenant</code> to provide a tenant-wide view of your groups.</p>

<p><strong>Tenant Groups Collection Resource URI</strong></p>

<p>/v1/tenants/:tenantId/groups</p>

<h4>List Tenant Groups</h4>

<p>You can list your tenant&rsquo;s groups by sending a <code>GET</code> request your tenant&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of your tenant&rsquo;s  groups.</p>

<p><strong>Example request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/$TENANT_ID/groups"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW/groups"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/bckhcGMXQDujIXpbCDRb2Q"
      ... remaining Account name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/lIKeabOss8w9fJf0fJfb34"
      ... remaining Accounts name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Hfjks7kj9sfKfh9fhsPifa"
      ... remaining Account name/value pairs ...
    }
  ]
}
</code></pre>

<h4>Search Tenant Groups</h4>

<p>You may search for groups by sending a <code>GET</code> request to your tenant&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching groups with your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<p>In addition to the the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a>, <a href="#sorting">sorting</a>, and <a href="#link-expansion">link expansion</a> query parameters to customize the paginated response.</p>

<hr />

<p><a class="anchor" name="applications"></a></p>

<h2><a id="applications"></a>Applications</h2>

<p>An <code>Application</code> in Stormpath represents any real world piece of software that communicates with Stormpath to offload its user management and authentication needs.  The application can be anything that can make a REST API call &ndash; a web application that you are writing, a web server like Apache or Nginx, a Linux operating system, etc &ndash; basically anything that a user can login to.  A <a href="#tenants">tenant</a> administrator can register one or more applications with Stormpath.</p>

<p>You control who may login to an application by assigning (or &lsquo;mapping&rsquo;) one or more <code>Directories</code> or <code>Groups</code> (generically called <a href="#account-store-mappings">account stores</a>) to an application.  The <code>Accounts</code> in these associated directories or groups (again, <em>account stores</em>) collectively form the application&rsquo;s user base. These accounts are considered the application&rsquo;s users and they can login to the application.  Therefore, you can control user population that may login to an application by managing which <a href="#account-store-mappings">account stores</a> are assigned to the application.</p>

<p>Even the Stormpath Admin Console and API is represented as an <code>Application</code> (named Stormpath), so you can control who has administrative access to your Stormpath <a href="#tenants">tenant</a> by managing the Stormpath application&rsquo;s associated account stores.</p>

<p><a class="anchor" name="application"></a></p>

<h3><a id="application-resource"></a>Application Resource</h3>

<p>An individual <code>Application</code> resource may be accessed via its Resource URI:</p>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId
</code></pre>

<p><a class="anchor" name="application-attributes"></a>
<strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The application&rsquo;s fully qualified URL. </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-name"></a><code>name</code> </td>
<td align="left"> The name of the application.  Must be unique across all applications within a <a href="#tenants">tenant</a>. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt;= N &lt;= 255 characters. Unique within a tenant</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-description"></a><code>description</code> </td>
<td align="left"> A description of the application. For example, providing the application&rsquo;s homepage URL might be helpful. </td>
<td align="left"> String </td>
<td align="left"> 0 &lt;= N &lt;= 4000 chars</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-status"></a><code>status</code> </td>
<td align="left"> <code>enabled</code> applications allow accounts to login. <code>disabled</code> applications prevent accounts from logging in.  Newly created applications are <code>enabled</code> by default. </td>
<td align="left"> enum </td>
<td align="left"> <code>enabled</code>, <code>disabled</code></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-tenant"></a><code>tenant</code> </td>
<td align="left"> A link to the tenant that owns the application. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-passwordResetTokens"></a><code>passwordResetTokens</code> </td>
<td align="left"> A link to the application&rsquo;s password reset tokens collection, used in <a href="#application-password-reset">password reset workflows</a>. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-loginAttempts"></a><code>loginAttempts</code> </td>
<td align="left"> A link to to the application&rsquo;s login attempts collection.  When an account <a href="#workflow-login-attempt">attempts to login to an application</a>, the login attempt is submitted to this linked resource. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-accounts-collection"></a><code>accounts</code> </td>
<td align="left"> A link to all accounts that may login to the application.  This is an aggregate view of all accounts in the application&rsquo;s <a href="#account-store-mappings">assigned account stores</a>. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-groups-attrib"></a><code>groups</code> </td>
<td align="left"> A link to all groups that are accessible to the application for authorization (access control) needs.  This is an aggregate view of all groups in the application&rsquo;s <a href="#account-store-mappings">assigned account stores</a>. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-accountStoreMappings"></a><code>accountStoreMappings</code> </td>
<td align="left"> A link to the collection of all <a href="#account-store-mappings">account store mappings</a> that represent the application.  The accounts and groups within the mapped account stores are obtainable by the <code>accounts</code> and <code>groups</code> links respectively. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-defaultAccountStoreMapping"></a><code>defaultAccountStoreMapping</code> </td>
<td align="left"> A link to the account store mapping that reflects the <a href="#account-store-mapping-default-account-store">default account store</a> where the application will store newly created accounts.  (A POST to <code>/v1/applications/:applicationId/accounts</code> will result in storing the new account in the default account store). A <code>null</code> value disables the application from directly creating new accounts. </td>
<td align="left"> link </td>
<td align="left"> <code>null</code> or link</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="application-defaultGroupStoreMapping"></a><code>defaultGroupStoreMapping</code> </td>
<td align="left"> A link to the account store mapping that reflects the <a href="#account-store-mapping-default-group-store">default group store</a> where the application will store newly created groups.  (A POST to <code>/v1/applications/:applicationId/groups</code> will result in storing the new group in the default group store). A <code>null</code> value disables the application from directly creating new groups. </td>
<td align="left"> link </td>
<td align="left"> <code>null</code> or link</td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>For Applications, you can:</p>

<ul>
<li><a href="#application-url">Locate an application&rsquo;s REST URL</a></li>
<li><a href="#application-create">Create an application</a> (aka Register an Application with Stormpath)</li>
<li><a href="#application-retrieve">Retrieve an application</a></li>
<li><a href="#application-update">Update an application</a>

<ul>
<li><a href="#application-enable">Enable an application</a> to allow logins</li>
<li><a href="#application-disable">Disable an application</a> to prevent logins</li>
</ul>
</li>
<li><a href="#application-delete">Delete an application</a></li>
<li><a href="#applications-list">List applications</a></li>
<li><a href="#applications-search">Search applications</a></li>
<li><a href="#application-accounts">Work with application accounts</a></li>
<li><a href="#application-groups">Work with application groups</a></li>
<li><a href="#application-account-store-mappings">Work with application account store mappings</a></li>
</ul>


<p><a class="anchor" name="application-url"></a></p>

<h3><a id="locate-an-applications-rest-url"></a>Locate an Application&rsquo;s REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference an application using its REST URL or <code>href</code>.</p>

<p>In order to locate an application&rsquo;s <code>href</code>, you&rsquo;ll need to first <a href="#search">search</a> for the tenant for the specific application using some information that you have available.</p>

<p>For example, if you want to find the <code>href</code> for an application named &ldquo;My Application&rdquo;, you&rsquo;ll need to search the tenant for the &ldquo;My Application&rdquo; <code>application</code> resource:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/23mq7BPIxNgPUPZDwj04SZ/applications?name=My%20Application"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
    "href": "https://api.stormpath.com/v1/tenants/23mq7BPIxNgPUPZDwj04SZ/applications",
    "offset": 0,
    "limit": 25,
    "items": [
      {
        "href": "https://api.stormpath.com/v1/applications/3hFENJHLaH1Vy4GSbscrtv",
        "name": "My Application"
        /* remaining Application name/value pairs */
      }
    ]
}
</code></pre>

<p>If you know the name exactly, you can use an <a href="#search-attribute">attribute search</a> (e.g., <code>name=</code>) or, if you only know a small part, you can use a <a href="#search-filter">filter search</a> (e.g., <code>q=My</code>) to narrow the results.</p>

<p><a class="anchor" name="application-create"></a></p>

<h3><a id="create-an-application-aka-register-an-application-with-stormpath"></a>Create an Application (aka Register an Application with Stormpath)</h3>

<p>For an application to communicate with Stormpath, you must first register it with Stormpath.</p>

<p>You register an application with Stormpath by simply creating a new <code>application</code> resource.  This is performed by submitting an HTTP <code>POST</code> request to the <code>/v1/applications</code> endpoint.  This will create a new <code>Application</code> instance within the caller&rsquo;s tenant.</p>

<p>When you submit the <code>POST</code>, at least the <code>name</code> attribute must be specified, and it must be unique compared to all other applications in your tenant.  The <code>description</code> and <code>status</code> attribute are optional.</p>

<p><strong>Required Attribute</strong></p>

<ul>
<li><a href="#application-name">name</a> &ndash; must be unique compared to all other applications in your tenant.</li>
</ul>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#application-description">description</a></li>
<li><a href="#application-status">status</a> &ndash; if unspecified, the default is <code>enabled</code>.</li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications
Content-Type: application/json;charset=UTF-8

{
  "name": "Best application ever",
  "description": "Really. The best application ever.",
  "status": "enabled"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
  "name": "Best application ever",
  "description": "Really. The best application ever.",
  "status": "ENABLED",
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
  },
  "accounts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
  },
  "groups": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  },
  "passwordResetTokens" : {
    "href" : "http://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
  }
}
</code></pre>

<p>You may use the response&rsquo;s <code>Location</code> header or the top-level <code>href</code> attribute to further interact with your new <code>application</code> resource.</p>

<div class='docs-note'><p>By default, no accounts may login to a newly created application, and the new application cannot create accounts or groups immediately.  Applications must first be associated with one or more <a href="#account-store-mappings">account stores</a> to enable this behavior.</p>

<p>Account store association however is mostly used for more complex applications.  If you want to create an application quickly and enable this additional behavior immediately, use the <code>createDirectory</code> query parameter as discussed next.</p>
</div>


<p><a class="anchor" name="application-create-with-directory"></a></p>

<h4>Create an Application and Directory</h4>

<p>The above Create Application POST request assumes you will later assign <a href="#account-store-mappings">account stores</a> to the application so accounts may log in to the application.  This means that, by default, no one can login to a newly created application, nor can the application create new accounts or new groups directly.  For this additional functionality, one or more account stores must be associated with the application.</p>

<p>For many use cases, that is unnecessary work.  If you want to associate the Application with a new Directory automatically so you can start creating accounts and groups for the application immediately (without having to map other <a href="#account-store-mappings">account stores</a>, you can use the <code>createDirectory</code> query parameter.</p>

<div class='docs-note'><p>Automatically creating a directory when creating an application <em>does not</em> make that <code>Directory</code> private or restrict usage to only that <code>Application</code>. The created directory is no different than any other directory. The <code>createDirectory</code> query parameter exists as a convenience to reduce the number of steps you would have had to execute otherwise.</p>

<p>If you delete an application, you must manually delete any auto-created directory yourself.  There is no shortcut to delete an auto-created directory.  This is to ensure safety in case the directory might be used by other applications.</p>
</div>


<h5>createDirectory=true</h5>

<p>When sending the <code>POST</code> request, you can append a <code>createDirectory=true</code> query parameter name/value pair to the POST URL:</p>

<pre><code>POST https://api.stormpath.com/v1/applications?createDirectory=true
Content-Type: application/json;charset=UTF-8

{
    "name": "My new app"
}
</code></pre>

<p>This request will:</p>

<ol>
<li>Create the application.</li>
<li>Create a brand new Directory and automatically name the directory based on the application.  The generated name will reflect the new application&rsquo;s name as best as is possible, guaranteeing that it is unique compared to any of your existing directories.</li>
<li>Set the new Directory as the application&rsquo;s initial <a href="#account-store-mappings">account store</a>.</li>
<li>Enable the new Directory as the application&rsquo;s <a href="#application-defaultAccountStoreMapping">default account store</a>, ensuring any new accounts created directly by the application are stored in the new Directory.</li>
<li>Enable the new Directory as the application&rsquo;s <a href="#application-defaultGroupStoreMapping">default group store</a>, ensuring any new groups created directly by the application are stored in the new Directory.</li>
</ol>


<p>This allows you to create accounts and groups directly via the application&rsquo;s <code>/accounts</code> and <code>/groups</code> endpoints respectively immediately, without having to go through an account store mapping exercise.</p>

<h5>createDirectory=a+custom+name</h5>

<p>If you want to automatically create a Directory for your application, and you also want to manually specify the new Directory&rsquo;s name, instead of using a <code>true</code> value as the query parameter value, you can specify a String name instead:</p>

<pre><code>POST https://api.stormpath.com/v1/applications?createDirectory=My+App+Directory
Content-Type: application/json;charset=UTF-8

{
    "name": "My new app"
}
</code></pre>

<p>this request will:</p>

<ol>
<li>Create the application.</li>
<li>Create a brand new Directory and automatically set the Directory&rsquo;s name to be your specified text value (e.g. &lsquo;My App Directory&rsquo; in the example above). <strong>HOWEVER</strong>: If the directory name you choose is already in use by another of your existing directories, the request will fail.  You will either need to choose a different directory name or specify <code>true</code> and let Stormpath generate an unused unique name for you.</li>
<li>Set the new Directory as the application&rsquo;s initial <a href="#account-store-mappings">account store</a>.</li>
<li>Enable the new Directory as the application&rsquo;s <a href="#application-defaultAccountStoreMapping">default account store</a>, ensuring any new accounts created directly by the application are stored in the new Directory.</li>
<li>Enable the new Directory as the application&rsquo;s <a href="#application-defaultGroupStoreMapping">default group store</a>, ensuring any new groups created directly by the application are stored in the new Directory.</li>
</ol>


<p><a class="anchor" name="application-retrieve"></a></p>

<h3><a id="retrieve-an-application"></a>Retrieve an Application</h3>

<p>After you have created an application, you may retrieve its contents by sending a <code>GET</code> request to the application&rsquo;s URL returned in the <code>Location</code> header or <code>href</code> attribute.</p>

<p>If you don&rsquo;t have the application&rsquo;s URL, you can find it by <a href="/console/product-guide#!LocateAppURL">looking it up in the Stormpath Admin Console</a> or by <a href="#tenant-applications-search">searching your tenant&rsquo;s applications</a> for the application and then using its <code>href</code>.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
  "name": "Best application ever",
  "description": "Really. The best application ever.",
  "status": "ENABLED",
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
  },
  "accounts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
  },
  "groups": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  },
  "passwordResetTokens" : {
    "href" : "http://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
  }
}
</code></pre>

<p><a class="anchor" name="application-resources-expand"></a></p>

<h4>Expandable Resources</h4>

<p>When retrieving an application, you can also retrieve one or more of its linked resources by <a href="#links-expansion">expanding them in-line</a> using the <code>expand</code> query parameter.</p>

<p>The following <code>Application</code> attributes are expandable:</p>

<ul>
<li><code>tenant</code></li>
<li><code>accounts</code></li>
<li><code>groups</code></li>
</ul>


<p>Also, because <code>accounts</code> and <code>groups</code> are <a href="#collections">Collection Resources</a> themselves, you can additionally control <a href="#pagination">pagination</a> for either expanded collection.  For example:</p>

<pre><code>GET https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA?expand=tenant,accounts(offset:0,limit:50)
</code></pre>

<p>See the <a href="#links-expansion">Link Expansion</a> section for more information on expanding link attributes.</p>

<p><a class="anchor" name="application-update"></a></p>

<h3><a id="update-an-application"></a>Update an Application</h3>

<p>Submit an HTTP <code>POST</code> to an application&rsquo;s <code>href</code> when you want to change one or more specific application attributes. Unspecified attributes are not changed, but at least one attribute must be specified.</p>

<p><strong>Updatable Application Attributes</strong></p>

<ul>
<li><a href="#application-name">name</a></li>
<li><a href="#application-description">description</a></li>
<li><a href="#application-status">status</a></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
Content-Type: application/json;charset=UTF-8

{
  "description": "A new description."
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
  "name": "Best application ever",
  "description": "A new description.",
  "status": "enabled",
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
  },
  "accounts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
  },
  "groups": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  },
  "passwordResetTokens" : {
    "href" : "http://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
  }
}
</code></pre>

<p><a class="anchor" name="application-enable"></a></p>

<h4>Enable an Application</h4>

<p>Enabled applications allow associated accounts to login.  Disabled applications prevent logins.  When you create an application, it is <code>enabled</code> by default.</p>

<p>You can enable an application (and thereby allow associated accounts to login) by setting the <code>status</code> attribute to equal <code>ENABLED</code>.  For example:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
Content-Type: application/json;charset=UTF-8

{
  "status": "ENABLED"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
  "name": "Best application ever",
  "description": "A new description.",
  "status": "ENABLED",
  "tenant": {
    "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
  },
  "accounts": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
  },
  "groups": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  },
  "passwordResetTokens": {
    "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
  }
}
</code></pre>

<p><a class="anchor" name="application-disable"></a></p>

<h4>Disable an Application</h4>

<p>Disabled applications prevent associated accounts from logging in.  When you create an application, it is <code>enabled</code> by default.</p>

<p>If you want to prevent logins for an application &ndash; for example, maybe you are undergoing maintenance and don&rsquo;t want accounts to login during this time &ndash; you can disable the application.</p>

<p>You can disable an application (and thereby prevent associated accounts from logging in) by setting the <code>status</code> attribute to equal <code>DISABLED</code>.  For example:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
Content-Type: application/json;charset=UTF-8

{
  "status": "DISABLED"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
 Content-Type: application/json;charset=UTF-8;

 {
   "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA",
   "name": "Best application ever",
   "description": "A new description.",
   "status": "DISABLED",
   "tenant": {
     "href": "https://api.stormpath.com/v1/tenants/cJoiwcorTTmkDDBsf02AbA"
   },
   "accounts": {
     "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
   },
   "groups": {
     "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
   },
   "passwordResetTokens": {
     "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens"
   }
 }
</code></pre>

<p><a class="anchor" name="application-delete"></a></p>

<h3><a id="delete-an-application"></a>Delete an Application</h3>

<p>You can delete an application (&lsquo;unregister it&rsquo;) by sending an HTTP <code>DELETE</code> request to the application&rsquo;s <code>href</code> URL.</p>

<div class='docs-warning'><p>Deleting an application completely erases the application and any of its related data from Stormpath.</p>
</div>


<p>We recommend that you <a href="#application-disable">disable an application</a> instead of deleting it if you anticipate that you might use the application again or if you want to retain its data for historical reference.</p>

<p>If you wish to delete an application:</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<div class='docs-info'><p>The <code>Stormpath</code> console application cannot be deleted.</p>
</div>


<p><a class="anchor" name="applications-list"></a></p>

<h3><a id="list-applications"></a>List Applications</h3>

<p>You may list your tenant&rsquo;s applications as described in <a href="#tenant-applications-list">List Tenant Applications</a>.</p>

<p><a class="anchor" name="applications-search"></a></p>

<h3><a id="search-applications"></a>Search Applications</h3>

<p>You may search for applications as described in <a href="#tenant-applications-search">Search Tenant Applications</a>.</p>

<p><a class="anchor" name="application-accounts"></a></p>

<h3><a id="application-accounts"></a>Application Accounts</h3>

<p>An application&rsquo;s <code>accounts</code> collection is the collection of all accounts that are <em>accessible to</em> the application.</p>

<p>It might sound a little odd to phrase it that way (<em>accessible to</em>), but it makes sense when you realize that applications do not have <em>direct</em> accounts of their own.  Accounts are &lsquo;owned&rsquo; by <a href="#directories">directories</a> and instead <em>made available to</em> applications.</p>

<p>This means that an application&rsquo;s <code>accounts</code> collection is <em>virtual</em>.  This virtual collection is an aggregate &lsquo;view&rsquo; of all accounts that are:</p>

<ol>
<li>in any directory <a href="#account-store-mappings">assigned to the application</a></li>
<li>in any group directly <a href="#account-store-mappings">assigned to the application</a></li>
</ol>


<p>This is a powerful and convenient feature: as you add or remove account stores from an application to control its user population, you automatically &lsquo;bring in&rsquo; any of their accounts.  You can interact with the application&rsquo;s <code>accounts</code> collection, like <a href="#application-accounts-search">search for accounts</a> or <a href="#application-account-register">add new accounts</a>, like you would a normal collection.</p>

<div class='docs-info'><p>Most application developers do not need to be aware that an application&#8217;s <code>accounts</code> collection is virtual.  The most common case in Stormpath for simpler apps is to just <a href="#application-create-with-directory">create an application with its own directory</a> for its own needs.  Used this way, the application&#8217;s and the directory&#8217;s accounts (and groups) are the same.</p>

<p>But it is nice to know that you can customize the application&#8217;s account population with other directories or groups in the future if you need to do so.</p>
</div>


<p><strong>Application Accounts Collection Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/accounts
</code></pre>

<p>Applications additionally support the following account-specific functionality:</p>

<ul>
<li><a href="#application-account-register">Register A New Application Account</a>

<ul>
<li>and optionally specify your own <a href="#application-account-register-with-customData">account-specific custom data</a></li>
</ul>
</li>
<li><a href="#application-verify-email">Verify An Application Account&rsquo;s Email Address</a></li>
<li><a href="#application-account-authc">Log In (Authenticate) an Application Account</a></li>
<li><a href="#application-password-reset">Reset An Application Account&rsquo;s Password</a></li>
<li><a href="#application-accounts-list">List an Application&rsquo;s Accounts</a></li>
<li><a href="#application-accounts-search">Search an Application&rsquo;s Accounts</a></li>
</ul>


<p><a class="anchor" name="application-account-register"></a></p>

<h4>Register a New Application Account</h4>

<p>If your application wants to register a new account, you create a new <code>account</code> resource on the application&rsquo;s <code>accounts</code> endpoint.</p>

<p><code>POST</code> the <a href="#account-resource">account resource attributes</a> required and any additional ones you desire.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
         "username" : "jlpicard",
         "email" : "capt@enterprise.com",
         "givenName" : "Jean-Luc",
         "middleName" : "",
         "surname" : "Picard",
         "password" : "uGhd%a8Kl!"
         "status" : "ENABLED",
     }' \
 "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
</code></pre>

<p>The response will contain the newly saved resource:</p>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "fullName" : "Jean-Luc Picard",
  "givenName" : "Jean-Luc",
  "middleName" : "",
  "surname" : "Picard",
  "status" : "ENABLED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData"
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/1FaQ6kZxTL4DVJXWeXtUh7"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : null
}
</code></pre>

<p><strong>How does this work?</strong></p>

<p>As we <a href="#application-accounts">said previously</a>, an Application does not &lsquo;own&rsquo; accounts of its own &ndash; it has access to accounts in one or more directories or groups and the directories actually own the accounts.  So how are we able to create a new account based on only the application?</p>

<p>The <code>v1/applications/:applicationId/accounts</code> URI is a convenience: when you <code>POST</code> a new <code>account</code> resource, Stormpath will automatically route that creation request to a <a href="#application-defaultAccountStoreMapping">designated directory or group assigned to the Application</a>.  The account is then persisted in that directory or group and then made immediately available to the application.</p>

<p>Stormpath uses a generic term, <em>Account Store</em>, to generically refer to either a directory or a group since they are both containers for (store) accounts.</p>

<p>For most applications that have only a single assigned <em>account store</em> (again, a directory or group), the account is persisted in that account store immediately &ndash; the application developer does not even really need to know that Stormpath automates this.</p>

<p>However, applications that map more than one account store to define their account population have the option of specifying <em>which</em> of those mapped account stores should receive newly created accounts.  You can choose a <a href="#application-defaultAccountStoreMapping"><em>default</em> account store</a>.  If you do not choose one, the first one in the list of mapped account stores is the default location to store new accounts.  We&rsquo;ll talk about setting the default account store and managing an application&rsquo;s assigned account stores later in <a href="#application-account-store-mappings">Application Account Store Mappings</a>.</p>

<p><a class="anchor" name="application-account-register-with-customData"></a></p>

<h5>Register a New Application Account with your own Custom Data</h5>

<p>When you create an application account, in addition to Stormpath&rsquo;s account attributes, you may also specify <a href="#custom-data">your own custom data</a> by including a <code>customData</code> JSON object:</p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
             "username" : "jlpicard",
             "email" : "capt@enterprise.com",
             "givenName" : "Jean-Luc",
             "middleName" : "",
             "surname" : "Picard",
             "password" : "uGhd%a8Kl!"
             "status" : "ENABLED",
             "customData": {
                 "rank": "Captain",
                 "birthDate": "2305-07-13",
                 "birthPlace": "La Barre, France",
                 "favoriteDrink": "Earl Grey tea"
             }
         }' \
     "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
</code></pre>

<p>Once created, you can further modify the custom data &ndash; delete it, add and remove attributes, etc as necessary.  See the <a href="#custom-data">custom data</a> section for more information and customData requirements/restrictions.</p>

<p><a class="anchor" name="application-welcome-email"></a></p>

<h5>Send a Welcome Email</h5>

<p>Stormpath makes it easy to send a welcome email to the person associated with a newly created account.</p>

<p>When you create a new <code>account</code> resource, it is stored in a Directory. If the account is created in a directory with <a href="#application-account-register">Account Registration</a> enabled, Stormpath will automatically send the welcome email to the account&rsquo;s email address on your behalf.</p>

<p>The email will be shown as coming from your email address, and you don&rsquo;t have to worry about email servers or how to send the email yourself.  You can customize the email template to say whatever you like.</p>

<p>By association then, if you add an account to your application programmatically or through the Stormpath Admin Console, and that account is stored in a directory with this feature enabled, Stormpath will send a welcome email to that account email address.</p>

<p>This workflow is disabled by default on Directories, but you can enable it easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<p><a class="anchor" name="application-verify-email"></a></p>

<h4>Verify An Account&rsquo;s Email Address</h4>

<p>This workflow allows you to send a welcome email to a newly registered account and optionally verify that they own the email addressed used during registration.</p>

<p>The email verification workflow involves changes to an account at an application level, and as such, this workflow relies on the <code>account</code> resource as a starting point. For more information on working with these workflows via REST after they have already been configured, refer to the <a href="#account-verify-email">Working With Accounts</a> section of this guide.
This workflow is disabled by default for accounts, but you can enable it easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<div class='docs-note'><p>Workflows are only available on cloud directories and only configurable using the Stormpath Admin Console. They are not currently configurable via the REST API. Also, the Stormpath Administrator directory&#8217;s automated workflows cannot be altered.</p>
</div>


<p><a class="anchor" name="application-resend-verify-email"></a></p>

<h4>Resending the Verification Email</h4>

<p>In some cases, it may be needed to resend the verification email.  This could be because the user accidentally deleted the verification email or it was undeliverable at a certain time.  An <code>Application</code> has the ability to resend verification emails based on the account&rsquo;s username or email.</p>

<p><strong>Application Resend Email Verification Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/verificationEmails
</code></pre>

<p><strong>Resend Email Verification Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>login</code> </td>
<td align="left"> Either the email or username for the account that needs an email verification resent </td>
<td align="left"> String </td>
<td align="left"> A email or user name for an account</td>
</tr>
<tr>
<td align="left"><code>accountStore.href</code></td>
<td align="left"> An optional link to the application&rsquo;s accountStore (directory or group) that you are certain contains the account attempting to resend the verification email to. </td>
<td align="left"> link </td>
<td align="left"> &mdash;</td>
</tr>
</tbody>
</table>


<p><strong>Execute Email Verification Resend</strong></p>

<p>An HTTP <code>POST</code> to the <code>Resend Email Verification Resource URI</code> will trigger Stormpath to resend the verification email.  When <code>POST</code>ing to this URI, you can specify either the username or email for the account and optionally the account store to target a specific location for the account:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
 -H "Accept: application/json" \
 -H "Content-Type: application/json" \
 -d '{
       "login": "email@foo.com"
     }' \
 "https://api.stormpath.com/v1/applications/$YOUR_APPLICATION_ID/verificationEmails"
</code></pre>

<p>If the verification email is queued to be sent, a <code>202 ACCEPTED</code> response is returned:</p>

<p><strong>Example Login Attempt Success Response</strong></p>

<pre><code>  HTTP/1.1 202 Accepted
</code></pre>

<p><a class="anchor" name="application-account-authc"></a></p>

<h4>Log In (Authenticate) an Account</h4>

<p>You may authenticate an account by <code>POST</code>ing a <code>loginAttempt</code> resource to the application&rsquo;s login attempts endpoint:</p>

<p><a class="anchor" name="application-log-in-attempt-uri"></a>
<strong>Application Login Attempt Collection Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/loginAttempts
</code></pre>

<p><a class="anchor" name="application-log-in-attempt-attributes"></a>
<strong>Login Attempt Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a class="anchor" name="login-attempt-type"></a><code>type</code> </td>
<td align="left"> The type of the login attempt. The only currently supported type is <code>basic</code>. Additional types will likely be supported in the future. </td>
<td align="left"> Enum </td>
<td align="left"> basic</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="login-attempt-value"></a><code>value</code> </td>
<td align="left"> The Base64 encoded username:plaintextPassword pair. For example, for username <code>jsmith</code> or email <code>jsmith@email.com</code> and plaintext password <code>mySecretPassword</code> this <code>value</code> attribute would be set to the following computed result: <code>base64_encode("jsmith:mySecretPassword");</code> </p> The <code>base64_encode</code> method call is only an example. You will need to use the Base64 encoding method is available to you in your chosen programming language and/or software frameworks. </td>
<td align="left"> String </td>
<td align="left"> Base64 encoded String</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="login-attempt-accountStore"></a><code>accountStore</code> </td>
<td align="left"> An optional link to the application&rsquo;s accountStore (directory or group) that you are certain contains the account attempting to login.  <p>Specifying this attribute can speed up logins if you know exactly which of the application&rsquo;s assigned account stores contains the account: Stormpath will not have to <a href="#workflow-login-attempt">iterate over the assigned account stores</a> to find the account to authenticate it.  This can speed up logins significantly if you have many account stores (> 15) assigned to the application.</p> This is an optional attribute. </td>
<td align="left"> link </td>
<td align="left"> &mdash;</td>
</tr>
</tbody>
</table>


<p><strong>Execute Account Login Attempt (HTTP POST)</strong></p>

<p>An HTTP <code>POST</code> authenticates an associated application account. Only HTTP <code>POST</code> is supported.</p>

<p>The <code>POST</code> body must be a JSON object with the Login Attempt Resource Attributes (<code>type</code> and <code>value</code>).</p>

<p>The <code>type</code> attribute must equal <code>basic</code>.  You compute the <code>value</code> using the following (pseudo code) logic:</p>

<pre><code>String concatenated = username_or_email + ':' + plain_text_password
byte[] bytes = concatenated.to_byte_array()
String value = base64_encode( bytes )
</code></pre>

<p>For example, if the username is <code>jsmith</code> and the password is <code>changeme</code>, you can compute the <code>value</code> using <a href="http://www.openssl.org/">OpenSSL</a>:</p>

<pre><code>$ echo -n "jsmith:changeme" | openssl enc -base64
anNtaXRoOmNoYW5nZW1l
</code></pre>

<p>Place the result in the request body as the <code>value</code> JSON attribute, for example:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
 -H "Accept: application/json" \
 -H "Content-Type: application/json" \
 -d '{
       "type": "basic",
       "value": "anNtaXRoOmNoYW5nZW1l"
     }' \
 "https://api.stormpath.com/v1/applications/$YOUR_APPLICATION_ID/loginAttempts"
</code></pre>

<p>If the login attempt is successful, a <code>200 OK</code> response is returned with a <a href="#links">link</a> to the successfully authenticated account:</p>

<p><strong>Example Login Attempt Success Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "account": {
    "href" : "https://api.stormpath.com/v1/accounts/5BedLIvyfLjdKKEEXAMPLE"
  }
}
</code></pre>

<p>If the login attempt fails, a <code>400 Bad Request</code> is returned with an <a href="#errors">error payload</a> explaining why the attempt failed:</p>

<p><strong>Example Login Attempt Failure Response</strong></p>

<pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8;

{
  "status": 400,
  "code": 400,
  "message": "Invalid username or password.",
  "developerMessage": "Invalid username or password.",
  "moreInfo": "mailto:support@stormpath.com"
}
</code></pre>

<p>If you desire to target a specific accountStore, then include the reference in the request.  For example:</p>

<p><strong>Example Request with AccountStore</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
 -H "Accept: application/json" \
 -H "Content-Type: application/json" \
 -d '{
       "type": "basic",
       "value": "anNtaXRoOmNoYW5nZW1l",
       "accountStore": {
             "href": "https://api.stormpath.com/v1/groups/$YOUR_GROUP_ID"
       }
     }' \
 "https://api.stormpath.com/v1/applications/$YOUR_APPLICATION_ID/loginAttempts"
</code></pre>

<p>If the login attempt is successful, a <code>200 OK</code> response is returned with a <a href="#links">link</a> to the successfully authenticated account:</p>

<p><strong>Example Login Attempt with AccountStore Success Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "account": {
    "href" : "https://api.stormpath.com/v1/accounts/5BedLIvyfLjdKKEEXAMPLE"
  }
}
</code></pre>

<p>If the login attempt fails, a <code>400 Bad Request</code> is returned with an <a href="#errors">error payload</a> explaining why the attempt failed:</p>

<p><strong>Example Login Attempt with AccountStore Failure Response</strong></p>

<pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8;

{
  "status" : 400,
  "code" : 5114,
  "message" : "Oops! We encountered an unexpected error.  Please contact support and explain what you were doing at the time this error occurred.",
  "developerMessage" : "The specified application account store reference is invalid: the specified account store is not one of the application's assigned account stores.  Targeted authentication attempts must target one of the application's existing assigned account stores.",
  "moreInfo" : "https://www.stormpath.com/docs/errors/5114"
}
</code></pre>

<p>If you want the actual account object returned from a successful authentication attempt, then you can <a href="#links-expansion">expand the account in-line</a> using the <code>expand</code> query parameter.  For example:</p>

<p><strong>Example Request with Account Expansion</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
 -H "Accept: application/json" \
 -H "Content-Type: application/json" \
 -d '{
       "type": "basic",
       "value": "anNtaXRoOmNoYW5nZW1l"
     }' \
 "https://api.stormpath.com/v1/applications/$YOUR_APPLICATION_ID/loginAttempts?expand=account"
</code></pre>

<p>If the login attempt is successful, a <code>200 OK</code> response is returned with the successfully authenticated account:</p>

<p><strong>Example Response with Account Expansion</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jsmith",
  "email" : "jsmith@mailinator.com",
  "fullName" : "John Smith",
  "givenName" : "John",
  "middleName" : "",
  "surname" : "Smith",
  "status" : "ENABLED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData"
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/1FaQ6kZxTL4DVJXWeXtUh7"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : null
}
</code></pre>

<p><a class="anchor" name="application-password-reset"></a></p>

<h4>Reset An Account&rsquo;s Password</h4>

<p>Stormpath has a comprehensive mechanism for secure password reset, as well.</p>

<h5>Understanding The Password Reset Workflow</h5>

<p>In Stormpath, the model used for password reset is based the common standard of sending an email to the address associated with the account. This email contains a verification link with a limited-life token. The end-user clicks this link and is redirected to either your own or a Strompath-owned password reset page where he or she can enter a new password.</p>

<div class='docs-note'><p>At no point is the user shown, or does Stormpath have access to, the original password once it has been hashed during account creation. The only ways to change an account password through Stormpath once an account has been created are to allow the user to update it (without seeing the original value) after being authenticated or to use the password reset workflow.</p>
</div>


<p><a class="anchor" name="password-reset-base-URL"></a></p>

<h6>The Password Reset Base URL</h6>

<p>It is expected that the directory&rsquo;s Password Reset workflow&rsquo;s <code>Password Reset Base URL</code> has been set to a URL that will be processed by your own application web server. This URL should be free of any query parameters, as the Stormpath back-end will append on to the URL a parameter used to verify the email. If this URL is not set, a default Stormpath-branded page will appear which allows the user to complete the workflow.</p>

<div class='docs-note'><p>The <code>Account Verification Base URL</code> defaults to a Stormpath API Sever URL which, while it is functional, is a Stormpath API server web page.  Because it will likely confuse your application end-users if they see a Stormpath web page, we strongly recommended that you specify a URL that points to your web application. Moreover, when specifying the Base URL, ensure it is a Base URL without query parameters</p>
</div>


<p><a class="anchor" name="applications-account-password-reset"></a></p>

<h5>Trigger The Password Reset Email (Create A Token)</h5>

<p>In order to reset an account&rsquo;s password, you&rsquo;ll need to create a <code>passwordResetToken</code>. In order to generate these tokens, you must retrieve an email address from the user and pass it along with the request.</p>

<p>Generating a <code>passwordResetToken</code> will inform Stormpath that you wish to initiate a password reset for a particular account. In addition, creating a new password reset token will automatically send a password reset email to the provided email address if and only if that address corresponds with an account listed in the application&rsquo;s <a href="#account-store-mappings">account stores</a>.</p>

<p>The application password reset tokens endpoint supports the password reset workflow for an account in the application&rsquo;s assigned <a href="#account-store-mappings">account stores</a>.</p>

<p><strong>Password Reset Tokens Collection Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/passwordResetTokens
</code></pre>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a class="anchor" name="password-reset-url"></a><code>href</code> </td>
<td align="left"> Fully qualified URL of the password reset token resource. </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="password-reset-email"></a><code>email</code> </td>
<td align="left"> Email address of the account for which the password reset will occur. </td>
<td align="left"> String </td>
<td align="left"> Valid email address. Required.</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="password-reset-acount"></a><code>account</code> </td>
<td align="left"> A link to the account for which the password reset will occur. </td>
<td align="left"> Link </td>
<td align="left"> Cannot set in a request. Returned in a response only.</td>
</tr>
<tr>
<td align="left"><code>accountStore.href</code> </td>
<td align="left"> An optional link to the application&rsquo;s <code>Account Store</code> that you are certain contains the account attempting for the password reset </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>The application password reset tokens endpoint supports the password reset workflow for an account in the application assigned <a href="#account-store-mappings">account stores</a>.</p>

<p>A successful HTTP <code>POST</code> sends a password reset email to the first discovered account associated with the corresponding application. The email recipient can then click a password reset URL in the email to reset their password in a web form.</p>

<p>The <code>POST</code> body must be a JSON object with a single email attribute:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens
Content-Type: application/json;charset=UTF-8

{
  "email": "john.smith@stormpath.com"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens/j6HqguWPSBSXM2xmcOUShw"
  "email" : "john.smith@stormpath.com"
  "account" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb"
  }
}
</code></pre>

<p>A <code>200 OK</code> response indicates that a password reset email will be sent as soon as possible to the email specified.</p>

<p>If the password reset token creation fails, a <code>400 Bad Request</code> is returned with an <a href="#errors">error payload</a> explaining why the attempt failed:</p>

<p><strong>Example Password Reset Token Creation Failure Response</strong></p>

<pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8;

{
  status: 400,
  code: 2016,
  message: "The email property value 'dontexist@stormpath.com' does not match a known resource.",
  developerMessage: "The email property value 'dontexist@stormpath.com' does not match a known resource.",
  moreInfo: "http://docs.stormpath.com/errors/2016"
}
</code></pre>

<p>At this point, an email will be built using the <a href="#password-reset-base-URL">password reset base URL</a> specified in the Stormpath Admin Console.</p>

<p>In a real-world implementation, you must build an end-point in your application that is designed to accept a request with the query string parameter &ldquo;sptoken&rdquo;, which is the token value generated for the user. This token is then used to verify the reset request before updating the account accordingly.</p>

<p><a class="anchor" name="password-reset-token-retrieve"></a></p>

<h5>Validate A Password Reset Request (Validate A Token)</h5>

<p>Once you&rsquo;ve successfully generated a token for a password request, you&rsquo;ll need to consume it to allow the user to change his or her password. To do this, Stormpath sends an email (that you can customize) to the user with a link and a verification token in the format that follows:</p>

<pre><code>http://yoursite.com/path/to/reset/page?sptoken=$TOKEN
</code></pre>

<p>Once the user clicks this browser, your controller should retrieve the token from the query string and check it against the Stormpath API.</p>

<p>Retrieving a token resource successfully using an HTTP <code>GET</code> indicates that the token is valid. Thus, to validate a token, you call to the <code>passwordResetTokens</code> end point and specify the token captured from the query string as the specific resource to request:</p>

<p><strong>Example GET Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens/j6HqguWPSBSXM2xmcOUShw
</code></pre>

<p><strong>Example Success Response (if token is valid)</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens/j6HqguWPSBSXM2xmcOUShw",
  "email": "john.smith@stormpath.com",
  "account": {
      "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb"
  }
}
</code></pre>

<p>If the password reset token is invalid &ndash; it never existed or has expired &ndash; a <code>404 Not Found</code> response is returned.</p>

<p><strong>Example Error Response</strong></p>

<pre><code> HTTP/1.1 404 Not Found
 Content-Type: application/json;charset=UTF-8;

   {
     "status": 404,
     "code": 404,
     "message": "The requested resource does not exist.",
     "developerMessage": "The requested resource does not exist.",
     "moreInfo": "mailto:support@stormpath.com"
  }
</code></pre>

<p>After a successfully <code>GET</code> with the query string token, you can return a page to the end user to collect the password to update for the account.  Once you have the password, you can update it by a <code>POST</code> to the password reset token&rsquo;s endpoint.  This is the same endpoint that you used to validate the token above.</p>

<p><strong> Example POST Request </strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/passwordResetTokens/j6HqguWPSBSXM2xmcOUShw

{
  "password": "$PASSWORD_FROM_USER"
}
</code></pre>

<p><strong> Example Success Response</strong></p>

<pre><code>HTTP/1.1 200 OK

{
    "account": {
        "href": "https://api.stormpath.com/v1/accounts/5F63i6mzwRsyymEsfUl7ql"
    }
}
</code></pre>

<p>On success, the response will include a link to the account that the password was reset on.  This call on success will send the password change confirmation email that was configured in the Administrator Console to the email account associated with the account.</p>

<p><a class="anchor" name="application-accounts-list"></a></p>

<h4>List Application Accounts</h4>

<p>You can list your application&rsquo;s accounts by sending a <code>GET</code> request to your application&rsquo;s <code>accounts</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of application accounts.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/$APPLICATION_ID/accounts"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/applications/cJoiwcorTTmkDDBsf02AbA/accounts",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/accounts/WpM9nyZ2TbaEzfbRvLk9KA"
      ... remaining Account name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/accounts/aLlyOUrBAse34js9hjiH9j"
      ... remaining Account name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/accounts/Xhf0a9HLA02djsdP90dsQ2"
      ... remaining Account name/value pairs ...
    },
  ]
}
</code></pre>

<p><a class="anchor" name="application-accounts-search"></a></p>

<h4>Search Application Accounts</h4>

<p>You may search for directories by sending a <code>GET</code> request to your application&rsquo;s <code>accounts</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching directories with your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Account Attributes</h5>

<p>The following <a href="#account-resource">account attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>givenName</code></li>
<li><code>middleName</code></li>
<li><code>surname</code></li>
<li><code>username</code></li>
<li><code>email</code></li>
</ul>


<p>In addition to the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/$APPLICATION_ID/accounts?q=foo&amp;orderBy=surname&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<h4>More Account Functionality</h4>

<p>Account CRUD and other behavior that is not application-specific is covered in the main <a href="#accounts">Accounts section</a>.</p>

<p><a class="anchor" name="application-groups"></a></p>

<h3><a id="application-groups"></a>Application Groups</h3>

<p>As we&rsquo;ve seen with <a href="#application-accounts">application accounts</a>, applications themselves also do not have <em>direct</em> groups of their own.  Like accounts, groups are &lsquo;owned&rsquo; by <a href="#directories">directories</a> and instead <em>made available to</em> applications.</p>

<p>This means an application&rsquo;s collection of groups is <em>virtual</em>.  This virtual collection is an aggregate &lsquo;view&rsquo; of all groups that are:</p>

<ol>
<li>directly assigned to the application as an <a href="#account-store-mappings">account store</a></li>
<li>in a directory that is assigned to the application as an <a href="#account-store-mappings">account store</a></li>
</ol>


<p>This is a powerful and convenient feature: as you add or remove account stores from an application to control its user population, you automatically &lsquo;bring in&rsquo; any groups that may be assigned to your user accounts.  You can interact with this collection, like <a href="#application-groups-search">search it</a> or <a href="#application-group-register">add groups to it</a>, like you would a normal group collection.</p>

<p>You can then reference these groups in the application&rsquo;s source code to check group membership and perform Role Based Access Control (RBAC).  For example, you might have an &ldquo;Admin&rdquo; group and a &ldquo;User&rdquo; group which would enable very different functionality in your application when a user account is associated with one group or the other.</p>

<div class='docs-info'><p>Most application developers do not need to be aware that an application&#8217;s <code>groups</code> collection is virtual.  The most common case in Stormpath for simpler apps is to just <a href="#application-create-with-directory">create an application with its own directory</a> for its own needs.  Used this way, the application&#8217;s and the directory&#8217;s accounts and groups are the same.</p>

<p>But it is nice to know that you can customize the application&#8217;s account population with other directories or groups in the future if you need to do so.</p>
</div>


<p><strong>Application Groups Collection Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/groups
</code></pre>

<p>Applications additionally support the following group-specific functionality:</p>

<ul>
<li><a href="#application-groups-create">Create A New Application Group</a></li>
<li><a href="#application-groups-list">List an Application&rsquo;s Groups</a></li>
<li><a href="#application-groups-search">Search an Application&rsquo;s Groups</a></li>
</ul>


<p><a class="anchor" name="application-groups-create"></a></p>

<h4>Create a New Application Group</h4>

<p>If your application wants to create a new group, POST the <a href="#group">group resource attributes</a> application’s <code>groups</code> endpoint.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
       "name": "Jedi High Council"
       "description": "Elected leaders of the Jedi Order."
       "status": "ENABLED"
     }' \
  "https://api.stormpath.com/v1/applications/bckhcGMXQDujIXpbCDRb2Q/groups"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ",
  "name" : "Jedi High Council",
  "description" : "Elected leaders of the Jedi Order.",
  "status" : "ENABLED",
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  },
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
  }
}
</code></pre>

<p><strong>How does this work?</strong></p>

<p>As we <a href="#application-groups">mentioned above</a>, an Application does not &lsquo;own&rsquo; groups of its own &ndash; it has access to groups directly (or indirectly) assigned to it.  So how are we able to create a new group based on only the application?</p>

<p>The <code>v1/applications/:applicationId/groups</code> URI is a convenience: when you <code>POST</code> a new <code>group</code> resource, Stormpath will automatically route that creation request to a <a href="#application-defaultGroupStoreMapping">designated directory assigned to the Application</a>.  The group is then persisted in that directory and then made immediately available to the application.</p>

<p>For most applications that have only a single assigned account store, the group is persisted in that account store immediately &ndash; the application developer does not even really need to know that Stormpath automates this.</p>

<p>However, applications that are assigned more than one account store have the option of specifying <em>which</em> of those mapped account stores should receive newly created groups.  You can choose a <a href="#application-defaultGroupStoreMapping"><em>default</em> group store</a>.  If you do not choose one, the first one in the list of mapped account stores is the default location to store newly created groups.  We&rsquo;ll talk about setting the default group store and managing an application&rsquo;s assigned account stores later in <a href="#application-account-store-mappings">Application Account Store Mappings</a>.</p>

<p><a class="anchor" name="application-groups-create-with-customData"></a></p>

<h5>Create a New Application Group with your own Custom Data</h5>

<p>When you create an application group, in addition to Stormpath&rsquo;s group attributes, you may also specify <a href="#custom-data">your own custom data</a> by including a <code>customData</code> JSON object:</p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
             "name" : "Jedi High Council",
             "description": "Elected leaders of the Jedi Order",
             "status": "ENABLED",
             "customData": {
                 "Headquarters": "High Council Chamber, High Council Tower, Jedi Temple, Coruscant",
                 "Affiliation": "Jedi Order",
             }
         }' \
     "https://api.stormpath.com/v1/applications/bckhcGMXQDujIXpbCDRb2Q/groups"
</code></pre>

<p>Once created, you can further modify the custom data &ndash; delete it, add and remove attributes, etc as necessary.  See the <a href="#custom-data">custom data</a> section for more information and customData requirements/restrictions.</p>

<p><a class="anchor" name="application-groups-list"></a></p>

<h4>List Application Groups</h4>

<p>You can list your application&rsquo;s groups by sending a <code>GET</code> request to your application&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of application groups.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/$APPLICATION_ID/groups"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/applications/cJoiwcorTTmkDDBsf02AbA/groups",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/WpM9nyZ2TbaEzfbRvLk9KA"
      ... remaining Group name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/aLlyOUrBAse34js9hjiH9j"
      ... remaining Group name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Xhf0a9HLA02djsdP90dsQ2"
      ... remaining Group name/value pairs ...
    },
  ]
}
</code></pre>

<p><a class="anchor" name="application-groups-search"></a></p>

<h4>Search Application Groups</h4>

<p>You may search for groups by sending a <code>GET</code> request to your application&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching groups within your application will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Group Attributes</h5>

<p>The following <a href="#account-resource">account attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>name</code></li>
<li><code>description</code></li>
</ul>


<p>In addition to the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/$APPLICATION_ID/groups?q=foo&amp;orderBy=name&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<h4>More Group Functionality</h4>

<p>Group CRUD and other behavior that is not application-specific is covered in the main <a href="#groups">Groups section</a>.</p>

<p><a class="anchor" name="application-account-store-mappings"></a></p>

<h3><a id="application-account-store-mappings"></a>Application Account Store Mappings</h3>

<p>Stormpath uses the term <em>Account Store</em> to generically refer to either a <a href="#groups">group</a> or a <a href="#directories">directory</a>, since they both contain (store) accounts.</p>

<p>An application&rsquo;s <code>accountStoreMappings</code> collection, then, reflects all <a href="#groups">groups</a> and <a href="#directories">directories</a> that are assigned to that application for the purpose of providing accounts that may login to the application.  This is a powerful feature in Stormpath that allows you to control which account populations may login to an application.</p>

<p>However, many applications do not need this feature.  The most common use case in Stormpath is to create an application and a single directory solely for the purpose of that application&rsquo;s needs.  This is a valid approach and a good idea when starting with Stormpath.  However, rest assured that you have the flexibility to control your account populations in convenient ways as you expand to use Stormpath for any of your other applications.</p>

<p>You define and modify an application&rsquo;s account store mappings by creating, modifying or deleting <a href="#account-store-mappings">Account Store Mapping</a> resources.</p>

<p><strong>Application Account Store Mappings Collection Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/accountStoreMappings
</code></pre>

<p><a class="anchor" name="application-account-store-mappings-list"></a></p>

<h4>List Application Account Store Mappings</h4>

<p>You can list an application&rsquo;s assigned account stores by sending a <code>GET</code> request to the application&rsquo;s <code>accountStoreMappings</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of application account store mappings.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/$APPLICATION_ID/accountStoreMappings"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/applications/5D26Bl8lHTct1FDCHrltc3/accountStoreMappings",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/accountStoreMappings/XpM9nyZ2TbaEzfbRvLk9KA"
      ... remaining Account Store Mapping name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/accountStoreMappings/aLlyOUrBAse34js9hjiH9j"
      ... remaining Account Store Mapping name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/accountStoreMappings/Xhf0a9HLA02djsdP90dsQ2"
      ... remaining Account Store Mapping name/value pairs ...
    },
  ]
}
</code></pre>

<hr />

<p><a class="anchor" name="account-store-mappings"></a></p>

<h2><a id="account-store-mappings"></a>Account Store Mappings</h2>

<p><em>Account Store</em> is a generic term for either a <a href="#directories">Directory</a> or a <a href="#groups">Group</a>.  Directories and Groups are both are considered &ldquo;account stores&rdquo; because they both contain, or &lsquo;store&rsquo;, <code>Accounts</code>. An <em>Account Store Mapping</em>, then, represents an Account Store mapped (assigned) to an <code>Application</code>.</p>

<p>In Stormpath, you control who may login to an application by associating (or &lsquo;mapping&rsquo;) one or more account
stores to an application.  All of the accounts across all of an application&rsquo;s assigned account stores form the application&rsquo;s
effective <em>user base</em>; those accounts may login to the application.  If no account stores are assigned to an application, no accounts will be able to login to the application.</p>

<p>You control which account stores are assigned (mapped) to an application, and the order in which they are consulted during a login attempt, by manipulating an application&rsquo;s <code>AccountStoreMapping</code> resources.</p>

<p><a class="anchor" name="workflow-login-attempt"></a>
<strong>How Login Attempts Work</strong></p>

<p>When an account tries to login to your application, you submit a request to your application&rsquo;s <code>/loginAttempts</code> endpoint.  Stormpath then consults the application&rsquo;s assigned account stores <em>in the order that they are assigned to the application</em>.  When a matching account is discovered in a mapped account store, it is used to verify the authentication attempt and all subsequent account stores are ignored.  In other words, accounts are matched for application login based on a &lsquo;first match wins&rsquo; policy.</p>

<p>Let&rsquo;s look at an example to illustrate this behavior.  Assume that two account stores, a &lsquo;Customers&rsquo; directory and an &lsquo;Employees&rsquo; directory have been assigned (mapped) to a &lsquo;Foo&rsquo; application, in that order.</p>

<p>The following flow chart shows what happens when an account attempts to login to the Foo application:</p>

<p><img src="/images/docs/LoginAttemptFlow.png" alt="Account Stores Diagram" title="Account Stores Diagram" width="650" height="500"></p>

<p>As you can see, Stormpath tries to find the account in the &lsquo;Customers&rsquo; directory first because it has a higher <em>priority</em> than the &lsquo;Employees&rsquo; directory.  If not found, the &lsquo;Employees&rsquo; directory is tried next as it has a lower priority.</p>

<p>You can assign multiple account stores to an application, but only one is required to enable login for an application.  Assigning multiple account stores (directories or groups) to an application, as well as configuring their priority, allows you precise control over the account populations that may login to your various applications.</p>

<h3><a id="account-store-mapping-resource"></a>Account Store Mapping Resource</h3>

<p>An individual <code>accountStoreMapping</code> resource may be accessed via its Resource URI:</p>

<p><a class="anchor" name="account-store-mapping-url"></a>
<strong>Resource URI</strong></p>

<pre><code>/v1/accountStoreMappings/:accountStoreMappingId
</code></pre>

<p><a class="anchor" name="account-store-mapping-resource-attributes"></a>
<strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The account store mapping resource&rsquo;s fully qualified location URI. </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-store-application"></a><code>application</code> </td>
<td align="left"> A link to the mapping&rsquo;s Application. Required. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-store-accountStore"></a><code>accountStore</code> </td>
<td align="left"> A link to the mapping&rsquo;s account store (either a Group or Directory) containing accounts that may login to the <code>application</code>.  Required. </td>
<td align="left"> link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="list-index"></a><code>listIndex</code> </td>
<td align="left"> The order (priority) when the associated <code>accountStore</code> will be consulted by the <code>application</code> during an authentication attempt.  This is a zero-based index; an account store at <code>listIndex</code> of <code>0</code> will be consulted first (has the highest priority), followed the account store at <code>listIndex</code> <code>1</code> (next highest priority), etc.  Setting a negative value will default the value to <code>0</code>, placing it first in the list.  A <code>listIndex</code> of larger than the current list size will place the mapping at the end of the list and then default the value to <code>(list size - 1)</code>. </td>
<td align="left"> Integer </td>
<td align="left"> 0 &lt;= N &lt; list size</td>
</tr>
<tr>
<td align="left"><a id="account-store-mapping-resource-is-default-account-store"></a><code>isDefaultAccountStore</code> </td>
<td align="left"> A <code>true</code> value indicates that new accounts <a href="#application-account-register">created by the application</a> will be automatically saved to the mapping&rsquo;s <code>accountStore</code>. A <code>false</code> value indicates that new accounts created by the application will not be saved to the <code>accountStore</code>. </td>
<td align="left"> boolean </td>
<td align="left"> <code>true</code>,<code>false</code></td>
</tr>
<tr>
<td align="left"><a id="account-store-mapping-resource-is-default-group-store"></a><code>isDefaultGroupStore</code> </td>
<td align="left"> A <code>true</code> value indicates that new groups created by the <code>application</code> will be automatically saved to the mapping&rsquo;s <code>accountStore</code>. A <code>false</code> value indicates that new groups created by the application will not be saved to the <code>accountStore</code>. <strong>This may only be set to <code>true</code> if the <code>accountStore</code> is a Directory.  Stormpath does not currently support Groups storing other Groups.</strong> </td>
<td align="left"> boolean </td>
<td align="left"> <code>true</code>,<code>false</code></td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>For Account Store Mappings, you may:</p>

<ul>
<li><a href="#account-store-mapping-url">Locate an account store mapping&rsquo;s REST URL</a></li>
<li><a href="#account-store-mapping-create">Create an account store mapping</a></li>
<li><a href="#account-store-mapping-retrieve">Retrieve an account store mapping</a></li>
<li><a href="#account-store-mapping-update">Update an account store mapping</a>

<ul>
<li><a href="#account-store-mapping-update-priority">Set the login priority</a> of an assigned account store</li>
<li><a href="#account-store-mapping-default-account-store">Set the default account store</a> for new accounts created by an application</li>
<li><a href="#account-store-mapping-default-group-store">Set the default group store</a> for new groups created by an application</li>
</ul>
</li>
<li><a href="#account-store-mapping-delete">Delete an account store mapping</a></li>
<li><a href="#account-store-mapping-list">List an application&rsquo;s assigned account stores</a></li>
</ul>


<p><a class="anchor" name="account-store-mapping-url"></a></p>

<h3><a id="locate-an-account-store-mappings-rest-url"></a>Locate an Account Store Mapping&rsquo;s REST URL</h3>

<p>You locate an Account Store Mapping&rsquo;s <code>href</code> by <a href="#application-account-store-mappings-list">listing an Application&rsquo;s associated Account Store Mappings</a>.  Within the list, find the <code>AccountStoreMapping</code> you need &ndash; it will have a unique <code>href</code> property.</p>

<p><a class="anchor" name="account-store-mapping-create"></a></p>

<h3><a id="create-an-account-store-mapping"></a>Create an Account Store Mapping</h3>

<p>In order for accounts in a Directory or Group to be able to login to an application, you must associate or &lsquo;map&rsquo; the Directory or Group to the Application.  You do this by creating a new <code>AccountStoreMapping</code> resource that references both the account store and application.</p>

<p>You do this by <code>POST</code>ing a new <code>AccountStoreMapping</code> resource to the <code>/v1/accountStoreMappings</code> URI. You must specify the application and the account store via their respective <code>href</code>s.</p>

<p><strong>Required Attributes</strong></p>

<ul>
<li><a href="#account-store-application">application</a> (a link)</li>
<li><a href="#account-store-accountStore">accountStore</a> (a link)</li>
</ul>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#list-index">listIndex</a></li>
<li><a href="#account-store-mapping-resource-is-default-account-store">isDefaultAccountStore</a> &ndash; if unspecified, the default is <code>false</code></li>
<li><a href="#account-store-mapping-resource-is-default-group-store">isDefaultGroupStore</a> &ndash; if unspecified, the default is <code>false</code></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "application": {
             "href": "https://api.stormpath.com/v1/applications/Uh8FzIouQ9C8EpcExAmPLe"
           },
           "accountStore": {
             "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpExAmPLe"
           },
           "isDefaultAccountStore": true,
           "isDefaultGroupStore": true
         }' \
     'https://api.stormpath.com/v1/accountStoreMappings'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7Ui2gpn9tV75y3TExAmPLe",
    "accountStore": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpExAmPLe"
    },
    "application": {
        "href": "https://api.stormpath.com/v1/applications/Uh8FzIouQ9C8EpcExAmPLe"
    },
    "listIndex": 0,
    "isDefaultAccountStore": true,
    "isDefaultGroupStore": true
}
</code></pre>

<p>You may use the response&rsquo;s <code>Location</code> header or the top-level <code>href</code> attribute to further interact with your new <code>AccountStoreMapping</code> resource.</p>

<p><a class="anchor" name="account-store-mapping-retrieve"></a></p>

<h3><a id="retrieve-an-account-store-mapping"></a>Retrieve An Account Store Mapping</h3>

<p>After you have created an account store mapping, you may retrieve its contents by sending a <code>GET</code> request to the account store mapping&rsquo;s URL returned in the <code>Location</code> header or <code>href</code> attribute.</p>

<p>If you don&rsquo;t have the account store mapping&rsquo;s URL, you can find it in the <a href="#account-store-mapping-list">application&rsquo;s account store mappings list</a>.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/accountStoreMappings/7Ui2gpn9tV75y3TExAmPLe
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7Ui2gpn9tV75y3TExAmPLe",
    "accountStore": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpExAmPLe"
    },
    "application": {
        "href": "https://api.stormpath.com/v1/applications/Uh8FzIouQ9C8EpcExAmPLe"
    },
    "listIndex": 0,
    "isDefaultAccountStore": true,
    "isDefaultGroupStore": true
}
</code></pre>

<p><a class="anchor" name="account-store-mapping-resources-expand"></a></p>

<h4>Expandable Resources</h4>

<p>When retrieving an Account Store Mapping, you can also retrieve one or more of its linked resources by <a href="#links-expansion">expanding them in-line</a> using the <code>expand</code> query parameter.</p>

<p>The following <code>AccountStoreMapping</code> attributes are expandable:</p>

<ul>
<li><code>accountStore</code></li>
<li><code>application</code></li>
</ul>


<p>See the <a href="#links-expansion">Link Expansion</a> section for more information on expanding link attributes.</p>

<p><a class="anchor" name="account-store-mapping-update"></a></p>

<h3><a id="update-an-account-store-mapping"></a>Update An Account Store Mapping</h3>

<p>Submit an HTTP <code>POST</code> to an accountStoreMapping&rsquo;s <code>href</code> when you want to change one or more of the account store mapping&rsquo;s attributes. Unspecified attributes are not changed, but at least one attribute must be specified.</p>

<p><strong>Updatable Application Attributes</strong></p>

<ul>
<li><a href="#list-index">listIndex</a></li>
<li><a href="#account-store-mapping-resource-is-default-account-store">isDefaultAccountStore</a></li>
<li><a href="#account-store-mapping-resource-is-default-group-store">isDefaultGroupStore</a></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "isDefaultAccountStore": true,
         }' \
     'https://api.stormpath.com/v1/accountStoreMappings/7Ui2gpn9tV75y3TExAmPLe'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
    "href": "https://api.stormpath.com/v1/accountStoreMappings/7Ui2gpn9tV75y3TExAmPLe",
    "accountStore": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpExAmPLe"
    },
    "application": {
        "href": "https://api.stormpath.com/v1/applications/Uh8FzIouQ9C8EpcExAmPLe"
    },
    "listIndex": 0,
    "isDefaultAccountStore": true,
    "isDefaultGroupStore": true
}
</code></pre>

<p><a class="anchor" name="account-store-mapping-update-priority"></a></p>

<h4>Set the Login Priority of an Assigned Account Store</h4>

<p>As we&rsquo;ve <a href="#workflow-login-attempt">shown previously</a>, an account trying to login to an application will be matched to the application&rsquo;s account stores based on the list order they are assigned to the application.  The account store at list index 0 has the highest priority, the account store at list index 1 has the next highest priority, and so on.  When an account is discovered in an account store, the login attempt occurs and returns immediately.  All remaining account stores are not checked.</p>

<p>If you wish to change an account store&rsquo;s login priority for an application, you simply:</p>

<ol>
<li>Find the <code>accountStoreMapping</code> resource in the application&rsquo;s <code>accountStoreMappings</code> <a href="#collections">collection</a> that reflects the <code>accountStore</code> that you wish to re-prioritize.</li>
<li>Issue a <code>POST</code> update request to that <code>AccountStoreMapping</code>&rsquo;s <code>href</code> with a new <code>listIndex</code> value.</li>
</ol>


<p><strong>Example Request</strong></p>

<p>For example, assume that the account store represented by mapping <a href="https://api.stormpath.com/v1/accountStoreMappings/dRvH4y0nT6uNl6gExAmPLe">https://api.stormpath.com/v1/accountStoreMappings/dRvH4y0nT6uNl6gExAmPLe</a> has a list index of <code>0</code> (first in the list), and we wanted to lower its priority to <code>1</code> (second in the list):</p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "listIndex": 1
         }' \
     'https://api.stormpath.com/v1/accountStoreMappings/dRvH4y0nT6uNl6gExAmPLe'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
    "href": "https://api.stormpath.com/v1/accountStoreMappings/dRvH4y0nT6uNl6gExAmPLe",
    "accountStore": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpExAmPLe"
    },
    "application": {
        "href": "https://api.stormpath.com/v1/applications/Uh8FzIouQ9C8EpcExAmPLe"
    },
    "listIndex": 1,
    "isDefaultAccountStore": true,
    "isDefaultGroupStore": true
}
</code></pre>

<p><a class="anchor" name="account-store-mapping-default-account-store"></a></p>

<h4>Set The Default Account Store for new Application Accounts</h4>

<p>Applications cannot store Accounts directly &ndash; Accounts are always stored in an Account Store (a Directory or Group).  Therefore, if you would like an application to be able to create new accounts, you must specify which of the application&rsquo;s associated account stores should store the application&rsquo;s newly created accounts.  This designated account store is called the application&rsquo;s <em>default account store</em>.</p>

<p>You specify an application&rsquo;s default account store by setting the AccountStoreMapping&rsquo;s <code>isDefaultAccountStore</code> attribute to equal <code>true</code>.  You can do this when you create the <code>accountStoreMapping</code> resource.  Or if the resource has already been created:</p>

<ol>
<li>Find the <code>accountStoreMapping</code> resource in the Application&rsquo;s <code>accountStoreMappings</code> <a href="#collections">collection</a> that reflects the <code>accountStore</code> you wish to be the application&rsquo;s default account store.</li>
<li>Issue a <code>POST</code> update request to that AccountStoreMapping&rsquo;s <code>href</code> with <code>isDefaultAccountStore</code> set to <code>true</code>.</li>
</ol>


<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "isDefaultAccountStore": true
         }' \
     'https://api.stormpath.com/v1/accountStoreMappings/dRvH4y0nT6uNl6gExAmPLe'
</code></pre>

<p>Now, any time a new account is created by <code>POST</code>ing to the application&rsquo;s <code>https://api.stormpath.com/v1/applications/$APPLICATION_ID/accounts</code> URI, the account will actually be created in the designated default account store.</p>

<p><strong>Directory vs Group?</strong></p>

<p>If the application&rsquo;s default account store is a:</p>

<ul>
<li>directory: the account will be created in the directory</li>
<li>group: the account will be created in the group&rsquo;s directory first, then assigned to the group automatically.</li>
</ul>


<div class='docs-note'><p>Only one of an application&#8217;s mapped account stores may be the default account store.</p>

<p>In addition, setting an AccountStoreMapping&#8217;s <code>isDefaultAccountStore</code> value to <code>true</code> will automatically set the application&#8217;s other AccountStoreMappings&#8217; <code>isDefaultAccountStore</code> values to <code>false</code>. However, note that setting an AccountStoreMapping&#8217;s <code>isDefaultAccountStore</code> value to <code>false</code> <strong>WILL NOT</strong> automatically set another AccountStoreMapping&#8217;s <code>isDefaultAccountStore</code> to <code>true</code>.  You are responsible for explicitly setting <code>isDefaultAccountStore</code> to <code>true</code> if you want the application to be able to create new accounts.</p>
</div>




<div class='docs-warning'><p>If none of the application&#8217;s AccountStoreMappings are designated as the default account store, the application <em>WILL NOT</em> be able to create new accounts from the applications endpoint.  It is still possible to create accounts from the <a href="#account-create">accounts endpoint</a>.</p>
</div>




<div class='docs-warning'><p>Also note that Mirrored directories or groups within Mirrored directories are read-only; they cannot be set as an application&#8217;s default account store.  Attempting to set <code>isDefaultAccountStore</code> to <code>true</code> on an AccountStoreMapping that reflects a mirrored directory or group will result in an error response.</p>
</div>


<p><a class="anchor" name="account-store-mapping-default-group-store"></a></p>

<h4>Set The Default Group Store for new Application Groups</h4>

<p>Applications cannot store Groups directly &ndash; Groups are always stored in a Directory.  Therefore, if you would like an application to be able to create new groups, you must specify which of the application&rsquo;s associated account stores should store the application&rsquo;s newly created groups.  This designated store is called the application&rsquo;s <em>default group store</em>.</p>

<p>You specify an application&rsquo;s default group store by setting the <code>AccountStoreMapping</code>&rsquo;s <code>isDefaultGroupStore</code> attribute to equal <code>true</code>.  You can do this when you create the <code>accountStoreMapping</code> resource, or if the resource has already been created:</p>

<ol>
<li>Find the <code>accountStoreMapping</code> resource in the Application&rsquo;s <code>accountStoreMappings</code> <a href="#collections">collection</a> that reflects the <code>accountStore</code> you wish to be the application&rsquo;s default group store.</li>
<li>Issue a <code>POST</code> update request to that <code>AccountStoreMapping</code>&rsquo;s <code>href</code> with <code>isDefaultGroupStore</code> set to <code>true</code>.</li>
</ol>


<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "isDefaultGroupStore": true
         }' \
     'https://api.stormpath.com/v1/accountStoreMappings/dRvH4y0nT6uNl6gExAmPLe'
</code></pre>

<p>Now, any time a new group is created by <code>POST</code>ing to the application&rsquo;s <code>https://api.stormpath.com/v1/applications/$APPLICATION_ID/groups</code> URI, the group will actually be created in the designated default group store.</p>

<div class='docs-note'><p>Only one of an application&#8217;s mapped account stores may be the default group store.</p>

<p>Also, note that setting an AccountStoreMapping&#8217;s <code>isDefaultGroupStore</code> value to <code>true</code> will automatically set the application&#8217;s other AccountStoreMappings&#8217; <code>isDefaultGroupStore</code> values to <code>false</code>. HOWEVER:</p>

<p>Lastly, setting an AccountStoreMapping&#8217;s <code>isDefaultGroupStore</code> value to <code>false</code> <strong>WILL NOT</strong> automatically set another AccountStoreMapping&#8217;s <code>isDefaultGroupStore</code> to <code>true</code>.  You are responsible for explicitly setting <code>isDefaultGroupStore</code> to <code>true</code> if you want the application to be able to create new groups.</p>
</div>




<div class='docs-warning'><p>If no <code>AccountStoreMapping</code> is designated as the default group store, the application <em>WILL NOT</em> be able to create new groups.</p>

<p>Also, note that Stormpath does not currently support storing groups within groups.  Therefore <code>isDefaultGroupStore</code> can only be set to <code>true</code> when the AccountStoreMapping&#8217;s <code>accountStore</code> is a Directory.  Attempting to set <code>isDefaultGroupStore</code> to <code>true</code> on an AccountStoreMapping that reflects a group will result in an error response.</p>

<p>Lastly, note that mirrored directories are read-only; they cannot be set as an application&#8217;s default group store. Attempting to set <code>isDefaultGroupStore</code> to <code>true</code> on an AccountStoreMapping that reflects a mirrored directory will result in an error response.</p>
</div>


<p><a class="anchor" name="account-store-mapping-delete"></a></p>

<h3><a id="delete-an-account-store-mapping"></a>Delete an Account Store Mapping</h3>

<p>You remove an assigned account store from an application by <code>DELETE</code>ing the <code>accountStoreMapping</code> resource that links the accountStore and the application together.  This removes the possibility of the accounts in the associated account store from being able to login to the application.</p>

<div class='docs-info'><p>Deleting an <code>accountStoreMapping</code> resource <em>does not</em> delete either the account store or the application resources themselves - only the association between the two.</p>
</div>




<div class='docs-note'><p>Deleting an account store mapping will remove the ability for accounts in the account store from authenticating with the application unless they are associated with an account store that is still mapped to the application. Be careful when removing mappings.</p>

<p>Also, note that if no <code>AccountStoreMapping</code> is designated as the default account store, the application <em>WILL NOT</em> be able to create new accounts.  Similarly, if there is no designated default group store, the application will not be able to create new groups.</p>
</div>


<p><strong>Example Request</strong></p>

<p>For example, to delete the application-accountStore association we created in the above previous example:</p>

<pre><code>curl -X DELETE -u $API_KEY_ID:$API_KEY_SECRET \
     'https://api.stormpath.com/v1/accountStoreMappings/7Ui2gpn9tV75y3TExAmPLe'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<p><a class="anchor" name="account-store-mapping-list"></a></p>

<h3><a id="list-account-store-mappings"></a>List Account Store Mappings</h3>

<p>You can list an applications&rsquo;s mapped account stores by issuing a <code>GET</code> request to the application&rsquo;s <code>accountStoreMappings</code> <code>href</code> URI.</p>

<p>The response is a paginated list of <code>accountStoreMapping</code> resources.  You may use collection <a href="#pagination">pagination</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/3hFENJHLaH1Vy4GSbscrtv/accountStoreMappings"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
   "href":"https://api.stormpath.com/v1/applications/3hFENJHLaH1Vy4GSbscrtv/accountStoreMappings",
   "offset":0,
   "limit":25,
   "items":[
      {
         "href":"https://api.stormpath.com/v1/accountStoreMappings/3hGLY9yHEqYraR0cXJUDPD",
         "listIndex":0,
         "isDefaultAccountStore":true,
         "isDefaultGroupStore":true,
         "application":{
            "href":"https://api.stormpath.com/v1/applications/3hFENJHLaH1Vy4GSbscrtv"
         },
         "accountStore":{
            "href":"https://api.stormpath.com/v1/directories/3hFN1PriI5xvv76jLoEXL5"
         }
      },
      ... remaining AccountStoreMappings ...
   ]
}
</code></pre>

<hr />

<p><a class="anchor" name="directories"></a></p>

<h2><a id="directories"></a>Directories</h2>

<p>A <code>Directory</code> is a top-level storage containers of <code>Accounts</code> and <code>Groups</code>. A Directory also manages security policies (like password strength) for the Accounts it contains.</p>

<p>Additionally:</p>

<ul>
<li>All <code>Accounts</code> within a directory have a unique email address and/or username.</li>
<li>All <code>Groups</code> within a directory have a unique name.</li>
</ul>


<p>Stormpath supports two types of Directories:</p>

<ol>
<li>Natively hosted ‘Cloud’ directories that originate in Stormpath and</li>
<li>‘Mirror’ directories that act as secure mirrors or replicas of existing directories outside of Stormpath, for example LDAP or Active Directory servers.</li>
</ol>


<div class='docs-info'><p>Directories are a more advanced feature of Stormpath.  If you have a single application or multiple applications that access the same accounts, you usually only need a single directory, and you do not need to be concerned with creating or managing multiple directories.</p>

<p>If however, your application(s) needs to support login for external 3rd party accounts like those in LDAP or Active Directory, or you have more complex account segmentation needs, directories will be a powerful tool to manage your application(s) user base.</p>
</div>


<p>Directories can be used to cleanly manage segmented account populations.  For example, you might use one Directory for company employees and another Directory for customers, each with its own security policies.  You can <a href="#account-store-mappings">associate directories to applications</a> (or groups within a directory) to allow the directory&rsquo;s accounts to login to applications.</p>

<p>You can add as many directories of each type as you require. Adding or deleting accounts, groups and group memberships in directories affects ALL applications to which the directories are mapped as <a href="#account-store-mappings">account stores</a>.</p>

<p><a class="anchor" name="directory-mirror"></a></p>

<h4>Mirror Directories</h4>

<p>Mirror directories are a big benefit to Stormpath customers who need LDAP or Active Directory accounts to be able to securely login to public web applications <em>without breaking corporate firewall policies</em>. Here is how they work:</p>

<ul>
<li>After creating an LDAP or AD Directory in Stormpath, you download a Stormpath Agent.  This is a simple standalone software application that you install behind the corporate firewall so it can communicate directly with the LDAP or AD server.</li>
<li>You configure the agent via LDAP filters to view only the accounts that you want to expose to your Stormpath-enabled applications.</li>
<li>The Agent will start synchronizing immediately, pushing this select data <em>outbound</em> to Stormpath over a TLS (HTTPS) connection.</li>
<li>The synchronized accounts and groups appear in the Stormpath Directory.  The accounts will be able to login to any Stormpath-enabled application <a href="#account-store-mappings">that you assign</a>.</li>
<li>When the Agent detects local LDAP or AD changes, additions or deletions to these specific accounts or groups, it will automatically propagate those changes to Stormpath to be reflected by your Stormpath-enabled applications.</li>
</ul>


<p>LDAP or Active Directory are still the &lsquo;system of record&rsquo; or source of identity &lsquo;truth&rsquo; for these accounts and groups.  The big benefit is that your Stormpath-enabled applications still use the same convenient REST+JSON API &ndash; they do not need to know anything about LDAP, Active Directory or legacy connection protocols!</p>

<div class='docs-tip'><p>The Stormpath Agent is <strong>firewall friendly</strong>: you do not need to open any inbound holes in your company firewall.  The only requirement is that the Agent be able to make an <em>outbound</em> HTTPS connection to https://api.stormpath.com</p>
</div>


<p>Finally, note that accounts and groups in mirrored directories are automatically deleted when:</p>

<ul>
<li>The original object is deleted from the LDAP or AD directory service.</li>
<li>The original LDAP/AD object information no longer matches the account filter criteria configured for the agent.</li>
<li>The LDAP/AD directory is deleted.</li>
</ul>


<p><a class="anchor" name="directory"></a></p>

<h3><a id="directory-resource"></a>Directory Resource</h3>

<p>An individual <code>directory</code> resource may be accessed via its Resource URI:</p>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/directories/:directoryId
</code></pre>

<p><a id="directory-attributes"></a>
<strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The resource fully qualified location URI </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="directory-resource-name"></a><code>name</code> </td>
<td align="left"> Name of the directory. Must be unique within a <a href="#tenants">tenant</a>. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="directory-resource-description"></a><code>description</code> </td>
<td align="left"> The description of the directory. </td>
<td align="left"> String </td>
<td align="left"> 0 &lt; N &lt;= 1000 characters</td>
</tr>
<tr>
<td align="left"><a id="directory-resource-status"></a><code>status</code> </td>
<td align="left"> Enabled directories can be used as account stores for applications. Disabled directories cannot be used for login. </td>
<td align="left"> Enum </td>
<td align="left"> <code>enabled</code>,<code>disabled</code></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="directory-resource-accounts"></a><code>accounts</code> </td>
<td align="left"> A link to the accounts owned by the directory. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="directory-resource-groups"></a><code>groups</code> </td>
<td align="left"> A link to the groups owned by the directory. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="directory-resource-tenant"></a><code>tenant</code> </td>
<td align="left"> A link to the owning tenant. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>accountCreationPolicy</code> </td>
<td align="left"> A link to the directory&rsquo;s Account Creation Policy </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>passwordPolicy</code> </td>
<td align="left"> A link to the directory&rsquo;s Password Policy </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>For directories, you can:</p>

<ul>
<li><a href="#locate-a-directorys-rest-url">Locate a directory&rsquo;s REST URL</a></li>
<li><a href="#directory-create">Create a directory</a>

<ul>
<li><a href="#create-a-cloud-directory">Create a cloud directory</a></li>
<li><a href="#directories-mirrored">Create a mirrored (LDAP) directory</a></li>
<li><a href="#associate-directories-with-applications">Associate directories with applications</a></li>
</ul>
</li>
<li><a href="#directory-retrieve">Retrieve a directory</a></li>
<li><a href="#directory-update">Update a directory</a>

<ul>
<li><a href="#enable-or-disable-a-directory">Enable or disable a directory</a></li>
<li><a href="#update-agent-configuration">Update agent configuration</a></li>
</ul>
</li>
<li><a href="#directory-delete">Delete a directory</a></li>
<li><a href="#directory-list">List directories</a></li>
<li><a href="#directory-search">Search directories</a></li>
<li>Work with directories:

<ul>
<li><a href="#directories-password-restrictions">Enforce Account Password Restrictions</a></li>
<li><a href="#directories-reg">Register A New Account</a></li>
<li><a href="#directories-verify-email">Verify An Account&rsquo;s Email Address</a></li>
<li><a href="#directories-password-reset">Reset An Account&rsquo;s Password</a></li>
</ul>
</li>
<li><a href="#directory-groups">Work with directory groups</a></li>
<li><a href="#directory-accounts">Work with directory accounts</a></li>
<li><a href="#directory-account-creation-policy">Update a directory&rsquo;s Account Creation Policy</a></li>
<li><a href="#directory-password-policy">Update a directory&rsquo;s Password Policy</a></li>
</ul>


<p><a class="anchor" name="locate-a-directorys-rest-url"></a></p>

<h3><a id="locate-a-directorys-rest-url"></a>Locate a Directory&rsquo;s REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference a directory using its REST URL or <code>href</code>.</p>

<p>There are multiple ways to find a directory <code>href</code> depending on what information you have available:</p>

<ul>
<li><a href="#tenant-directories-search">Search your tenant&rsquo;s <code>directories</code></a></li>
<li>Retrieve an application&rsquo;s <code>accountStoreMappings</code> and extract the directories iteratively</li>
<li>View an account&rsquo;s <code>directory</code> field.</li>
</ul>


<p>For example, if you need the <code>href</code> for a directory named &ldquo;My Directory&rdquo;, you can search your tenant&rsquo;s <code>directories</code> collection:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/23mq7BPIxNgPUPZDwj04SZ/directories?name=My%20Directory"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
    "href": "https://api.stormpath.com/v1/tenants/23mq7BPIxNgPUPZDwj04SZ/directories",
    "offset": 0,
    "limit": 25,
    "items": [
      {
        "href": "https://api.stormpath.com/v1/directories/3hFENJHLaH1Vy4GSbscrtv"
        "name": "My Directory"
        ... remaining Directory name/value pairs ...
      }
    ]
}
</code></pre>

<p>If you know the name exactly, you can use an <a href="#search-attribute">attribute search</a> (e.g., <code>name=</code>) or, if you only know a small part, you can use a <a href="#search-filter">filter search</a> (e.g., <code>q=My</code>) to narrow the results.</p>

<p><a class="anchor" name="directory-create"></a></p>

<h3><a id="create-a-directory"></a>Create a Directory</h3>

<div class='docs-info'><p>It is currently only possible to create a standard (non-mirrored) Directory via the REST API.  If you need to create a <a href="#directory-mirror">mirror directory</a> for LDAP or Active Directory, you must use the <a href="/console/product-guide#create-a-mirrored-directory">Stormpath Admin Console</a>.</p>
</div>


<p><a class="anchor" name="directory-create-cloud"></a>
<a class="anchor" name="create-a-cloud-directory"></a></p>

<h4>Create a Cloud Directory</h4>

<p>You create a new directory by submitting an HTTP POST request to the <code>/v1/directories</code> endpoint. This will create a new Directory instance within the caller’s tenant.</p>

<p>When you submit the POST, at least the <code>name</code> attribute must be specified, and it must be unique compared to all other directories in your tenant. The <code>description</code> and <code>status</code> attribute are optional.</p>

<p><strong>Required Attribute</strong></p>

<ul>
<li><a href="#directory-resource-name">name</a></li>
</ul>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#directory-resource-description">description</a></li>
<li><a href="#directory-resource-status">status</a></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/directories
Content-Type: application/json;charset=UTF-8

{
  "name" : "Captains",
  "description" : "Captains from a variety of stories"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q",
  "name" : "Captains",
  "description" : "Captains from a variety of stories",
  "status" : "ENABLED",
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  },
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/accounts"
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups"
  }
}
</code></pre>

<p><a class="anchor" name="directory-create-mirror"></a></p>

<h4>Create a Mirrored (LDAP/AD) Directory</h4>

<p>It is currently only possible to create a standard (non-mirrored) Directory via the REST API.  If you need to create a <a href="#directory-mirror">mirror directory</a> for LDAP or Active Directory, you must use the <a href="/console/product-guide#create-a-mirrored-directory">Stormpath Admin Console</a>.</p>

<p><a class="anchor" name="associate-directories-with-applications"></a></p>

<h4>Associate Directories with Applications</h4>

<p>If you want to assign a directory to an application so the directory&rsquo;s accounts may login to the application, you will need to <a href="#create-an-account-store-mapping">create an AccountStoreMapping</a>.</p>

<p><a class="anchor" name="directory-retrieve"></a></p>

<h3><a id="retrieve-a-directory"></a>Retrieve a Directory</h3>

<p>To retrieve a Directory, execute a <code>GET</code> request to a directory&rsquo;s <code>href</code>:</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q",
  "name" : "Captains",
  "description" : "Captains from a variety of stories",
  "status" : "enabled",
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/accounts"
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  }
}
</code></pre>

<p><a class="anchor" name="directory-resources-expand"></a></p>

<h4>Expandable Resources</h4>

<p>When retrieving a directory, you can also retrieve one or more of its linked resources by <a href="#links-expansion">expanding them in-line</a> using the <code>expand</code> query parameter.</p>

<p>The following <code>Directory</code> attributes are expandable:</p>

<ul>
<li><code>accounts</code></li>
<li><code>groups</code></li>
<li><code>tenant</code></li>
</ul>


<p>Also, because <code>accounts</code>, <code>groups</code>, and the <code>tenant</code> are <a href="#collections">Collection Resources</a> themselves, you can additionally control <a href="#pagination">pagination</a> for either expanded collection. For example:</p>

<pre><code>GET https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q?expand=tenant,groups(offset:0,limit:50),accounts(offset:0,limit:50)
</code></pre>

<p>See the <a href="#links-expansion">Link Expansion</a> section for more information on expanding link attributes.</p>

<p><a class="anchor" name="directory-update"></a></p>

<h3><a id="update-a-directory"></a>Update a Directory</h3>

<p>Use HTTP <code>POST</code> when you want to change one or more specific attributes of a <code>directory</code> resource. Unspecified attributes will not be changed, but at least one attribute must be specified.</p>

<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#directory-resource-name">name</a></li>
<li><a href="#directory-resource-description">description</a></li>
<li><a href="#directory-resource-status">status</a></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
Content-Type: application/json;charset=UTF-8

{
  "name" : "Captains Directory",
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q",
  "name" : "Captains Directory",
  "description" : "Captains from a variety of stories",
  "status" : "enabled",
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  },
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/accounts"
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups"
  }
}
</code></pre>

<p><a class="anchor" name="enable-or-disable-a-directory"></a></p>

<h4>Enable Or Disable a Directory</h4>

<p>A directory&rsquo;s status can be either <code>enabled</code> or <code>disabled</code>. An <code>enabled</code> directory allows its accounts and groups to login to any <a href="#account-store-mappings">assigned</a> application.  A <code>disabled</code> directory does not allow its accounts and groups to login to applications.</p>

<p>To enable or disable a directory, use HTTP <code>POST</code> to set the <code>status</code> to either <code>ENABLED</code> or <code>DISABLED</code>.</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
 Content-Type: application/json;charset=UTF-8

 {
   "status" : "ENABLED",
 }
</code></pre>

<p><a class="anchor" name="update-agent-configuration"></a></p>

<h4>Update Agent Configuration</h4>

<p>A <a href="#directory-agent">Directory Agent</a> is a Stormpath software application installed on your corporate network to securely synchronize an on-premise directory, such as LDAP or Active Directory, into a Stormpath <a href="#directory-mirrored">mirror directory</a>.</p>

<p>You can modify an agent configuration going through the &ldquo;Directories&rdquo; or &ldquo;Agent&rdquo; tabs on the Stormpath Admin Console. For more information on administering Mirrored Directory agents, refer to the <a href="https://stormpath.com/docs/console/product-guide#!UpdateAgent">Stormpath Admin Console product guide</a>.</p>

<p><a class="anchor" name="directory-delete"></a></p>

<h3><a id="delete-a-directory"></a>Delete a Directory</h3>

<div class='docs-warning'><p>Deleting a directory completely erases the directory and all of its accounts and groups from Stormpath.</p>
</div>


<p>We recommend that you disable a directory instead of deleting it if you anticipate that you might use the directory again or if you want to retain its data for historical reference.</p>

<p>To delete a directory:</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<div class='docs-info'><p>The <code>Stormpath Administrators</code> directory cannot be deleted.</p>
</div>


<p><a class="anchor" name="directory-list"></a></p>

<h3><a id="list-directories"></a>List Directories</h3>

<p>You may list your tenant&rsquo;s directories as described in <a href="#tenant-directories-list">List Tenant Directories</a>.</p>

<p><a class="anchor" name="directory-search"></a></p>

<h3><a id="search-directories"></a>Search Directories</h3>

<p>You may search for directories as described in <a href="#tenant-directories-search">Search Tenant directories</a>.</p>

<p><a class="anchor" name="work-with-directories"></a>
<a class="anchor" name="directories-account-password-policy"></a><a class="anchor" name="directories-password-restrictions"></a></p>

<h3><a id="account-password-strength-policy"></a>Account Password Strength Policy</h3>

<p>Directories can be configured to enforce specific restrictions on passwords for accounts associated with, such as requiring at least one or more non-alphanumeric characters.</p>

<p>With Stormpath&rsquo;s directories, you can configure custom strength restrictions for the passwords on accounts associated with that directory. You can specify the following elements in your directory&rsquo;s password strength requirements:</p>

<ul>
<li>Min characters</li>
<li>Max characters</li>
<li>Number of Mandatory characters

<ul>
<li>Lower case alphabetical</li>
<li>Uppercase case alphabetical</li>
<li>Numeric</li>
<li>Punctuation</li>
<li>Special characters (e.g., é)</li>
</ul>
</li>
</ul>


<p>By default, passwords must be of mixed case, include at least one number, and be between 8 and 100 characters in length.</p>

<p>Account&rsquo;s password strength policy are available on cloud directories and configurable using the Stormpath Admin Console and REST by modifying the <a href="#password-strength-policy-for-directory">Password Strength Policy for the Directory</a></p>

<p><a class="anchor" name="directories-reg"></a></p>

<h3><a id="register-a-new-account"></a>Register A New Account</h3>

<p>This workflow allows you to create an account at an application level rather than at a directory level. The application will populate the directory set as the default account store.</p>

<p>This workflow relies on the <code>account</code> resource as a starting point. For more information on working with these workflows via REST after they have already been configured, refer to the <a href="#application-account-register">Working With Applications</a> section of this guide.
This workflow is disabled by default for accounts, but you can enable it easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<div class='docs-note'><p>Workflows are only available on cloud directories and only configurable using the Stormpath Admin Console. They are not currently configurable via the REST API. Also, the Stormpath Administrator directory&#8217;s automated workflows cannot be altered.</p>
</div>


<p><a class="anchor" name="accounts-workflow"></a></p>

<h3><a id="work-with-accounts"></a>Work With Accounts</h3>

<p>If you want to learn about other account functionalities, such as <a href="#account-verify-email">verify an email address</a>, <a href="#accounts-authenticate">log in (authenticate) an account</a> and <a href="#accounts-reset">reset an account password</a>, read the instructions below.</p>

<p><a class="anchor" name="directories-verify-email"></a></p>

<h3><a id="verify-an-accounts-email-address"></a>Verify An Account&rsquo;s Email Address</h3>

<p>This workflow allows you to send a welcome email to a newly registered account and optionally verify that they own the email addressed used during registration.</p>

<p>The email verification workflow involves changes to an account at an application level, and as such, this workflow relies on the <code>account</code> resource as a starting point. For more information on working with these workflows via REST after they have already been configured, refer to the <a href="#account-verify-email">Working With Accounts</a> section of this guide.
This workflow is disabled by default for accounts, but you can enable it easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<div class='docs-note'><p>Workflows are only available on cloud directories and only configurable using the Stormpath Admin Console. They are not currently configurable via the REST API. Also, the Stormpath Administrator directory&#8217;s automated workflows cannot be altered.</p>
</div>


<p><a class="anchor" name="directories-password-reset"></a>
This is a self-service password reset workflow.  The account is sent an email with a secure link.  The person owning the account can click on the link and be shown a password reset form to reset their password.  This is strongly recommended to reduce support requests to your application team as well as to reduce your exposure to account passwords for added security.</p>

<p>The password reset workflow involves changes to an account at an application level, and as such, this workflow relies on the <code>application</code> resource as a starting point. For more information on working with this workflow via REST after they have already been configured, refer to the <a href="#application-password-reset">Working With Applications</a> section of this guide.</p>

<p>This workflow is disabled by default for accounts, but you can enable it easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<div class='docs-note'><p>Workflows are only available on cloud directories and only configurable using the Stormpath Admin Console.  They are not currently configurable via the REST API. Also, the Stormpath Administrator directory&#8217;s automated workflows cannot be altered.</p>
</div>


<p><a class="anchor" name="directory-groups"></a></p>

<h3><a id="directory-groups"></a>Directory Groups</h3>

<p>The <code>Groups</code> Collections for a <code>Directory</code> Resource Collection Resource represents all groups owned by a specific directory.</p>

<p><strong>Directory Groups Collection Resource URI</strong></p>

<pre><code>/v1/directories/:directoryId/groups
</code></pre>

<h4>List Directory Groups</h4>

<p>You can list your directory&rsquo;s groups by sending a <code>GET</code> request to your directory&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL.  The response is a <a href="#pagination">paginated</a> list of directory groups.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/directories/$DIRECTORY_ID/groups"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/directories/5D1bvO5To6KQBaGFh793Zz/groups",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/WpM9nyZ2TbaEzfbRvLk9KA"
      ... remaining Group name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/aLlyOUrBAse34js9hjiH9j"
      ... remaining Group name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Xhf0a9HLA02djsdP90dsQ2"
      ... remaining Group name/value pairs ...
    },
  ]
}
</code></pre>

<h4>Search Directory Groups</h4>

<p>You may search for groups by sending a <code>GET</code> request to your directory&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>. Any matching groups within your directory will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Group Attributes</h5>

<p>The following <a href="#account-resource">account attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>name</code></li>
<li><code>description</code></li>
</ul>


<p>In addition to the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/directories/$DIRECTORY_ID/groups?q=foo&amp;orderBy=name&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<h4>Working With Directory Groups</h4>

<p>Group resources support the full suite of CRUD commands and other interactions. Please see the <a href="#groups">Groups section</a> for more information.</p>

<p><a class="anchor" name="directory-accounts"></a></p>

<h3><a id="directory-accounts"></a>Directory Accounts</h3>

<p>The <code>Accounts</code> Collection for a <code>Directory</code> Resource Collection Resource represents all accounts owned by a specific directory.</p>

<p><strong>Directory Accounts Collection Resource URI</strong></p>

<pre><code>/v1/directories/:directoryId/accounts
</code></pre>

<h4>List Directory Accounts</h4>

<p>You can list your directory&rsquo;s accounts by sending a <code>GET</code> request to your directory&rsquo;s <code>groups</code> Collection Resource <code>href</code> URL. The response is a <a href="#pagination">paginated</a> list of directory groups.</p>

<p>You may also use collection <a href="#pagination">pagination</a> and <a href="#sorting">sort ordering</a> query parameters to customize the paginated response.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/directories/$DIRECTORY_ID/accounts"
</code></pre>

<!-- {: .bash} -->


<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/directories/5D1bvO5To6KQBaGFh793Zz/groups",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/WpM9nyZ2TbaEzfbRvLk9KA"
      ... remaining Group name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/aLlyOUrBAse34js9hjiH9j"
      ... remaining Group name/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Xhf0a9HLA02djsdP90dsQ2"
      ... remaining Group name/value pairs ...
    },
  ]
}
</code></pre>

<h4>Search Directory Accounts</h4>

<p>You may search for accounts by sending a <code>GET</code> request to your directory&rsquo;s <code>account</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>. Any matching groups within your directory will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Account Attributes</h5>

<p>The following <a href="#account-resource">account attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>username</code></li>
<li><code>email</code></li>
<li><code>givenName</code></li>
<li><code>middleName</code></li>
<li><code>surname</code></li>
</ul>


<p>In addition to the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/directories/$DIRECTORY_ID/accounts?q=foo&amp;orderBy=surname&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<h4>Working With Directory Accounts</h4>

<p>Account resources support the full suite of CRUD commands and other interactions. Please see the <a href="#accounts">Accounts section</a> for more information.</p>

<h3><a id="directory-account-creation-policy"></a>Directory Account Creation Policy</h3>

<p>A Directory&rsquo;s <code>Account Creation Policy</code> resource contains data and properties that control what Stormpath does when an <code>Account</code> is created.  This includes email verification and welcome emails.</p>

<p>The <code>Account Creation Policy</code> can be retrieved by interacting with the directory resource.  The directory resource has a <code>accountCreationPolicy</code> link to the <code>Account Creation Policy</code>.</p>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>verificationEmailStatus</code> </td>
<td align="left"> The status of the verification email workflow.  If this is set to <code>ENABLED</code>, Stormpath will send an email to a newly registered account to have them verify their email.  The email sent is configurable through <code>verificationEmailTemplates</code> property </td>
<td align="left"> String </td>
<td align="left"> <code>ENABLED</code> or <code>DISABLED</code></td>
</tr>
<tr>
<td align="left"><code>verificationEmailTemplates</code> </td>
<td align="left"> A collection of email templates that can be used for sending the &lsquo;email verification&rsquo; email.  A template stores all relevant properties needed for an email.  This is a collection but currently only allows one value.  It is not possible to create new resetEmailTemplates with a POST. </td>
<td align="left"> Link </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>verificationSuccessEmailStatus</code> </td>
<td align="left"> The status of the verification success email.  If this is set to <code>ENABLED</code>, Stormpath will send an email to a newly verified account to let them know that they have successfully verified their email.  The email sent is configurable through <code>verificationSuccessEmailTemplates</code> property </td>
<td align="left"> String </td>
<td align="left"> <code>ENABLED</code> or <code>DISABLED</code></td>
</tr>
<tr>
<td align="left"><code>verificationSuccessEmailTemplates</code></td>
<td align="left"> A collection of email templates that can be used for sending &lsquo;email verification success&rsquo; email.  A template stores all relevant properties needed for an email.  This is a collection but currently only allows one value.  It is not possible to create new resetEmailTemplates with a POST. </td>
<td align="left"> Link </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>welcomeEmailStatus</code> </td>
<td align="left"> The status of the welcome email.  If this is set to <code>ENABLED</code>, Stormpath will send an email to a newly registered account (if <code>verificationEmailStatus</code> is set to disabled) or a newly verified account (if <code>verificationEmailStatus</code> is set to enabled).  The email sent is configurable through <code>welcomeEmailTemplates</code> property </td>
<td align="left"> String </td>
<td align="left"> <code>ENABLED</code> or <code>DISABLED</code></td>
</tr>
<tr>
<td align="left"><code>welcomeEmailTemplates</code> </td>
<td align="left"> A collection of email templates that can be used for sending a welcome email.  A template stores all relevant properties needed for an email.  This is a collection but currently only allows one value.  It is not possible to create new resetEmailTemplates with a POST. </td>
<td align="left"> Link </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p><strong>Directory Account Creation Policy URI</strong></p>

<pre><code>/v1/accountCreationPolicies/:accountCreationPolicyID
</code></pre>

<p>The <code>href</code> of the account creation policy for a directory can be retrieved by from the directory&rsquo;s <code>accountCreationPolicy</code> property.  Once retrieved, you can get the password policy by:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accountCreationPolicies/$ACCOUNT_CREATION_POLICY_ID"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK

{
  "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy", 
  "verificationEmailStatus": "DISABLED", 
  "verificationEmailTemplates": {
      "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy/verificationEmailTemplates"
  }, 
  "verificationSuccessEmailStatus": "DISABLED", 
  "verificationSuccessEmailTemplates": {
      "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy/verificationSuccessEmailTemplates"
  }, 
  "welcomeEmailStatus": "DISABLED", 
  "welcomeEmailTemplates": {
      "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy/welcomeEmailTemplates"
  }
}
</code></pre>

<p>Using the <code>Account Creation Policy</code> for a directory you can:</p>

<ul>
<li><a href="#enable-verification-welcome-email-status">Enable or Disable the Verification, Verification Success, or Welcome Email</a></li>
<li><a href="#modify-account-creation-email-templates">Modify the Email Templates Used for Verification and Welcome Emails</a></li>
</ul>


<p><a class="anchor" name="enable-verification-welcome-email-status"></a></p>

<h4>Enable or Disable the Verification, Verification Success, or Welcome Email</h4>

<p>To enable or disable an email from being sent associated with verifying email or a welcome email, issue a <code>POST</code> with the desired status for correct status properties.</p>

<p>The <code>Account Creation Policy</code> has three separate statuses for the emails:</p>

<ul>
<li><code>verificationEmailStatus</code> &ndash; Denotes if the verification email will be sent to verify the email the end user used to create the account.  When this is set to a status of <code>ENABLED</code>, the new <code>Account</code> resources in the <code>Directory</code> will be created with the status of <code>UNVERIFIED</code> and an email will be sent to verify the address.  More information for verifying accounts can be found <a href="#account-verify-email">here</a>  The email properties are configurable through <code>verificationEmailTemplates</code></li>
<li><code>verificationSuccessEmailStatus</code> &ndash; Denotes if a success email will be sent to the end user when the email has been <a href="#account-verify-email">verified through the email verification workflow</a>.  The email properties are configurabel through <code>verificationSuccessEmailTemplates</code></li>
<li><code>welcomeEmailStatus</code> &ndash; Denotes if a welcome email will be sent to the end user when the account has been registered (with email verification turned off by verificationEmailStatus == DISABLED) or verified (with email verification turn on by verificationEmailStatus == ENABLED)</li>
</ul>


<p>By default, all of the <code>Account Creation Policy</code> email status are set to <code>DISABLED</code>.  To modify the policy, issue a <code>POST</code> to the <code>accountCreationPolicy</code> endpoint specifying the statuses that you would like to modify:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "verificationEmailStatus": "ENABLED",
           "welcomeEmailStatus": "ENABLED"
         }' \
     'https://api.stormpath.com/v1/accountCreationPolicies/$ACCOUNT_CREATION_POLICY_ID'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK

{
  "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy", 
  "verificationEmailStatus": "ENABLED", 
  "verificationEmailTemplates": {
      "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy/verificationEmailTemplates"
  }, 
  "verificationSuccessEmailStatus": "DISABLED", 
  "verificationSuccessEmailTemplates": {
      "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy/verificationSuccessEmailTemplates"
  }, 
  "welcomeEmailStatus": "ENABLED", 
  "welcomeEmailTemplates": {
      "href": "https://api.stormpath.com/v1/accountCreationPolicies/vuJwv33xO5P3HVX4C9kHy/welcomeEmailTemplates"
  }
}
</code></pre>

<p><a class="anchor" name="modify-account-creation-email-templates"></a></p>

<h4>Modify the Email Templates Used for Verification and Welcome Emails</h4>

<p>To modify the emails that get sent during the email verification and registration, let&rsquo;s take a look at the email templates for the account creation policy.  Email templates in Stormpath have common properties that can be modified to change the appearance of the emails.  The properties below apply to both email templates that reside in the account creation policy (verificationEmailTemplates, verificationSuccessEmailTemplates, and welcomeEmailTemplates).</p>

<p><strong>Resource Attribute for Email Templates</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>fromEmailAddress</code> </td>
<td align="left"> The address that appears in the email&rsquo;s from field. </td>
<td align="left"> String </td>
<td align="left"> A valid email address</td>
</tr>
<tr>
<td align="left"><code>fromName</code> </td>
<td align="left"> The name that appears in the email&rsquo;s from field </td>
<td align="left"> String </td>
<td align="left"> A string</td>
</tr>
<tr>
<td align="left"><code>subject</code> </td>
<td align="left"> The subject that appears in the email&rsquo;s subject field </td>
<td align="left"> String </td>
<td align="left"> A string</td>
</tr>
<tr>
<td align="left"><code>htmlBody</code> </td>
<td align="left"> The body of the email in HTML format.  This body is only sent when the <code>mimeType</code> for the template is set to <code>text/html</code>.  This body can take valid HTML snippets. </td>
<td align="left"> String </td>
<td align="left"> A string. For the resetEmailTemplate it is required to include the macro for the ${url}, ${sptoken} or, ${sptokenNameValuePair}</td>
</tr>
<tr>
<td align="left"><code>textBody</code> </td>
<td align="left"> The body of the email is plain text format.  This body is only sent when the <code>mimeType</code> for the template is set to <code>text/plain</code> </td>
<td align="left"> String </td>
<td align="left"> A string.  For the resetEmailTemplate it is required to include the macro for the ${url}, ${sptoken} or, ${sptokenNameValuePair}</td>
</tr>
<tr>
<td align="left"><code>mimeType</code> </td>
<td align="left"> A property that defines whether Stormpath will send an email with the mime type of <code>text/plain</code> or <code>text/html</code>. </td>
<td align="left"> String </td>
<td align="left"> <code>text/plain</code> or <code>text/html</code></td>
</tr>
<tr>
<td align="left"><code>defaultModel</code> </td>
<td align="left"> An object that defines the model of the email template.  The defaultModel currently holds one value, which is the linkBaseUrl.  The linkBaseUrl is used when using the macro ${url} in an email template.  This macro generates a url that includes the linkBaseUrl and the sptoken used in password reset workflows </td>
<td align="left"> Object </td>
<td align="left"> Object that includes one property linkBaseUrl that is a String </td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>To update an email template, first you must get the email template&rsquo;s href.  This is done by working with the verificationEmailTemplates, verificationSuccessEmailTemplates, and welcomeEmailTemplates collection.  These collections hold only one email template, but in the future may hold multiple templates.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accountCreationPolicies/$ACCOUNT_CREATION_POLICY_ID/welcomeEmailTemplates "
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
    "href": "https://api.stormpath.com/v1/accountCreationPolicies/3vuJwv33xO5P3HVX4C9kHy/welcomeEmailTemplates", 
    "items": [
        {
            ...
            "href": "https://api.stormpath.com/v1/emailTemplates/wztp77rsr05swAFL3AnrY",
            ...
        }
    ], 
    "limit": 25, 
    "offset": 0, 
    "size": 1
}
</code></pre>

<p>After getting the href for the email template, you can update by an HTTP <code>POST</code> and update properties of the template:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "fromName": "Application Support",
           "fromEmail": "support@application.com",
           "subject": "Welcome to application.com"
         }' \
     'https://api.stormpath.com/v1/emailTemplates/wztp77rsr05swAFL3AnrY'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK

{
    "description": "This is the welcome email template that is associated with the directory.", 
    "fromEmailAddress": "tom@stormpath.com", 
    "fromName": "Tom Abbott", 
    "href": "https://api.stormpath.com/v1/emailTemplates/wztp77rsr05swAFL3AnrY", 
    "htmlBody": "You have been successfully registered for an application that uses Stormpath.\n\n--------------------\nFor general inquiries or to request support with your account, please email tom@stormpath.com", 
    "mimeType": "text/plain", 
    "name": "Default Welcome Email Template", 
    "subject": "Your registration was successful", 
    "textBody": "You have been successfully registered for an application that uses Stormpath.\n\n--------------------\nFor general inquiries or to request support with your account, please email tom@stormpath.com"
}
</code></pre>

<h3><a id="directory-password-policy"></a>Directory Password Policy</h3>

<p>A Directory&rsquo;s <code>Password Policy</code> resource contains data that controls how strong passwords need to be for account in the directory and how they are reset.  By modifying this information, you can modify the behavior of the account&rsquo;s that are apart of the directory.</p>

<p>The password policy can be retrieved by interacting with the directory resource.  The directory resource has a <code>passwordPolicy</code> link to the directory&rsquo;s <code>Password Policy</code>.</p>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The href location of the passwordPolicy </td>
<td align="left"> String </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>resetEmailStatus</code> </td>
<td align="left"> The status of the reset email workflow.  If this is set to ENABLED, then Stormpath will allow for passwords to be reset through the email workflow and will use the template that is stored in the passwordPolicy&rsquo;s <code>resetEmailTemplates</code></td>
<td align="left"> String </td>
<td align="left"> <code>"ENABLED"</code> or <code>"DISABLED"</code></td>
</tr>
<tr>
<td align="left"><code>resetEmailTemplates</code> </td>
<td align="left"> A collection of email templates that can be used for sending password reset email.  A template stores all relevant properties needed for an email.  This is a collection but currently only allows one value.  It is not possible to create new resetEmailTemplates with a POST. </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>resetSuccessEmailStatus</code> </td>
<td align="left"> The status of the reset success email.  If this is set to ENABLED, then Stormpath will send the a email when an account&rsquo;s password is reset using the email workflow and it is successful.  The email template that is sent is defined in the passwordPolicy&rsquo;s <code>resetSuccessEmailTemplates</code> </td>
<td align="left"> String </td>
<td align="left"> <code>"ENABLED"</code> or <code>"DISABLED"</code></td>
</tr>
<tr>
<td align="left"><code>resetSuccessEmailTemplates</code> </td>
<td align="left"> A collection of email templates that can be used for sending password reset success email.  A template stores all relevant properties needed for an email.  This is a collection but currently only allows one value.  It is not possible to create new resetEmailTemplates with a POST. </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>resetTokenTtl</code> </td>
<td align="left"> An integer that defines how long the password reset token is valid for during the password reset email workflow. </td>
<td align="left"> Integer </td>
<td align="left">  A positive integer, less than 169 (0 &lt; i &lt; 169). Default is 24</td>
</tr>
<tr>
<td align="left"><code>strength</code> </td>
<td align="left">  A link to the password strength requirements for the directory </td>
<td align="left"> Link </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p><strong>Directory Password Policy URI</strong></p>

<pre><code>/v1/passwordPolicies/:passwordPolicyID
</code></pre>

<p>The href location of the password policy for a directory can be retrieved by from the directory&rsquo;s passwordPolicy property.  Once retrieved, you can get the password policy by:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
    "href": "https://api.stormpath.com/v1/passwordPolicies/6uFCqUAMk8kQ3VWUulvtkc", 
    "resetEmailStatus": "ENABLED", 
    "resetEmailTemplates": {
        "href": "https://api.stormpath.com/v1/passwordPolicies/6uFCqUAMk8kQ3VWUulvtkc/resetEmailTemplates"
    }, 
    "resetSuccessEmailStatus": "ENABLED", 
    "resetSuccessEmailTemplates": {
        "href": "https://api.stormpath.com/v1/passwordPolicies/6uFCqUAMk8kQ3VWUulvtkc/resetSuccessEmailTemplates"
    }, 
    "resetTokenTtl": 24, 
    "strength": {
        "href": "https://api.stormpath.com/v1/passwordPolicies/6uFCqUAMk8kQ3VWUulvtkc/strength"
    }
}
</code></pre>

<p>For password policies, you can modify:</p>

<ul>
<li>Password Reset Workflow for Directory&rsquo;s Accounts</li>
<li>Password Strength Policy for Directory&rsquo;s Accounts</li>
</ul>


<h4>Password Reset Workflow for Directory&rsquo;s Accounts</h4>

<p>The Password Reset Email is configurable for a directory.  There is a set of properties that define its behavior.  This includes the <code>resetEmailStatus</code> and the <code>resetEmailTemplates</code> for the initial password reset email that sends an email to the account&rsquo;s email address with a link to reset the account&rsquo;s password and <code>resetSuccessEmailStatus</code> and the <code>resetSuccessEmailTemplates</code> for the resulting email that is sent when the password reset is successful through the email workflow.</p>

<p>To enable or disable the ability to send a password reset email, issue a <code>POST</code> with the desired status for the <code>resetEmailStatus</code>.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "resetEmailStatus": "ENABLED"
         }' \
     'https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID'
</code></pre>

<p>To enable or disable the ability to send a password success reset email, issue a <code>POST</code> with the desired status for the <code>resetSuccessEmailStatus</code>.  This email will only be set if both <code>resetEmailStatus</code> and <code>resetSuccessEmailStatus</code> are set to <code>ENABLED</code></p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "resetSuccessEmailStatus": "ENABLED"
         }' \
     'https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID'
</code></pre>

<p>To modify the emails that get sent during the password reset workflow, let&rsquo;s take a look at the email templates for the password reset.  Email templates in Stormpath have common properties that can be modified to change the appearance of the emails.  The properties below apply to both email templates that reside in the password policy (resetEmailTemplate and resetSuccessEmailTemplate).</p>

<p><strong>Resource Attribute for Email Templates</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>fromEmailAddress</code> </td>
<td align="left"> The address that appears in the email&rsquo;s from field. </td>
<td align="left"> String </td>
<td align="left"> A valid email address</td>
</tr>
<tr>
<td align="left"><code>fromName</code> </td>
<td align="left"> The name that appears in the email&rsquo;s from field </td>
<td align="left"> String </td>
<td align="left"> A string</td>
</tr>
<tr>
<td align="left"><code>subject</code> </td>
<td align="left"> The subject that appears in the email&rsquo;s subject field </td>
<td align="left"> String </td>
<td align="left"> A string</td>
</tr>
<tr>
<td align="left"><code>htmlBody</code> </td>
<td align="left"> The body of the email in HTML format.  This body is only sent when the <code>mimeType</code> for the template is set to <code>text/html</code>.  This body can take valid HTML snippets. </td>
<td align="left"> String </td>
<td align="left"> A string. For the resetEmailTemplate it is required to include the macro for the ${url}, ${sptoken} or, ${sptokenNameValuePair}</td>
</tr>
<tr>
<td align="left"><code>textBody</code> </td>
<td align="left"> The body of the email is plain text format.  This body is only sent when the <code>mimeType</code> for the template is set to <code>text/plain</code> </td>
<td align="left"> String </td>
<td align="left"> A string.  For the resetEmailTemplate it is required to include the macro for the ${url}, ${sptoken} or, ${sptokenNameValuePair}</td>
</tr>
<tr>
<td align="left"><code>mimeType</code> </td>
<td align="left"> A property that defines whether Stormpath will send an email with the mime type of <code>text/plain</code> or <code>text/html</code>. </td>
<td align="left"> String </td>
<td align="left"> <code>text/plain</code> or <code>text/html</code></td>
</tr>
<tr>
<td align="left"><code>defaultModel</code> </td>
<td align="left"> An object that defines the model of the email template.  The defaultModel currently holds one value, which is the linkBaseUrl.  The linkBaseUrl is used when using the macro ${url} in an email template.  This macro generates a url that includes the linkBaseUrl and the sptoken used in password reset workflows </td>
<td align="left"> Object </td>
<td align="left"> Object that includes one property linkBaseUrl that is a String </td>
</tr>
</tbody>
</table>


<p>To update an email template, first you must get the email template&rsquo;s href.  This is done by working with the resetEmailTemplates and resetSuccessEmailTemplates collection.  These collections hold only one email template, but in the future may hold multiple templates.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID/resetEmailTemplates"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
    "href": "https://api.stormpath.com/v1/passwordPolicies/6uFCqUAMk8kQ3VWUulvtkc/resetEmailTemplates", 
    "items": [
        {
            ...
            "href": "https://api.stormpath.com/v1/emailTemplates/3wztp77rsr05swAFL3AnrY",
            ...
        }
    ], 
    "limit": 25, 
    "offset": 0, 
    "size": 1
}
</code></pre>

<p>After getting the href for the email template, you can update by an HTTP <code>POST</code> and update properties of the template:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "fromName": "Application Support",
           "fromEmail": "support@application.com",
           "subject": "Reset your Password for application.com"
           "defaultModel": {
              "linkBaseUrl": "https://application.com/password-reset"
           }
         }' \
     'https://api.stormpath.com/v1/emailTemplates/3wztp77rsr05swAFL3AnrY'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
{
    "defaultModel": {
        "linkBaseUrl": "https://application.com/password-reset"
    }, 
    "description": "This is the password reset email template that is associated with the directory", 
    "fromEmailAddress": "support@application.com", 
    "fromName": "Application Support", 
    "href": "https://api.stormpath.com/v1/emailTemplates/3wztp77rsr05swAFL3AnrY", 
    "htmlBody": "&lt;p&gt;Forgot your password?&lt;/p&gt;&lt;br/&gt;&lt;br/&gt;&lt;p&gt;We've received a request to reset the password for this email address.&lt;/p&gt;&lt;p&gt;To reset your password please click on this link (link expires ${expirationWindow} hours):&lt;br/&gt;&lt;a href=\"${url}\"&gt;Link&lt;/a&gt;&lt;/p&gt;&lt;p&gt;This link takes you to a secure page where you can change your password. If you don't want to reset your password, please ignore this message. Your password will not be reset.&lt;/p&gt;&lt;p&gt;----------------------&lt;br/&gt;For general inquiries or to request support with your account, please email support@application.com&lt;/p&gt;", 
    "mimeType": "text/plain", 
    "name": "Default Password Reset Email Template", 
    "subject": "Reset your Password for application.com", 
    "textBody": "Forgot your password?\n\nWe've received a request to reset the password for this email address.\n\nTo reset your password please click on this link or cut and paste this URL into your browser (link expires in ${expirationWindow} hours):\n${url}\n\nThis link takes you to a secure page where you can change your password.\n\nIf you don't want to reset your password, please ignore this message. Your password will not be reset.\n---------------------\nFor general inquiries or to request support with your account, please email support@application.com"
}
</code></pre>

<p><a class="anchor" name="password-strength-policy-for-directory"></a></p>

<h4>Password Strength Policy for Directory&rsquo;s Accounts</h4>

<p>The <code>Password Strength Policy</code> for a Directory can be modified through the Administrator Console and through the REST API.  Password Strength Policy is part of the Directory&rsquo;s Password Policy and can be accessed through the <code>strength</code> property.</p>

<p><strong>Resource Attribute for Password Strength</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>maxLength</code> </td>
<td align="left">  Represents the maximum length for a password.  For example maxLength of 10 requires that a password has no more than 10 characters </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 100</td>
</tr>
<tr>
<td align="left"><code>minLength</code> </td>
<td align="left"> Represents the minimum length for a password.  For example minLength of 5 requires that a password has no less than 5 characters </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 8</td>
</tr>
<tr>
<td align="left"><code>minLowerCase</code> </td>
<td align="left"> Represents the minimum number of lower case characters required for the password.  For example, minLowerCase of 3 requires the password have 3 lower case characters </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 1</td>
</tr>
<tr>
<td align="left"><code>minNumeric</code> </td>
<td align="left"> Represents the minimum number of number characters required for the password.  For example, minNumeric of 3 requires the password have 3 numbers </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 1</td>
</tr>
<tr>
<td align="left"><code>minSymbol</code> </td>
<td align="left"> Represents the minimum number of symbol characters required for the password.  For example, minSymbol of 3 requires the password have 3 symbols </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 0</td>
</tr>
<tr>
<td align="left"><code>minUpperCase</code> </td>
<td align="left"> Represents the minimum number of upper case characters required for the password.  For example, minUpperCase of 3 requires the password have 3 upper case characters </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 1</td>
</tr>
<tr>
<td align="left"><code>minDiacritic</code> </td>
<td align="left"> Represents the minimum number of diacritic characters required for the password.  For example, minDiacritic of 3 requires the password have 3 symbols </td>
<td align="left"> Integer </td>
<td align="left"> Valid Integer, default is 0</td>
</tr>
</tbody>
</table>


<p>To retrieve the <code>Password Strength</code> requirements for a directory:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID/strength"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK

{
  "href": "https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID/strength", 
  "maxLength": 100, 
  "minDiacritic": 0, 
  "minLength": 8, 
  "minLowerCase": 1, 
  "minNumeric": 1, 
  "minSymbol": 0, 
  "minUpperCase": 1
}
</code></pre>

<p>Setting new <code>Password Strength</code> requirement for a directory modifies the requirement for new accounts and also password changes on existing account&rsquo;s in a directory.  To update <code>Password Strength</code>, simple HTTP <code>POST</code> to the resource with the changes necessary.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "minLength": 1,
           "maxLength": 24,
           "minSymbol": 1,
         }' \
     'https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID/strength'
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
  "href": "https://api.stormpath.com/v1/passwordPolicies/$PASSWORD_POLICY_ID/strength", 
  "maxLength": 24, 
  "minDiacritic": 0, 
  "minLength": 1, 
  "minLowerCase": 1, 
  "minNumeric": 1, 
  "minSymbol": 1, 
  "minUpperCase": 1
}
</code></pre>

<hr />

<p><a class="anchor" name="groups"></a></p>

<h2><a id="groups"></a>Groups</h2>

<p>A <code>Group</code> is a collection of <code>Accounts</code> within a <code>Directory</code> that are often used for authorization and access control to the <code>Application</code>. In Stormpath, the term <code>Group</code> is synonymous with <a href="#role">role</a>.</p>

<p>You manage LDAP/AD groups on your primary LDAP/AD installation. LDAP/AD accounts and groups are automatically deleted when:</p>

<ul>
<li>The backing object is deleted from the LDAP/AD directory service.</li>
<li>The backing LDAP/AD object information no longer matches the account filter criteria configured for the agent.</li>
<li>The LDAP/AD directory is deleted.</li>
</ul>


<p><a class="anchor" name="group"></a></p>

<h3><a id="group-resource"></a>Group Resource</h3>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/groups/:groupId
</code></pre>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The resource fully qualified location URI </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="group-resource-name"></a><code>name</code> </td>
<td align="left"> The name of the group. Must be unique within a directory. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="group-resource-description"></a><code>description</code> </td>
<td align="left"> The description of the group. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 1000 characters</td>
</tr>
<tr>
<td align="left"><a id="group-resource-status"></a><code>status</code> </td>
<td align="left"> Enabled groups are able to authenticate against an application. Disabled groups cannot authenticate against an application. </td>
<td align="left"> Enum  </td>
<td align="left"><code>enabled</code>,<code>disabled</code></td>
</tr>
<tr>
<td align="left"><a id="group-resource-custom-data"></a><code>customData</code> </td>
<td align="left"> A link to the group&rsquo;s <a href="#group-custom-data">customData</a> resource that you can use to store your own group-specific custom fields. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="group-resource-tenant"></a><code>tenant</code> </td>
<td align="left"> The tenant that owns the directory containing this group. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="directory-resource-directory"></a><code>directory</code> </td>
<td align="left"> A link to the directory resource that the group belongs to. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a class="anchor" name="directory-resource-accounts"></a><code>accounts</code> </td>
<td align="left"> A link to the accounts that are contained within this group. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>With groups, you can:</p>

<ul>
<li><a href="#group-url">Locate a group&rsquo;s REST URL</a></li>
<li><a href="#group-create">Create a group</a></li>
<li><a href="#group-retrieve">Retrieve a group</a></li>
<li><a href="#group-update">Update a group</a>

<ul>
<li><a href="#group-enable">Enable a group</a></li>
<li><a href="#group-disable">Disable a group</a></li>
</ul>
</li>
<li><a href="#group-delete">Delete a group</a></li>
<li><a href="#group-custom-data">Manage your own custom group data</a></li>
<li><a href="#groups-list">List groups</a></li>
<li><a href="#groups-search">Search groups</a></li>
<li><a href="#group-accounts">Access a group&rsquo;s accounts</a></li>
<li><a href="#group-account-memberships">Manage a group&rsquo;s account memberships</a></li>
</ul>


<p><a class="anchor" name="group-url"></a></p>

<h3><a id="locate-a-groups-rest-url"></a>Locate a Group&rsquo;s REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference a group directly using its REST URL or <code>href</code>.</p>

<p>There are multiple ways to find a group <code>href</code> depending on what information you have available:</p>

<ul>
<li>Retrieve a group from a specific directory</li>
<li>Retrieve a group from a specific account&rsquo;s <code>groupMemberships</code>.</li>
<li>Retrieve a group from the application&rsquo;s full list of groups</li>
</ul>


<p>In all cases, the process is fundamentally the same. Consider the first case as example.</p>

<p>In order to locate a group&rsquo;s <code>href</code>, you&rsquo;ll need to first search the tenant for the specific group using some information that you have available.</p>

<p>For example, if you want to find the <code>href</code> for a group with the name &ldquo;My Group&rdquo;, you&rsquo;ll need to search the directory for the &ldquo;My Group&rdquo; <code>group</code> resource:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/directories/5D1bvO5To6KQBaGFh793Zz/groups?name=My%20GROUP"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
    href: "https://api.stormpath.com/v1/directories/5D1bvO5To6KQBaGFh793Zz/groups"
    offset: 0
    limit: 25
    items: [1]
      0:  {
        href: "https://api.stormpath.com/v1/groups/cquoM06qa6pTkk1h2xOeJ"
        name: "My Group"
        ... remaining Account name/value pairs ...
}
</code></pre>

<p>If you know the name exactly, you can use an <a href="#search-attribute">attribute search</a> (e.g., &ldquo;name=&rdquo;) or, if you only know a small part, you can use a <a href="#search-filter">filter search</a> (e.g., &ldquo;q=My&rdquo;) to narrow down the selection.</p>

<p><a class="anchor" name="group-create"></a></p>

<h3><a id="create-a-group"></a>Create a Group</h3>

<p>To create a new <code>group</code> resource instance in a specified directory which is accessible to the application:</p>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/directories/:directoryId/groups
</code></pre>

<p><strong>Required Attributes</strong></p>

<ul>
<li><a href="#group-resource-name">name</a></li>
</ul>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#group-resource-description">description</a></li>
<li><a href="#group-resource-status">status</a></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups
Content-Type: application/json;charset=UTF-8

{
  "name" : "Aquanauts",
  "description" : "Sea Voyagers",
  "status" : "enabled"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ",
  "name" : "Aquanauts",
  "description" : "Sea Voyagers",
  "status" : "enabled",
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  },
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
  }
}
</code></pre>

<p>This creates a new group in the application group creation acceptable designated directory. The group data POSTed is the same required for the existing directory-specific group creation endpoint.</p>

<p>If there is no acceptable designated directory account store, the REST API error code <a href="/errors#5102">5102</a> is returned:</p>

<pre><code>{
  "status": 409,
  "code": 5102,
  "message": "Oops! We encountered an unexpected error.  Please contact support and explain what you were doing at the time this error occurred.",
  "developerMessage": "No account store assigned to this application has been configured as the default storage location for newly created groups.  To fix this problem: in the application's 'account stores' configuration, specify the account store that will be used to store newly created groups."
  "moreInfo": "https://docs.stormpath.com/errors/5102"
}
</code></pre>

<p><a class="anchor" name="group-retrieve"></a></p>

<h3><a id="retrieve-a-group"></a>Retrieve a Group</h3>

<p>HTTP <code>GET</code> returns a representation of a <code>group</code> resource that includes the resource attributes.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ",
  "name" : "Aquanauts",
  "description" : "Sea Voyagers",
  "status" : "enabled",
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  },
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
  }
}
</code></pre>

<p><a class="anchor" name="group-resources-expand"></a></p>

<h4>Expandable Resources</h4>

<p>When retrieving an application, you can also retrieve one or more of its linked resources by <a href="#links-expansion">expanding them in-line</a> using the <code>expand</code> query parameter.</p>

<p>The following <code>Groups</code> attributes are expandable:</p>

<ul>
<li><code>tenant</code></li>
<li><code>directory</code></li>
<li><code>accounts</code></li>
</ul>


<p>Also, because <code>accounts</code> is a <a href="#collections">Collection Resources</a> itself, you can additionally control <a href="#pagination">pagination</a> for either expanded collection.  For example:</p>

<pre><code>GET https://api.stormpath.com/v1/groups/WpM9nyZ2TbaEzfbRvLk9KA?expand=tenant,directory,accounts(offset:0,limit:50)
</code></pre>

<p>See the <a href="#links-expansion">Link Expansion</a> section for more information on expanding link attributes.</p>

<p><a class="anchor" name="group-update"></a></p>

<h3><a id="update-a-group"></a>Update a Group</h3>

<p>Use HTTP <code>POST</code> when you want to change one or more specific attributes of a <code>group</code> resource. Unspecified attributes are not changed, but at least one attribute must be specified.</p>

<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#group-resource-name">name</a></li>
<li><a href="#group-resource-description">description</a></li>
<li><a href="#group-resource-status">status</a></li>
</ul>


<p>Here are some account update examples:</p>

<ul>
<li><a href="#account-update-simple">Simple Update Group Example</a></li>
<li><a href="#group-enable">Enable a Group</a></li>
<li><a href="#group-disable">Disable a Group</a></li>
<li><a href="#update-custom-data-embedded">Update a Group and its Custom Data simultaneously</a></li>
</ul>


<p><a class="anchor" name="group-update-simple"></a>
<strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
Content-Type: application/json;charset=UTF-8

{
  "description" : "Sea Voyagers"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ",
  "name" : "Aquanauts",
  "description" : "Sea Voyagers",
  "status" : "enabled",
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
  },
  "accounts" : {
    "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
  }
}
</code></pre>

<p><a class="anchor" name="group-enable"></a></p>

<h4>Enable a Group</h4>

<p>If the group is contained within an <em>enabled directory where the directory is defined as an account store</em>, then enabling the group allows all accounts contained within the group (membership list) to log in to any applications for which the directory is defined as an account store.</p>

<p>If the group is contained within an <em>disabled directory where the directory is defined as an account store</em>, the group members are not be able to log in to any applications for which the directory is defined as an account store.</p>

<p>If the group is defined as an account store, then enabling the group allows accounts contained within the group (membership list) to log in to any applications for which the group is defined as an account store.</p>

<p>To enable a group:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
 Content-Type: application/json;charset=UTF-8

 {
   "status" : "ENABLED"
 }
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
 Content-Type: application/json;charset=UTF-8;

 {
   "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ",
   "name" : "Aquanauts",
   "description" : "Sea Voyagers",
   "status" : "enabled",
   "directory" : {
 "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
   },
   "tenant" : {
 "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
   },
   "accounts" : {
 "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
   }
 }
</code></pre>

<p><a class="anchor" name="group-disable"></a></p>

<h4>Disable a Group</h4>

<p>If a group is explicitly set as an application account store, then disabling that group prevents any of its user accounts from logging into that application but retains the group data and memberships. You would typically disable a group if you must shut off a group of user accounts quickly and easily.</p>

<p>If the group is contained within a directory defined as an account store, disabling the group prevents group members from logging in to any applications for which the directory is defined as an account store.</p>

<p>To disable a group:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
 Content-Type: application/json;charset=UTF-8

 {
   "status" : "DISABLED"
 }
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
 Content-Type: application/json;charset=UTF-8;

 {
   "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ",
   "name" : "Aquanauts",
   "description" : "Sea Voyagers",
   "status" : "disabled",
   "directory" : {
     "href" : "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q"
   },
   "tenant" : {
     "href" : "https://api.stormpath.com/v1/tenants/Gh9238fksJlsieJkPkQuW"
   },
   "accounts" : {
     "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
   }
 }
</code></pre>

<p><a class="anchor" name="group-delete"></a></p>

<h3><a id="delete-a-group"></a>Delete a Group</h3>

<p>Deleting a cloud directory group erases the group and all its membership relationships. User accounts that are members of the group will not be deleted.</p>

<p>We recommend that you disable an group rather than delete it, if you believe you might need to retain the user data or application connection.</p>

<p>To delete a cloud directory group:</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<h3><a id="group-custom-data"></a>Group Custom Data</h3>

<p>While Stormpath&rsquo;s default Group attributes are useful to many applications, you might want to add your own custom data to a Stormpath group.  If you want, you can store all of your custom group information in Stormpath so you don&rsquo;t have to maintain another separate database to store your specific group data.</p>

<p>Please see the <a href="#custom-data">custom data section</a> for more information and requirements/restrictions for creating, retrieving, updating and deleting group custom data.</p>

<p><a class="anchor" name="groups-list"></a></p>

<h3><a id="list-groups"></a>List Groups</h3>

<h4>Application Groups</h4>

<p>The application groups endpoint is a <a href="#collections">Collection Resource</a> representing all application-accessible groups. A group is accessible to an application if it, or its directory, is assigned to the application as an account store.</p>

<pre><code>/v1/applications/:applicationUid/groups
</code></pre>

<p>HTTP <code>GET</code> returns a paginated list of links for groups accessible to an application.</p>

<p><strong>Example request:</strong></p>

<pre><code>GET https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups
</code></pre>

<p><strong>Example response:</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/groups"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ"
      "name": "Red Shirts",
      ... remaining Group key/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/sUcKIttrebEcKhgU86Kl0u"
      "name": "Science Officers",
      ... remaining Group key/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Yu8ihas7HOpjHs3uhd7jGd"
      "name": "Security Team",
      ... remaining Group key/value pairs ...
    }
  ]
}
</code></pre>

<h5>Account Groups</h5>

<p>The account <code>groups</code> resource is a <a href="#collections">Collection Resource</a> representing all account-associated groups. A group is associated with an account when an account has been assigned to that group as a member.</p>

<pre><code>/v1/accounts/:accountUid/groups
</code></pre>

<p>HTTP <code>GET</code> returns a paginated list of links for groups for which an account is a member.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ"
      "name": "Red Shirts",
      ... remaining Group key/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/sUcKIttrebEcKhgU86Kl0u"
      "name": "Science Officers",
      ... remaining Group key/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Yu8ihas7HOpjHs3uhd7jGd"
      "name": "Security Team",
      ... remaining Group key/value pairs ...
    }
  ]
}
</code></pre>

<h5>Directory Groups</h5>

<p>The directory <code>groups</code> resource is a <a href="#collections">Collection Resource</a> representing all directory-associated groups. Groups are defined as a subset of members in a directory.</p>

<pre><code>/v1/directories/:directoryUid/groups
</code></pre>

<p>HTTP <code>GET</code> returns a paginated list of links for groups for which an account is a member.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ"
      "name": "Red Shirts",
      ... remaining Group key/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/sUcKIttrebEcKhgU86Kl0u"
      "name": "Science Officers",
      ... remaining Group key/value pairs ...
    },
    {
      "href" : "https://api.stormpath.com/v1/groups/Yu8ihas7HOpjHs3uhd7jGd"
      "name": "Security Team",
      ... remaining Group key/value pairs ...
    }
  ]
}
</code></pre>

<p><a class="anchor" name="groups-search"></a></p>

<h3><a id="search-groups"></a>Search Groups</h3>

<p>Group attributes supported for search:</p>

<ul>
<li>name</li>
<li>description</li>
<li>status</li>
</ul>


<p><strong>Searchable Group Collection Resources</strong></p>

<table>
<thead>
<tr>
<th align="left">Group Collection Resource </th>
<th align="left"> Search Functionality</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">/v1/directories/:directoryId/groups </td>
<td align="left"> A search across groups in the specified directory.</td>
</tr>
<tr>
<td align="left">/v1/applications/:applicationId/groups </td>
<td align="left"> A search across groups accessible to the specified application.</td>
</tr>
<tr>
<td align="left">/v1/accounts/:accountId/groups    </td>
<td align="left"> A search across groups assigned to the specified account.</td>
</tr>
</tbody>
</table>


<p><a class="anchor" name="group-accounts"></a></p>

<h3><a id="group-accounts"></a>Group Accounts</h3>

<p>The Group <code>accounts</code> Collection for a <code>Group</code> Resource represents all accounts that are members of a specific group.</p>

<p><strong>Group Accounts Collection Resource URI</strong></p>

<pre><code>/v1/groups/:groupId/accounts
</code></pre>

<p><a class="anchor" name="group-accounts-search"></a></p>

<h4>Search Group Accounts</h4>

<p>You may search for directories by sending a <code>GET</code> request to your application&rsquo;s <code>accounts</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching directories with your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Account Attributes</h5>

<p>The following <a href="#account-resource">account attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>givenName</code></li>
<li><code>middleName</code></li>
<li><code>surname</code></li>
<li><code>username</code></li>
<li><code>email</code></li>
</ul>


<p>In addition to the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/groups/$GROUP_ID/accounts?q=foo&amp;orderBy=surname&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<p><a class="anchor" name="working-with-group-accounts"></a></p>

<h4>Working With Group Accounts</h4>

<p>Account resources support the full suite of CRUD commands and other interactions. Please see the <a href="#accounts">Accounts section</a> for more information.</p>

<p><a class="anchor" name="group-account-memberships"></a></p>

<h3><a id="account-memberships"></a>Account Memberships</h3>

<p>The <code>accountMemberships</code> Collection for a <code>group</code> Resource represents all account memberships where a specific group is a member. In this case, Account Memberships are simply an alternative, context-specific name for <a href="#group-memberships">Group Memberships</a>.</p>

<p><strong>Account Memberships Collection Resource URI</strong></p>

<pre><code>/v1/groups/:groupId/accountMemberships
</code></pre>

<h4>List Account Memberships</h4>

<p>HTTP <code>GET</code> returns a Collection Resource containing the group memberships to which a specific group is a member.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA/accountMemberships
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8;

{
    "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA/accountMemberships",
    "offset" : 0,
    "limit" : 25,
    "items": [ {
          "href" : "https://api.stormpath.com/v1/groupMemberships/1u86fpQxJkFTfQHm1Hnhpb",
          "account" : {
                "href" : "https://api.stormpath.com/v1/accounts/gSraAOpFS-Savh3h6gFDzQ"
        },
        "group" : {
              "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
        }
    }, {
        "href" : "https://api.stormpath.com/v1/groupMemberships/249Up9ojT6NUNEYocdG4Dj",
        "account" : {
              "href" : "https://api.stormpath.com/v1/accounts/k8idbaXRTSKncv3VLffDNw"
        },
        "group" : {
              "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
        }
    } ]
}
</code></pre>

<p><a class="anchor" name="working-with-group-account-memberships"></a></p>

<h4>Working With Account Memberships</h4>

<p><code>Account Membership</code> is a context-specific alias for a <code>Group Membership</code>.  Group Membership resources support the full suite of CRUD commands and other interactions. Please see the <a href="#group-memberships">Group Memberships section</a> for more information.</p>

<hr />

<p><a class="anchor" name="group-memberships"></a></p>

<h2><a id="group-memberships"></a>Group Memberships</h2>

<p>A <code>Group Membership</code> resource represents the link between an <a href="#accounts">account</a> and a <a href="#groups">group</a>. When an <code>Account</code> is associated with a <code>Group</code> or a <code>Group</code> is associated with an <code>Account</code>, a group membership is created.</p>

<p><a class="anchor" name="group-membership-resource"></a></p>

<h3><a id="group-membership-resource"></a>Group Membership Resource</h3>

<p><strong>Resource URI</strong></p>

<pre><code>v1/groupMemberships/:groupMembershipId
</code></pre>

<p><a class="anchor" name="group-membership-resource-attributes"></a>
<strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a class="anchor" name="group-membership-href"></a><code>href</code> </td>
<td align="left"> The resource fully qualified location URI. </td>
<td align="left"> String </td>
<td align="left"> —</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="group-membership-account"></a><code>account</code> </td>
<td align="left"> A link to the account of the group membership. </td>
<td align="left"> Link </td>
<td align="left"> —</td>
</tr>
<tr>
<td align="left"><a class="anchor" name="group-membership-group"></a><code>group</code> </td>
<td align="left"> A link to the group of the group membership. </td>
<td align="left"> Link </td>
<td align="left"> —</td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>For group memberships, you can:</p>

<ul>
<li><a href="#group-membership-url">Locate a group membership&rsquo;s REST URL</a></li>
<li><a href="#group-membership-create">Create a group membership</a></li>
<li><a href="#group-membership-retrieve">Retrieve a group membership</a></li>
<li><a href="#group-membership-delete">Delete a group membership</a></li>
<li><a href="#group-memberships-list">List group membership resources</a></li>
</ul>


<p><a class="anchor" name="group-membership-url"></a></p>

<h3><a id="locate-a-group-memberships-rest-url"></a>Locate a Group Membership&rsquo;s REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference a group membership using the REST URL or <code>href</code>.</p>

<p>There are multiple ways to find a group membership&rsquo;s <code>href</code> depending on what information you have available:</p>

<ul>
<li>Retrieve a full list of group memberships for an account</li>
<li>Retrieve a full list of group members (as group membership pairings) for a group</li>
</ul>


<p>In all cases, the process is fundamentally the same. Consider the first case as example. If you want to find a specific <code>href</code> for a group mapping on a specific account,  you&rsquo;ll need to search the group memberships for the associated <code>account</code> resource:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts/2dgfmriyAP238bkRB6ISmB/groupMemberships"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
    href: "https://api.stormpath.com/v1/accounts/2dgfmriyAP238bkRB6ISmB/groupMemberships"
    offset: 0
    limit: 25
    items: [1]
      0:  {
        href: "https://api.stormpath.com/v1/groupMemberships/2et4tXeMFFiMiZWUOIvWzj"
      - account: {
            href: "https://api.stormpath.com/v1/accounts/2dgfmriyAP238bkRB6ISmB"
        }
      - group: {
            href: "https://api.stormpath.com/v1/groups/cquoM06qa6pTkk1h2xOeJ"
          }
      }
}
</code></pre>

<p>If you know the name exactly, you can use an <a href="#search-attribute">attribute search</a> (e.g., &ldquo;name=&rdquo;) or, if you only know a small part, you can use a <a href="#search-filter">filter search</a> (e.g., &ldquo;q=My&rdquo;) to narrow down the selection.</p>

<p><a class="anchor" name="group-membership-create"></a></p>

<h3><a id="create-a-group-membership"></a>Create a Group Membership</h3>

<p>To create a group membership you need the account and the group href.</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/groupMemberships
    Content-Type: application/json;charset=UTF-8

{
  "account" : {
      "href" : "https://api.stormpath.com/v1/accounts/gSraAOpFS-Savh3h6gFDzQ"
   },
   "group" : {
       "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
   }
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
    Location: https://api.stormpath.com/v1/groupMemberships/57YZCqrNgrzcIGYs1PfP4F
    Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/groupMemberships/57YZCqrNgrzcIGYs1PfP4F",
  "account" : {
      "href" : "https://api.stormpath.com/v1/accounts/gSraAOpFS-Savh3h6gFDzQ"
   },
   "group" : {
       "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
   }
}
</code></pre>

<p><a class="anchor" name="group-membership-retrieve"></a></p>

<h3><a id="retrieve-a-group-membership"></a>Retrieve a Group Membership</h3>

<p>HTTP <code>GET</code> returns a representation of a <code>groupMembership</code> resource that includes the account and the group hrefs.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/groupMemberships/249Up9ojT6NUNEYocdG4Dj
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8;

{
 "href" : "https://api.stormpath.com/v1/groupMemberships/249Up9ojT6NUNEYocdG4Dj",
 "account" : {
   "href" : "https://api.stormpath.com/v1/accounts/k8idbaXRTSKncv3VLffDNw"
   },
  "group" : {
    "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
   }
}
</code></pre>

<p><a class="anchor" name="group-membership-resources-expand"></a></p>

<h4>Expandable Resources</h4>

<p>When retrieving an application, you can also retrieve one or more of its linked resources by <a href="#links-expansion">expanding them in-line</a> using the <code>expand</code> query parameter.</p>

<p>The following <code>Application</code> attributes are expandable:</p>

<ul>
<li><code>account</code></li>
<li><code>group</code></li>
</ul>


<p>See the <a href="#links-expansion">Link Expansion</a> section for more information on expanding link attributes.</p>

<p><a class="anchor" name="group-membership-delete"></a></p>

<h3><a id="delete-a-group-membership"></a>Delete a Group Membership</h3>

<p>Deleting a group membership completely erases the <code>groupMembership</code> resource from Stormpath. This operation does not delete the group or the account involved in the group membership, only the association between them.</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/groupMemberships/57YZCqrNgrzcIGYs1PfP4F
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<p><a class="anchor" name="group-memberships-list"></a></p>

<h3><a id="list-group-memberships"></a>List Group Memberships</h3>

<p>You can list group memberships by <a href="#group-membership-by-account">account</a> or <a href="#account-membership-by-group">group</a>.</p>

<p><a class="anchor" name="group-membership-by-account"></a></p>

<h4>List Group Memberships For An Account</h4>

<p>The account <code>groupMemberships</code> endpoint is a <a href="#collections">Collection Resource</a> representing all group memberships where the account is involved.</p>

<pre><code>/v1/accounts/:accountId/groupMemberships
</code></pre>

<p>HTTP <code>GET</code> returns a paginated list of the group memberships where the account is involved.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw/groupMemberships
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8;

{
    "href" : "https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw/groupMemberships",
    "offset" : 0,
    "limit" : 25,
    "items" : [ {
          "href" : "https://api.stormpath.com/v1/groupMemberships/36KuRJcsfiHZjCR0Trv4yJ",
          "account" : {
                "href" : "https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw"
        },
        "group" : {
              "href" : "https://api.stormpath.com/v1/groups/tKP_30-9TcCneD3ktBwcig"
        }
    }, {
        "href" : "https://api.stormpath.com/v1/groupMemberships/1kjD3owGFAAzoGhFsO1oLz",
        "account" : {
              "href" : "https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw"
        },
        "group" : {
              "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
        }
    } ]
}
</code></pre>

<p><a class="anchor" name="account-membership-by-group"></a></p>

<h4>List Account Memberships For A Group</h4>

<p>The group <code>accountMemberships</code> endpoint is a [Collection Resource](#collections representing all group memberships where the group is involved.</p>

<pre><code>/v1/groups/:groupId/accountMemberships
</code></pre>

<p>List Group Group Memberships (HTTP GET)</p>

<p>HTTP <code>GET</code> returns a paginated list of the group memberships where the group is involved.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA/accountMemberships
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8;

{
    "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA/accountMemberships",
    "offset" : 0,
    "limit" : 25,
    "items" : [
      {
          "href" : "https://api.stormpath.com/v1/groupMemberships/1u86fpQxJkFTfQHm1Hnhpb",
          "account" : {
              "href" : "https://api.stormpath.com/v1/accounts/gSraAOpFS-Savh3h6gFDzQ"
          },
          "group" : {
              "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
          }
      },
      {
          "href" : "https://api.stormpath.com/v1/groupMemberships/249Up9ojT6NUNEYocdG4Dj",
          "account" : {
              "href" : "https://api.stormpath.com/v1/accounts/k8idbaXRTSKncv3VLffDNw"
          },
          "group" : {
              "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
          }
      }
    ]
}
</code></pre>

<hr />

<p><a class="anchor" name="organizations"></a></p>

<h2><a id="organizations"></a>Organizations</h2>

<p>A <code>Organization</code> is a top-level container for <code>Account Stores</code>.  You can think of an <code>Organization</code> as a tenant for your multi-tenant application.  This is different than your Stormpath <code>Tenant</code>, which represents your tenant in the Stormpath system.  Organizations are powerful because you can group together account stores that represent a tenant.</p>

<p>For example, imagine you have customers in your multi-tenant application. When a customer signs up, may have a very simple user model (one <code>Cloud Directory</code>) or may have a complex user model (multiple directories, for example, one <code>Cloud Directory</code>, one <code>Google App Directory</code>, and a <code>LDAP Directory</code>).  You can model these separate customers in Stormpath to represent their needs for a tenant in your application.</p>

<p>You can think of an <code>Organization</code> as a &lsquo;virtual&rsquo; AccountStore that &lsquo;wraps&rsquo; other <code>Account Stores</code>.  Like other <code>Account Stores</code>, an <code>Organization</code> can be mapped to an <code>Application</code> so that users in the <code>Organization</code> can login to that application.</p>

<p><a class="anchor" name="organization"></a></p>

<h3><a id="organization-resource"></a>Organization Resource</h3>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/organizations/:organizationId
</code></pre>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>accounts</code> </td>
<td align="left"> A link to all accounts that may login to the organization. This is an aggregate view of all accounts in the organization&rsquo;s assigned account stores. </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>accountStoreMappings</code> </td>
<td align="left"> A link to the collection of all account store mappings that represent the organization. The accounts and groups within the mapped account stores are obtainable by the accounts and groups links respectively. </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> A read-only ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>customData</code> </td>
<td align="left"> A link to the organization&rsquo;s <a href="#custom-data">customData</a> resource that you can use to store your own organization-specific custom fields. </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>defaultAccountStoreMapping</code> </td>
<td align="left"> A link to the account store mapping that reflects the default account store where the organization will store newly created accounts. (A POST to /v1/organization/:organizationId/accounts will result in storing the new account in the default account store). A null value disables the organization from directly creating new accounts. </td>
<td align="left"> link </td>
<td align="left"> <code>null</code> or link</td>
</tr>
<tr>
<td align="left"><code>defaultGroupStoreMapping</code> </td>
<td align="left"> A link to the account store mapping that reflects the default group store where the organization will store newly created groups. (A POST to /v1/organizations/:organizationId/groups will result in storing the new group in the default group store). A null value disables the organization from directly creating new groups. </td>
<td align="left"> link </td>
<td align="left"> <code>null</code> or link</td>
</tr>
<tr>
<td align="left"><code>description</code> </td>
<td align="left"> A description of the organization to allow you to put additional information about the organizations </td>
<td align="left"> String </td>
<td align="left"> 0 &lt;= N &lt;= 4000 chars</td>
</tr>
<tr>
<td align="left"><code>groups</code> </td>
<td align="left"> A link to all groups that are accessible to the organization. This is an aggregate view of all groups in the organization’s assigned account stores. </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The read-only organization&rsquo;s fully qualified URL. </td>
<td align="left"> String </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> A read-only ISO-8601 Datetime value that represents when this resource’s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>name</code> </td>
<td align="left"> The name of the organization. Must be unique across all organizations within your Stormpath <a href="#tenants">tenant</a>. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt;= N &lt;= 255 characters. Unique within a tenant</td>
</tr>
<tr>
<td align="left"><code>nameKey</code> </td>
<td align="left"> A name key that represents the organization. Must be unique across all organizations within your Stormpath <a href="#tenants">tenant</a> and must follow DNS label rules.  </td>
<td align="left"> String </td>
<td align="left"> 1 &lt;= N &lt;= 63 characters.  Must consist of only a-z, A-Z, 0-9, and <code>-</code>.  Must not start or end with a hyphen.  Unique constraint is case insensitive (STORMPATH</td>
</tr>
<tr>
<td align="left"><code>status</code> </td>
<td align="left"> Enabled organizations can be used as account stores for applications. Disabled organizations cannot be used for login. </td>
<td align="left"> Enum </td>
<td align="left"> <code>ENABLED</code>, <code>DISABLED</code></td>
</tr>
<tr>
<td align="left"><code>tenant</code> </td>
<td align="left"> A link to the organization&rsquo;s Stormpath tenant </td>
<td align="left"> Link </td>
<td align="left"> &mdash;</td>
</tr>
</tbody>
</table>


<ul>
<li><a href="#organization-url">Locate an organization&rsquo;s REST URL</a></li>
<li><a href="#create-an-organization">Create an organization</a></li>
<li><a href="#retrieve-an-organization">Retrieve an organization</a></li>
<li><a href="#update-an-organization">Update an organization</a></li>
<li><a href="#delete-an-organization">Delete an organization</a></li>
<li><a href="#adding-an-account-store-to-an-organization">Adding an account store to an organization</a></li>
<li><a href="#adding-an-organization-to-an-application-as-an-account-store">Adding an Organization to an Application as an Account Store</a></li>
</ul>


<p><a class="anchor" name="organization-url"></a></p>

<h3><a id="locate-an-organizations-rest-url"></a>Locate an Organization&rsquo;s REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference an organization using its REST URL or href.</p>

<p>In order to locate an organization’s href, you’ll need to first search for the tenant for the specific organization using some information that you have available.</p>

<p>For example, if you want to find the href for an organization named “Finance Organization”, you’ll need to search the tenant for the “Finance Organization” organization resource:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/tenants/23mq7BPIxNgPUPZDwj04SZ/organization?name=Finance%20Organization"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>{
    "href": "https://api.stormpath.com/v1/tenants/7g9HG1YMBX8ohFbu0KAFKR/organizations", 
    "items": [{
            "accountStoreMappings": {
                "href": "https://api.stormpath.com/v1/organizations/1vE9nmaFevbe9OhHSe4PEL/accountStoreMappings"
            }, 
            "createdAt": "2015-09-11T22:20:02.608Z", 
            "customData": {
                "href": "https://api.stormpath.com/v1/organizations/1vE9nmaFevbe9OhHSe4PEL/customData"
            }, 
            "defaultAccountStoreMapping": null, 
            "defaultGroupStoreMapping": null, 
            "description": null, 
            "href": "https://api.stormpath.com/v1/organizations/1vE9nmaFevbe9OhHSe4PEL", 
            "modifiedAt": "2015-09-11T22:20:02.608Z", 
            "name": "Finance Organization", 
            "nameKey": "finance-organization", 
            "status": "ENABLED", 
            "tenant": {
                "href": "https://api.stormpath.com/v1/tenants/7g9HG1YMBX8ohFbu0KAFKR"
            }
        }
    ], 
    "limit": 25, 
    "offset": 0, 
    "size": 3
}
</code></pre>

<h3><a id="create-an-organization"></a>Create an Organization</h3>

<p>For an organization to be an <code>Account Store</code> for an application, you must first create it in Stormpath.  You can create an organization in Stormpath by simply performing an HTTP <code>POST</code>  request to the <code>/v1/organizations</code> endpoint.  This will create a new <code>Organization</code> resource within your Stormpath <code>Tenant</code>.</p>

<p>When you submit the <code>POST</code>, the following attributes are required and must be unique within your <code>Tenant</code>:</p>

<ul>
<li><code>name</code></li>
<li><code>nameKey</code></li>
</ul>


<p>Optional attribute include:</p>

<ul>
<li><code>status</code></li>
<li><code>description</code></li>
<li><code>customData</code></li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>HTTP/1.1 POST 
https://api.stormpath.com/v1/organizations
Content-Type: application/json;charset=UTF-8

{
  "name": "Finance Organization",
  "nameKey": "finance",
  "status": "ENABLED"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD
Content-Type: application/json;charset=UTF-8

{
  "accountStoreMappings": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD/accountStoreMappings"
  }, 
  "createdAt": "2015-09-16T17:45:53.737Z", 
  "customData": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD/customData"
  }, 
  "defaultAccountStoreMapping": null, 
  "defaultGroupStoreMapping": null, 
  "description": null, 
  "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD", 
  "modifiedAt": "2015-09-16T17:45:53.737Z", 
  "name": "Finance Organization", 
  "nameKey": "finance", 
  "status": "ENABLED", 
  "tenant": {
      "href": "https://api.stormpath.com/v1/tenants/7g9HG1YMBX8ohFbu0KAFKR"
  }
}
</code></pre>

<h3><a id="retrieve-an-organization"></a>Retrieve an organization</h3>

<p>After you have created an organization, you may retrieve its contents by sending a <code>GET</code> request to the organization&rsquo;s URL returned in the Location header or href attribute.</p>

<p>If you don’t have the organization’s URL, you can find it by looking it up in the Stormpath Admin Console or by searching your tenant’s organizations (<code>/v1/tenants/:tenantId/organizations</code> for the organization and then using its href.</p>

<p><strong>Example Request</strong></p>

<p>  HTTP/1.1 GET
  <a href="https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD">https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD</a></p>

<p><strong>Example Response</strong></p>

<p>  HTTP/1.1 200 OK
  Content-Type: application/json;charset=UTF-8</p>

<pre><code>{
  "accountStoreMappings": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD/accountStoreMappings"
  }, 
  "createdAt": "2015-09-16T17:45:53.737Z", 
  "customData": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD/customData"
  }, 
  "defaultAccountStoreMapping": null, 
  "defaultGroupStoreMapping": null, 
  "description": null, 
  "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD", 
  "modifiedAt": "2015-09-16T17:45:53.737Z", 
  "name": "Finance Organization", 
  "nameKey": "finance", 
  "status": "ENABLED", 
  "tenant": {
      "href": "https://api.stormpath.com/v1/tenants/7g9HG1YMBX8ohFbu0KAFKR"
  }
}
</code></pre>

<h3><a id="update-an-organization"></a>Update an Organization</h3>

<p>Submit an HTTP <code>POST</code> to an organization&rsquo;s href when you want to change one or more specific organization&rsquo;s attributes. Unspecified attributes are not changed, but at least one attribute must be specified.</p>

<p><strong>Updatable Organization Attributes</strong></p>

<ul>
<li>name</li>
<li>nameKey</li>
<li>description</li>
<li>status</li>
<li>customData</li>
</ul>


<p><strong>Example Request</strong></p>

<pre><code>HTTP/1.1 POST
https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD
Content-Type: application/json;charset=UTF-8

{
"description": "A new description"
}
</code></pre>

<p><strong>Example Response</strong></p>

<p>  HTTP/1.1 200 OK</p>

<pre><code>{
  "accountStoreMappings": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD/accountStoreMappings"
  }, 
  "createdAt": "2015-09-16T17:45:53.737Z", 
  "customData": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD/customData"
  }, 
  "defaultAccountStoreMapping": null, 
  "defaultGroupStoreMapping": null, 
  "description": "A new description", 
  "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD", 
  "modifiedAt": "2015-09-16T17:45:53.737Z", 
  "name": "Finance Organization", 
  "nameKey": "finance", 
  "status": "ENABLED", 
  "tenant": {
      "href": "https://api.stormpath.com/v1/tenants/7g9HG1YMBX8ohFbu0KAFKR"
  }
}
</code></pre>

<h3><a id="delete-an-organization"></a>Delete an Organization</h3>

<p>You can delete an organization by sending an HTTP <code>DELETE</code> request to the organization&rsquo;s <code>href</code> URL.</p>

<div class='docs-warning'><p>Deleting an organization completely erases the organization and any of its related data from Stormpath.  Account Stores mapped to the organization are untouched.</p>
</div>


<p>We recommend that you disable the organization instead of deleting it if you anticipate that you might use the organization again or if you want to retain its data for historical reference.  To disable an organization, you can <a href="#update-an-organization">update the organization</a> and set the <code>status</code> attribute to <code>DISABLED</code></p>

<p>If you wish to delete an organization:</p>

<p><strong>Example Request</strong></p>

<pre><code>HTTP/1.1 DELETE 
https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<h3><a id="adding-an-account-store-to-an-organization"></a>Adding an Account Store to an Organization</h3>

<p>You can think of an <code>Organization</code> as a &lsquo;virtual&rsquo; AccountStore that &lsquo;wraps&rsquo; other <code>Account Stores</code>.  Like other <code>Account Stores</code>, an <code>Organization</code> can be mapped to an <code>Application</code> so that users in the <code>Organization</code> can login to that application.  Before you add an <code>Organization</code> to an <code>Application</code> as an <code>Account Store</code>, you need to add the relevant account stores to your organization.</p>

<p>The object that represents the mapping between an <code>Organization</code> and <code>Account Store</code> is called an <code>Organization Account Store Mapping</code>.</p>

<p>To create an <code>Organization Account Store Mapping</code>, you need to collection a <code>Directory</code> or <code>Group</code> href and the organization&rsquo;s href.   You can create a mapping by <code>POST</code>ing a new AccountStoreMapping resource to the /v1/accountStoreMappings URI. You must specify the application and the account store via their respective hrefs.</p>

<p><strong>Required Attributes</strong></p>

<ul>
<li><code>organization</code>:  an object with a <code>href</code> property specifying the organization&rsquo;s href</li>
<li><code>accountStore</code>: an object with a <code>href</code> property specifying the directory or group&rsquo;s href</li>
</ul>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><code>listIndex</code>: The order when the associated accountStore will be consulted by the organization during an authentication attempt. This is a zero-based index; an account store at listIndex of 0 will be consulted first, followed the account store at listIndex 1, etc. Setting a negative value will default the value to 0, placing it first in the list. A listIndex of larger than the current list size will place the mapping at the end of the list and then default the value to (list size &ndash; 1).</li>
<li><code>isDefaultAccountStore</code>: A true value indicates that new accounts created by the organization&rsquo;s accounts endpoint will be automatically saved this mapping&rsquo;s <code>Directory</code> or <code>Group</code></li>
<li><code>isDefaultGroupStore</code>: A true value indicates that new groups created by the application will be automatically saved to the mapping’s accountStore.  This may only be set true for if the accountStore is a <code>Directory</code></li>
</ul>


<p><strong>Example Request</strong></p>

<p>  HTTP/1.1 POST
  <a href="https://api.stormpath.com/v1/organizationAccountStoreMappings">https://api.stormpath.com/v1/organizationAccountStoreMappings</a>
  Content-Type: application/json</p>

<pre><code>{
  "accountStore": {
      "href": "https://api.stormpath.com/v1/directories/HoYnVyb1fyzfGhoKyXf8Y"
  }, 
  "organization": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD"
  }
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/organizationAccountStoreMappings/2FM1LaTAXBHa5rCZOaPJxs
Content-Type: application/json;charset=UTF-8

{
  "accountStore": {
      "href": "https://api.stormpath.com/v1/directories/HoYnVyb1fyzfGhoKyXf8Y"
  }, 
  "href": "https://api.stormpath.com/v1/organizationAccountStoreMappings/2FM1LaTAXBHa5rCZOaPJxs", 
  "isDefaultAccountStore": false, 
  "isDefaultGroupStore": false, 
  "listIndex": 0, 
  "organization": {
      "href": "https://api.stormpath.com/v1/organizations/63QhzFLc9tg4oTZXm6tADD"
  }
}
</code></pre>

<p>You may use the response’s <code>Location</code> header or the top-level href attribute to further interact with your new <code>Organization Account Store Mapping</code> resource.</p>

<h3><a id="adding-an-organization-to-an-application-as-an-account-store"></a>Adding an Organization to an Application as an Account Store</h3>

<p>In order for accounts in a <code>Organization</code> to be able to login to an application, you must associate or ‘map’ the <code>Organization</code> to the Application. You do this by creating a new <code>AccountStoreMapping</code>resource that references both the <code>Organization</code> and <code>Application</code>.</p>

<p>Information about how to map an Organization to an Application as an AccountStoreMapping can be found <a href="#create-an-account-store-mapping">here</a></p>

<hr />

<p><a class="anchor" name="accounts"></a></p>

<h2><a id="accounts"></a>Accounts</h2>

<p>An <code>Account</code> is a unique identity within a <code>Directory</code>, with a unique username and/or email address. An <code>Account</code> can log in to an <code>Application</code> using either the email address or username associated with it. Accounts can represent your end users (people), but they can also be used to represent services, daemons, processes, or any &ldquo;entity&rdquo; that needs to login to a Stormpath-enabled application.  Additionally, an account may only exist in a single directory and may be in multiple groups owned by that directory.  Accounts may not be assigned to groups within other directories.</p>

<p>It should be noted that the words &lsquo;User&rsquo; and &lsquo;Account&rsquo; usually mean the same thing, but there is a subtle difference that can be important at times:</p>

<ul>
<li>An Account is a unique identity within a Directory. An account can exist in only a single directory but can be a part of multiple groups owned by that directory.</li>
<li>When an account is granted access to an application (by <a href="#account-store-mappings">mapping a Directory or Group</a> that contains the account to the application), it becomes a &lsquo;User&rsquo; of that application.</li>
</ul>


<p>Therefore an Account can be called a &lsquo;User&rsquo; of an application if/when it can login to the application.</p>

<h4>LDAP/AD Accounts</h4>

<p>It should be noted that Accounts that originate in LDAP or Active Directory (AD) are mirrored in Stormpath. You cannot create, update or delete Accounts that originate in an LDAP mirrored directory &ndash; you can only read them or use them for login.  This is because LDAP is the source of &lsquo;truth&rsquo; and Stormpath does not (currently) have write-access to LDAP installations.</p>

<p>You manage LDAP/AD accounts on your primary LDAP/AD installation. LDAP/AD accounts and groups are automatically deleted when:</p>

<ul>
<li>The backing object is deleted from the LDAP/AD directory service.</li>
<li>The backing LDAP/AD object information no longer matches the account filter criteria configured for the agent.</li>
<li>The LDAP/AD directory is deleted.</li>
</ul>


<p><a class="anchor" name="account"></a></p>

<h3><a id="account-resource"></a>Account Resource</h3>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/accounts/:accountId
</code></pre>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>href</code> </td>
<td align="left"> The resource fully qualified location URI </td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="username"></a><code>username</code> </td>
<td align="left"> The username for the account. Must be unique across the owning directory. If not specified, the username will default to the email field. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="email"></a><code>email</code> </td>
<td align="left"> The email address for the account. Must be unique across the owning directory. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="password"></a><code>password</code> </td>
<td align="left"> The password for the account. Only include this attribute if setting or changing the account password. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="fullName"></a><code>fullName</code> </td>
<td align="left"> The full name for the account holder. This is a computed attribute based on the <code>givenName</code>, <code>middleName</code> and <code>surname</code> attributes. It cannot be modified. To change this value, change one of the three respective attributes to trigger a new computed value.</td>
<td align="left"> String </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="givenName"></a><code>givenName</code> </td>
<td align="left"> The given (first) name for the account holder. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="middleName"></a><code>middleName</code> </td>
<td align="left"> The middle (second) name for the account holder. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="surname"></a><code>surname</code> </td>
<td align="left"> The surname (last name) for the account holder. </td>
<td align="left"> String </td>
<td align="left"> 1 &lt; N &lt;= 255 characters</td>
</tr>
<tr>
<td align="left"><a id="status"></a><code>status</code> </td>
<td align="left"> <code>enabled</code> accounts are able to login to their assigned <a href="#Applications">applications</a>, <code>disabled</code> accounts may not login to applications, <code>unverified</code> accounts are disabled and have not verified their email address. </td>
<td align="left"> Enum </td>
<td align="left"> <code>enabled</code>,<code>disabled</code>,<code>unverified</code></td>
</tr>
<tr>
<td align="left"><a id="account-resource-custom-data"></a><code>customData</code> </td>
<td align="left"> A link to the account&rsquo;s <a href="#custom-data">customData</a> resource that you can use to store your own account-specific custom fields. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-resource-groups"></a><code>groups</code> </td>
<td align="left"> A link to the <a href="#Groups">groups</a> that the account belongs to. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-resource-group-memberships"></a><code>groupMemberships</code> </td>
<td align="left"> A link to the group memberships that the account belongs to. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-resource-directory"></a><code>directory</code> </td>
<td align="left"> A link to the account&rsquo;s directory. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-resource-tenant"></a><code>tenant</code> </td>
<td align="left"> A link to the tenant that owns the account&rsquo;s directory. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><a id="account-resource-emailVerificationToken"></a><code>emailVerificationToken</code> </td>
<td align="left"> A link to the account&rsquo;s email verification token.  This will only be set if the account needs to be verified. </td>
<td align="left"> Link </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>For accounts, you can:</p>

<ul>
<li><a href="#accounts-url">Locate an account&rsquo;s REST URL</a></li>
<li><a href="#account-create">Create an account</a></li>
<li><a href="#account-retrieve">Retrieve an account</a></li>
<li><a href="#account-update">Update an account</a>

<ul>
<li><a href="#account-add-group">Assign accounts to groups</a></li>
<li><a href="#account-remove-group">Remove accounts from groups</a></li>
<li><a href="#account-enable">Enable or Disable an account</a></li>
</ul>
</li>
<li><a href="#account-delete">Delete an accounts</a></li>
<li><a href="#custom-data">Manage account-specific custom data</a></li>
<li><a href="#accounts-list">List accounts</a>

<ul>
<li><a href="#accounts-application-accounts-list">List application accounts</a></li>
<li><a href="#accounts-application-group-members">List group members</a></li>
<li><a href="#accounts-application-directory-accounts">List directory members</a></li>
</ul>
</li>
<li><a href="#search-accounts">Search accounts</a></li>
<li><a href="#accounts-workflow">Work with accounts</a>

<ul>
<li><a href="#account-verify-email">Verify an account&rsquo;s email address</a></li>
<li><a href="#accounts-authenticate">Log in (authenticate) an account</a></li>
<li><a href="#accounts-reset">Reset an account password</a></li>
</ul>
</li>
<li><a href="#account-groups">Access an account&rsquo;s groups</a></li>
<li><a href="#account-group-memberships">Manage an account&rsquo;s group memberships</a></li>
</ul>


<p><a class="anchor" name="accounts-url"></a></p>

<h3><a id="locate-an-accounts-rest-url"></a>Locate an Account&rsquo;s REST URL</h3>

<p>In order to locate an account&rsquo;s REST URL, you&rsquo;ll need to first search for the account via either an <a href="#application">application</a> or a <a href="#directory">directory</a> resource using specific information you have available.</p>

<p>For example, if you want to find the <code>href</code> for an account with the username &ldquo;test&rdquo; across an application, you&rsquo;ll need to search the application for the &ldquo;test&rdquo; account object:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/applications/5D1THHV76HO0EXPyxBXO8p/accounts?username=test"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8

{
  "href": "https://api.stormpath.com/v1/applications/5D1THHV76HO0EXPyxBXO8p/accounts?username=test",
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/accounts/WpM9nyZ2TbaEzfbRvLk9KA",
      "username" : "test"
      ... remaining Account name/value pairs ...
    },
  ]
}
</code></pre>

<p>If you know the username exactly, you can use an <a href="#search-attribute">attribute search</a> (e.g., &ldquo;username=&rdquo;) or, if you only know a small part, you can use a <a href="#search-filter">filter search</a> (e.g., &ldquo;q=test&rdquo;) to narrow down the selection.</p>

<p><a class="anchor" name="account-create"></a></p>

<h3><a id="create-an-account"></a>Create an Account</h3>

<p>Because Accounts are &lsquo;owned&rsquo; by Directories, you create new accounts by adding them to a Directory.  You can add an account to a directory directly or you can indirectly add an account to a Directory by <a href="#application-account-register">registering an Account with an Application</a></p>

<p>This section will show examples using a Directory <code>/accounts</code> href, but they will function the same if you use an Application&rsquo;s <code>/accounts</code> href as well.</p>

<div class='docs-note'><p>You may only create accounts for Stormpath-manageed &#8216;Cloud&#8217; directories.  Mirrored accounts from LDAP or Active Directory must be created in the LDAP/AD server and they will be reflected in Stormpath accordingly.  You cannot manually create accounts in a Mirrored directory.</p>
</div>


<p><strong>Directory Accounts Resource URI</strong></p>

<pre><code>/v1/directories/:directoryId/accounts
</code></pre>

<p><strong>Required Attributes</strong></p>

<ul>
<li><a href="#email">email</a></li>
<li><a href="#password">password</a> (see note below)</li>
<li><a href="#givenName">givenName</a></li>
<li><a href="#surname">surname</a></li>
</ul>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#username">username</a></li>
<li><a href="#middleName">middleName</a></li>
<li><a href="#status">status</a></li>
<li><a href="#account-resource-custom-data">customData</a></li>
</ul>


<div class='docs-note'><p>The password in the request is being sent to Stormpath as plain text. This is one of the reasons why Stormpath only allows requests via HTTPS. Stormpath implements the latest password hashing and cryptographic best-practices that are automatically upgraded over time so the developer does not have to worry about this. Stormpath can only do this for the developer if Stormpath receives the plaintext password so we can hash it using these techniques.</p>

<p>Plaintext passwords also allow Stormpath to <a href="#directories-password-restrictions">enforce password restrictions</a> in a configurable manner (e.g., you can configure your directories to reject passwords without mixed case and non-alphanumeric characters.)</p>

<p>Most importantly, Stormpath does not persist nor relay plaintext passwords in any circumstances.</p>

<p>On the client side, then, you do not need to worry about salting or storing passwords at any point; you need only pass them to Stormpath for hashing, salting, and persisting with the appropriate HTTPS API call (e.g., <a href="#account-create">Create An Account</a> or <a href="#account-update">Update An Account</a>).</p>
</div>


<p>Here are some account creation examples:</p>

<ul>
<li><a href="#account-create-simple">Simple Create Account Example</a></li>
<li><a href="#account-create-with-custom-data">Create an Account with Custom Data</a></li>
<li><a href="#account-create-no-email">Create an Account and Suppress Registration Emails</a></li>
<li><a href="#create-an-account-with-an-existing-password-hash">Create an Account with an Existing Password Hash</a></li>
</ul>


<p><a class="anchor" name="account-create-simple"></a>
Simple creation request:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/directories/WpM9nyZ2TbaEzfbRvLk9KA/accounts
Content-Type: application/json;charset=UTF-8

{
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "givenName" : "Jean-Luc",
  "surname" : "Picard",
  "password" : "uGhd%a8Kl!"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "fullName" : "Jean-Luc Picard",
  "givenName" : "Jean-Luc",
  "middleName" : "",
  "surname" : "Picard",
  "status" : "UNVERIFIED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData" 
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/WpM9nyZ2TbaEzfbRvLk9KA"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : {
    "href" : "https://api.stormpath.com/v1/accounts/emailVerificationTokens/4VQxTP5I7Xio03QJTOwQy1"
  }
}
</code></pre>

<p><a class="anchor" name="account-create-with-custom-data"></a></p>

<h4>Create Directory Account with Custom Data</h4>

<p>In addition to the Stormpath account attributes, you may also specify <a href="#account-custom-data">your own custom data</a> by including a &lsquo;customData&rsquo; JSON object:</p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
             "username" : "jlpicard",
             "email" : "capt@enterprise.com",
             "givenName" : "Jean-Luc",
             "middleName" : "",
             "surname" : "Picard",
             "password" : "uGhd%a8Kl!"
             "status" : "ENABLED",
             "customData": {
                 "rank": "Captain",
                 "birthDate": "2305-07-13",
                 "birthPlace": "La Barre, France",
                 "favoriteDrink": "Earl Grey tea"
             }
         }' \
     "https://api.stormpath.com/v1/directories/WpM9nyZ2TbaEzfbRvLk9KA/accounts"
</code></pre>

<p>Once created, you can further modify the custom data resource: delete it, add and remove attributes, etc as necessary.  See the <a href="#account-custom-data">account custom data</a> section for more information on custom data and custom data restrictions.</p>

<p><a class="anchor" name="account-create-no-email"></a></p>

<h4>Create Directory Account and Suppress Registration Email</h4>

<p>If you want to create a directory account and you want to override the directory&rsquo;s account registration workflow email settings, you can specify a <code>registrationWorkflowEnabled=false</code> query parameter:</p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
           "username" : "jlpicard",
           "email" : "capt@enterprise.com",
           "givenName" : "Jean-Luc",
           "middleName" : "",
           "surname" : "Picard",
           "password" : "uGhd%a8Kl!"
           "status" : "ENABLED",
         }' \
     "https://api.stormpath.com/v1/directories/WpM9nyZ2TbaEzfbRvLk9KA/accounts?registrationWorkflowEnabled=false"
</code></pre>

<p><a class="anchor" name="create-an-account-with-an-existing-password-hash"></a></p>

<h4>Create an Account with an Existing Password Hash</h4>

<p>If you are moving from an existing user repository to Stormpath, you may have existing password hashes that you want to reuse to provide a seamless upgrade path for your end users.</p>

<p>Stormpath allows for account creation with a password hash instead of a plain text password.  This works as follows:</p>

<ul>
<li>Create the account specifying the password hash instead of a plain text password</li>
<li>Stormpath will use the password hash to authenticate the account&rsquo;s login attempt</li>
<li>If the login attempt is successful, Stormpath will recreate the password hash using a secure HMAC algorithm.</li>
</ul>


<p>Stormpath does not allow for account creation with ANY password hash, the password hash must follow <a href="https://pythonhosted.org/passlib/modular_crypt_format.html">modular crypt format</a>(MCF), which is a <code>$</code> delimited string.  Stormpath only supports password hashes that use the following algorithms:</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Bcrypt">bcrypt</a>: These password hashes have the identifier <code>$2a$</code>, <code>$2b$</code>, <code>$2x$</code>, <code>$2a$</code></li>
<li><code>stormpath2</code>: A Stormpath specific password hash format that can be generated with common password hash information, such as algorithm, iterations, salt, and the derived cryptographic hash</li>
</ul>


<p><code>stormpath2</code> has format allows for you to derive a MCF hash that Stormpath can read to understand how to recreate the password hash to use during a login attempt. <code>stormpath2</code> hash format is formatted as:</p>

<pre><code>$stormpath2$ALGORITHM_NAME$ITERATION_COUNT$BASE64_SALT$BASE64_PASSWORD_HASH
</code></pre>

<table>
<thead>
<tr>
<th align="left">Property </th>
<th align="left"> Description </th>
<th align="left"> Valid Values</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>ALGORITHM_NAME</code> </td>
<td align="left"> The name of the hashing algorithm used to generate the <code>BASE64_PASSWORD_HASH</code>. </td>
<td align="left"> <code>MD5</code>, <code>SHA-1</code>, <code>SHA-256</code>, <code>SHA-384</code>, <code>SHA-512</code></td>
</tr>
<tr>
<td align="left"><code>ITERATION_COUNT</code> </td>
<td align="left"> The number of iterations executed when generating the <code>BASE64_PASSWORD_HASH</code> </td>
<td align="left"> Integer greater than 0 (1 or more)</td>
</tr>
<tr>
<td align="left"><code>BASE64_SALT</code> </td>
<td align="left"> The salt byte array used to salt the first hash iteration, formatted as a Base64 string. </td>
<td align="left"> Base64 String, if your password hashes do not have salt, you can leave it blank ($stormpath2$ALGORITHM_NAME$ITERATION_COUNT$$BASE64_PASSWORD_HASH)</td>
</tr>
<tr>
<td align="left"><code>BASE64_PASSWORD_HASH</code> </td>
<td align="left"> The computed hash byte array formatted as a Base64 string </td>
<td align="left"> Base64 String</td>
</tr>
</tbody>
</table>


<p>Once you have a <code>bcrypt</code> or <code>stormpath2</code> MCF password hash, you can create the account in Stormpath with the password hash by <code>POST</code>ing the account information to the <code>Directory</code> or <code>Application</code> accounts endpoint and specifying <code>passwordFormat=mcf</code> as a query parameter.</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/directories/WpM9nyZ2TbaEzfbRvLk9KA/accounts?passwordFormat=mcf

{
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "givenName" : "Jean-Luc",
  "surname" : "Picard",
  "password" : "$stormpath2$MD5$1$NzEyN2ZhYzdkZTAyMjJlMGQyMWYxMWRmZmY2YjA1MWI=$K18Ak0YikAFrqgglhIaY5g=="
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "fullName" : "Jean-Luc Picard",
  "givenName" : "Jean-Luc",
  "middleName" : "",
  "surname" : "Picard",
  "status" : "UNVERIFIED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData" 
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/WpM9nyZ2TbaEzfbRvLk9KA"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : {
    "href" : "https://api.stormpath.com/v1/accounts/emailVerificationTokens/4VQxTP5I7Xio03QJTOwQy1"
  }
}
</code></pre>

<p><a class="anchor" name="account-retrieve"></a></p>

<h3><a id="retrieve-an-account"></a>Retrieve an Account</h3>

<p>HTTP <code>GET</code> returns a representation of an <code>account</code> resource that includes the attributes.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "fullName" : "Jean-Luc Picard",
  "givenName" : "Jean-Luc",
  "middleName" : "",
  "surname" : "Picard",
  "status" : "ENABLED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData" 
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/1FaQ6kZxTL4DVJXWeXtUh7"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : null
}
</code></pre>

<p><a class="anchor" name="account-resources-expand"></a></p>

<h4>Expandable Resources</h4>

<p>When retrieving an account, you can also retrieve one or more of its linked resources by <a href="#links-expansion">expanding them in-line</a> using the <code>expand</code> query parameter.</p>

<p>The following <code>Account</code> attributes are expandable:</p>

<ul>
<li><code>customData</code></li>
<li><code>tenant</code></li>
<li><code>directory</code></li>
<li><code>groups</code></li>
<li><code>groupMemberships</code></li>
</ul>


<p>Also, because <code>groups</code> and <code>groupMemberships</code> are <a href="#collections">Collection Resources</a> themselves, you can additionally control <a href="#pagination">pagination</a> for either expanded collection.  For example:</p>

<pre><code>GET https://api.stormpath.com/v1/accounts/WpM9nyZ2TbaEzfbRvLk9KA?expand=tenant,directory,groups(offset:0,limit:50),groupMemberships(offset:0,limit:50)
</code></pre>

<p>See the <a href="#links-expansion">Link Expansion</a> section for more information on expanding link attributes.</p>

<p><a class="anchor" name="account-update"></a></p>

<h3><a id="update-an-account"></a>Update an Account</h3>

<p>Use HTTP <code>POST</code> when you want to change one or more specific attributes of an <code>account</code> resource. Unspecified attributes will not be changed, but at least one attribute must be specified.</p>

<div class='docs-warning'><p>Changes made to an account are immediately reflected in any application that has access to the account (based on applications&#8217; <a href="#account-store-mappings">account store mappings</a>). Be careful updating an account for a single application&#8217;s needs - ensure that the changes are OK for any and all applications that may access the account.</p>
</div>


<p><strong>Optional Attributes</strong></p>

<ul>
<li><a href="#username">username</a></li>
<li><a href="#email">email</a></li>
<li><a href="#password">password</a></li>
<li><a href="#givenName">givenName</a></li>
<li><a href="#middleName">middleName</a></li>
<li><a href="#surname">surname</a></li>
<li><a href="#status">status</a></li>
<li><a href="#account-resource-custom-data">customData</a></li>
</ul>


<div class='docs-note'><p>The password in the request is being sent to Stormpath as plain text. This is one of the reasons why Stormpath only allows requests via HTTPS. Stormpath implements the latest password hashing and cryptographic best-practices that are automatically upgraded over time so the developer does not have to worry about this. Stormpath can only do this for the developer if Stormpath receives the plaintext password so we can hash it using these techniques.</p>

<p>Plaintext passwords also allow Stormpath to <a href="#directories-password-restrictions">enforce password restrictions</a> in a configurable manner (e.g., you can configure your directories to reject passwords without mixed case and non-alphanumeric characters.)</p>

<p>Most importantly, Stormpath does not persist nor relay plaintext passwords in any circumstances.</p>

<p>On the client side, then, you do not need to worry about salting or storing passwords at any point; you need only pass them to Stormpath for hashing, salting, and persisting with the appropriate HTTPS API call (e.g., <a href="#account-create">Create An Account</a> or <a href="#account-update">Update An Account</a>).</p>
</div>


<p>Here are some account update examples:</p>

<ul>
<li><a href="#account-update-simple">Simple Update Account Example</a></li>
<li><a href="#account-create-no-email">Create an Account and suppress registration emails</a></li>
<li><a href="#ChangeAccountPassword">Update an Account&rsquo;s password directly</a></li>
<li><a href="#update-custom-data-embedded">Update an Account and its Custom Data simultaneously</a></li>
</ul>


<p><a class="anchor" name="UpdateAccountName"></a><a class="anchor" name="account-update-simple"></a>
<strong>Example Request to Update the Name</strong></p>

<pre><code>POST https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb
Content-Type: application/json;charset=UTF-8

{
  "username" : "jlpicard",
  "givenName" : "Jean-Luc",
  "surname" : "Picard",
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "fullName" : "Jean-Luc Picard",
  "givenName" : "Jean-Luc",
  "middleName" : "",
  "surname" : "Picard",
  "status" : "ENABLED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData" 
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/1FaQ6kZxTL4DVJXWeXtUh7"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : null
}
</code></pre>

<p><a class="anchor" name="ChangeAccountPassword"></a></p>

<h4>Update an Account&rsquo;s Password Directly</h4>

<p><strong>Example Request to Change an Account Password</strong></p>

<pre><code>POST https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb
Content-Type: application/json;charset=UTF-8

{
  "password" : "L9%hw4c5q"
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA",
  "username" : "jlpicard",
  "email" : "capt@enterprise.com",
  "fullName" : "Jean-Luc Picard",
  "givenName" : "Jean-Luc",
  "middleName" : "",
  "surname" : "Picard",
  "status" : "ENABLED",
  "customData": {
    "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData" 
  },
  "groups" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  },
  "groupMemberships" : {
    "href" : "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groupMemberships"
  },
  "directory" : {
    "href" : "https://api.stormpath.com/v1/directories/1FaQ6kZxTL4DVJXWeXtUh7"
  },
  "tenant" : {
    "href" : "https://api.stormpath.com/v1/tenants/Ad8mIcavSty7XzD-xZdP3g"
  },
  "emailVerificationToken" : null
}
</code></pre>

<p><a class="anchor" name="account-add-group"></a></p>

<h4>Assign an Account to a Group</h4>

<p>If the account is part of a directory containing groups, you can associate the account with a group.</p>

<p>To assign an account to a group:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/groupMemberships
Content-Type: application/json;charset=UTF-8

{
  "account" : {
    "href" : "https://api.stormpath.com/v1/accounts/Gu8oshf7HdsspjHs3uhd7jGd"
  },
  "group" : {
    "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ"
  }
}
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/groupMemberships/cJoiwjorTTmLDDBsf04Abi
Content-Type: application/json;charset=UTF-8;

{
  "href" : "https://api.stormpath.com/v1/groupMemberships/cJoiwjorTTmLDDBsf04Abi",
  "account" : {
    "href" : "https://api.stormpath.com/v1/accounts/Gu8oshf7HdsspjHs3uhd7jGd"
  },
  "group" : {
    "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ"
  }
}
</code></pre>

<p><a class="anchor" name="account-remove-group"></a></p>

<h4>Remove an Account from a Group</h4>

<p>If the account is the member of a group within a directory, you can remove the account from the group by deleting the <code>groupMembership</code> resource that associates the two together:</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/groupMemberships/cJoiwjorTTmLDDBsf04Abi
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<p><a class="anchor" name="account-enable"></a></p>

<h4>Enable or Disable an Account</h4>

<p>Accounts have an &ldquo;status&rdquo; which defines its state in the systems: enabled and disabled. An enabled account can be successfully authenticated if it is assigned to an active account store in an application while a disabled account cannot.</p>

<div class='docs-note'><p>Enabling and disabling accounts for mirrored (LDAP) directories is not available in Stormpath. You manage mirrored (LDAP) accounts on the primary server installation.</p>
</div>


<p>For example, to enable an account:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb
Content-Type: application/json;charset=UTF-8

{
  "status" : "ENABLED"
}
</code></pre>

<p><a class="anchor" name="account-delete"></a></p>

<h3><a id="delete-an-account"></a>Delete an Account</h3>

<p>Deleting an account completely erases the account from the directory and erases all account information from Stormpath.</p>

<div class='docs-warning'><p>Deleting an account permanently removes the account from any application that has access to the account (based on applications&#8217; <a href="#account-store-mappings">account store mappings</a>). Additionally, be careful deleting an account for a single application&#8217;s needs - ensure that the deletion is OK for any and all applications that may access the account.</p>
</div>


<p>To delete an account:</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<h3><a id="account-custom-data"></a>Account Custom Data</h3>

<p>While Stormpath&rsquo;s default <code>Account</code> attributes are useful to many applications, you might want to add your own custom data to a Stormpath account.  If you want, you can store all of your custom account information in Stormpath so you don&rsquo;t have to maintain another separate database to store your specific account data.</p>

<p>Please see the <a href="#custom-data">custom data section</a> for more information and requirements/restrictions for creating, retrieving, updating and deleting account custom data.</p>

<p><a class="anchor" name="accounts-list"></a></p>

<h3><a id="list-accounts"></a>List Accounts</h3>

<p>The <code>accounts</code> resource is a <a href="#collections">Collection Resource</a> that represents all accounts associated with their parent.  There are different endpoints that can list their associated accounts. Using the API, you can access:</p>

<ul>
<li><a href="#application-accounts-list">All accounts of an application</a></li>
<li><a href="#group-accounts">All members of a group</a></li>
<li><a href="#directory-accounts">All accounts/members of a directory</a></li>
</ul>


<h3><a id="search-accounts"></a>Search Accounts</h3>

<p>Account attributes supported for search:</p>

<ul>
<li>givenName</li>
<li>surname</li>
<li>email</li>
<li>username</li>
<li>middleName</li>
<li>status</li>
</ul>


<p><strong>Searchable Account Collection Resources</strong></p>

<table>
<thead>
<tr>
<th align="left">Account Collection Resource </th>
<th align="left"> Search Functionality</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">/v1/directories/:directoryId/accounts </td>
<td align="left"> A search across accounts in the specified directory.</td>
</tr>
<tr>
<td align="left">/v1/applications/:applicationId/accounts </td>
<td align="left"> A search across accounts that are users of the specified application.</td>
</tr>
<tr>
<td align="left">/v1/groups/:groupId/accounts </td>
<td align="left"> A search across accounts in the specified group.</td>
</tr>
</tbody>
</table>


<p><a class="anchor" name="account-verify-email"></a></p>

<h3><a id="verify-an-email-address"></a>Verify An Email Address</h3>

<p>If you want to verify that an account&rsquo;s email address is valid that the account belongs to a real person, Stormpath can help automate this for you, too.</p>

<h4>Understanding The Email Verification Workflow</h4>

<p>This workflow requires 3 parties to be involved: your application end-user, your application, and the Stormpath API server.</p>

<ol>
<li>When the account is created in a Directory that has &ldquo;Verification&rdquo; enabled, Stormpath will email the account email address automatically.</li>
<li>The end-user opens his or her email and clicks the verification link.</li>
<li>With the token from the verification link clicked by the end-user, Your application calls back to the Stormpath API server to complete the process.</li>
</ol>


<p>As mentioned previously, when you create a new account, it is stored in a Directory. If the account is created in a directory with both <a href="#application-account-register">Account Registration</a> and Verification enabled, Stormpath will automatically send a welcome email that contains a verification link to the account&rsquo;s email address on your behalf. If the person reading the email clicks the verification link in the email, the account will then have an <code>ENABLED</code> status and be allowed to login to applications.</p>

<div class='docs-note'><p>Accounts created in a Directory that has the Verification workflow enabled will have an <code>UNVERIFIED</code> status by default. <code>UNVERIFIED</code> is the same as <code>DISABLED</code>, but additionally indicates why the account is disabled. When the email link is clicked, they will have an <code>ENABLED</code> status.</p>
</div>


<h5>The Account Verification Base URL</h5>

<p>It is also expected that the workflow&rsquo;s <code>Account Verification Base URL</code> has been set to a URL that will be processed by your own application web server. This URL should be free of any query parameters, as the Stormpath back-end will append on to the URL a parameter used to verify the email. If this URL is not set, a default Stormpath-branded page will appear which allows the user to complete the workflow.</p>

<div class='docs-note'><p>The <code>Account Verification Base URL</code> defaults to a Stormpath API Sever URL which, while it is functional, is a Stormpath API server web page.  Because it will likely confuse your application end-users if they see a Stormpath web page, we strongly recommended that you specify a URL that points to your web application. Moreover, when specifying the Base URL, ensure it is a Base URL without query parameters</p>
</div>


<p><a class="anchor" name="accounts-verification-configuration"></a></p>

<h4>Configure The Verification Workflow</h4>

<p>This workflow is disabled by default on Directories, but you can enable it, and set up the account verification base URL, easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<h4>Trigger The Verification Email (Create A Token)</h4>

<p>In order to verify an account&rsquo;s email address, an <code>emailVerificationToken</code> must be created for that account. To create this token, you simply create an account in a directory, either programmatically or via a public account creation form of your own design, that has the account registration and verification workflow enabled.</p>

<p>For example, if you were to request the account object for a user who has not yet been verified, you will note that the account <code>status</code> is set to <code>UNVERIFIED</code> and <code>emailVerificationToken</code> will have an <code>href</code>:</p>

<pre><code>{
  href: "https://api.stormpath.com/v1/accounts/6XLbNaUsKm3E0kXMTTr10V",
  username: "testuser",
  email: "test@stormpath.com",
  fullName: "test user",
  givenName: "test",
  surname: "user",
  status: "UNVERIFIED",
  groups: {
    href: "https://api.stormpath.com/v1/accounts/6XLbNaUsKm3E0kXMTTr10V/groups"
  },
  groupMemberships: {
    href: "https://api.stormpath.com/v1/accounts/6XLbNaUsKm3E0kXMTTr10V/groupMemberships"
  },
  directory: {
    href: "https://api.stormpath.com/v1/directories/5D1bvO5To6KQBaGFh793Zz"
  },
  tenant: {
    href: "https://api.stormpath.com/v1/tenants/23mq7BPIxNgPUPZDwj04SZ"
  },
  emailVerificationToken: {
    href: "https://api.stormpath.com/v1/accounts/emailVerificationTokens/6YJv9XBH1dZGP5A8rq7Zyl"
  }
}
</code></pre>

<div class='docs-tip'><p>As an end-developer, all you need to do to create email verification tokens when a new account is created is to <a href="#accounts-verification-configuration">configure the workflow</a> for the appropriate directory.</p>
</div>


<h4>Verifying The Account (Consume The Token)</h4>

<p>When a new account is registered after configuration, either programmatically or through an account creation form in your application, an email verification token is created and Stormpath then automatically sends an email to the user. This email will include a link to the base URL you&rsquo;ve <a href="#accounts-verification-configuration">configured</a> with the following query string parameter:</p>

<pre><code>http://www.yourapplicationurl.com/path/to/validator?sptoken=$VERIFICATION_TOKEN
</code></pre>

<p>The token you capture from the query string is used to form the full <code>href</code> for a special email verification endpoint used to verify the account.</p>

<p><strong>Email Verification Tokens Collection Resource URI</strong></p>

<pre><code>/v1/accounts/emailVerificationsToken/:verificationToken
</code></pre>

<p>To verify the account, you use the token from the query string to form the above URL and <code>POST</code> a body-less request against the fully-qualified end point:</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/accounts/emailVerificationTokens/6YJv9XBH1dZGP5A8rq7Zyl
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  href: "https://api.stormpath.com/v1/accounts/6XLbNaUsKm3E0kXMTTr10V"
}
</code></pre>

<p>If the validation succeeds, you will receive back the <code>href</code> for the <code>account</code> resource which has now been verified. An email confirming the verification will be automatically sent to the account&rsquo;s email address by Stormpath afterwards, and the account will then be able to authenticate successfully.</p>

<p>If the verification token is not found, a <code>404 Not Found</code> is returned with an <a href="#errors">error payload</a> explaining why the attempt failed:</p>

<p><strong>Example Email Verification Failure Response</strong></p>

<pre><code>HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8;

{
  status: 404
  code: 404
  message: "The requested resource does not exist."
  developerMessage: "The requested resource does not exist."
  moreInfo: "mailto:support@stormpath.com"
}
</code></pre>

<p><a class="anchor" name="accounts-authenticate"></a></p>

<h3><a id="authenticate-an-account"></a>Authenticate An Account</h3>

<p>After an account has been created, you can authenticate an account given an input of a username or email and a password from the end-user.  When authentication occurs, you are authenticating a user within a specific application against the application&rsquo;s account stores. That being said, the <code>application</code> resource is the starting point for authentication attempts.</p>

<p>Once you have the application resource you may attempt authentication by sending a &lsquo;POST&rsquo; request to the application&rsquo;s <code>loginAttempts</code> endpoint and providing a base64 encoded username and password pair that is seperated with a colon (for example &ndash; testuser:testpassword).  Stormpath requires that the username and password are base64 encoded so these values are not passed as clear text.</p>

<p><strong>Example Request</strong></p>

<pre><code>POST https://api.stormpath.com/v1/applications/WpM9nyZ2TbaEzfbRvLk9KA/loginAttempts
Content-Type: application/json;charset=UTF-8

{
   "type": "basic",
   "value": "anNtaXRoOmNoYW5nZW1l"
}
</code></pre>

<p><strong>Example Successful Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "account": {
    "href" : "https://api.stormpath.com/v1/accounts/5BedLIvyfLjdKKEEXAMPLE"
  }
}
</code></pre>

<p>For more information on working with applications and authentication, refer to the <a href="#application-account-authc">Log in (Authenticate) an Account</a> section of this guide.</p>

<p><a class="anchor" name="accounts-reset"></a></p>

<h3><a id="reset-an-accounts-password"></a>Reset An Account&rsquo;s Password</h3>

<p>This is a self-service password reset workflow.  The account is sent an email with a secure link.  The person owning the account can click on the link and be shown a password reset form to reset their password.  This is strongly recommended to reduce support requests to your application team as well as to reduce your exposure to account passwords for added security.</p>

<p>The password reset workflow involves changes to an account at an application level, and as such, this workflow relies on the <code>application</code> resource as a starting point. For more information on working with this workflow via REST after they have already been configured, refer to the <a href="#application-password-reset">Working With Applications</a> section of this guide.</p>

<p>This workflow is disabled by default for accounts, but you can enable it easily in the Stormpath Admin Console UI. Refer to the <a href="https://stormpath.com/docs/console/product-guide#!ManageWorkflowAutomation">Stormpath Admin Console product guide</a> for complete instructions.</p>

<div class='docs-note'><p>Workflows are only available on cloud directories and only configurable using the Stormpath Admin Console.  They are not currently configurable via the REST API. Also, the Stormpath Administrator directory&#8217;s automated workflows cannot be altered.</p>
</div>


<p><a class="anchor" name="account-groups"></a></p>

<h3><a id="account-groups"></a>Account Groups</h3>

<p>The account&rsquo;s <code>groups</code> resource is a <a href="#collections">Collection Resource</a> which represents all groups where a specific account is a member.</p>

<p><strong>Resource URI</strong></p>

<pre><code>/v1/accounts/:accountId/groups
</code></pre>

<p><a class="anchor" name="list-account-groups"></a></p>

<h4>List Account Groups</h4>

<p>HTTP <code>GET</code> returns a Collection Resource containing links for all <a href="#groups">groups</a> where a specific account is a member.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/groups"
  "offset": 0,
  "limit": 25,
  "items" : [
    {
      "href" : "https://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ"
      "name": "Red Shirts",
      "description": "",
      "status": "ENABLED",
      "directory": {
        "href": "http://api.stormpath.com/v1/directories/1FaQ6kZxTL4DVJXWeXtUh7"
      },
      "tenant": {
        "href": "http://api.stormpath.com/v1/tenants/tqjB6LiESGO00qvC5dkNw"
      },
      "accounts": {
        "href": "http://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accounts"
      },
      "accountMemberships": {
        "href": "http://api.stormpath.com/v1/groups/ZgoHUG0oSoVNeU0K4GZeVQ/accountMemberships"
      }
    },
    ... additional Account resources ...
  ]
}
</code></pre>

<p><a class="anchor" name="search-account-groups"></a></p>

<h4>Search Account Groups</h4>

<p>You may search for directories by sending a <code>GET</code> request to your application&rsquo;s <code>accounts</code> Collection Resource <code>href</code> URL using <a href="#search">search query parameters</a>.  Any matching directories with your tenant will be returned as a <a href="#pagination">paginated</a> list.</p>

<h5>Searchable Group Attributes</h5>

<p>The following <a href="#account-resource">group attributes</a> are searchable via <a href="#search-filter">filter</a> and <a href="#search-attribute">attribute</a> searches:</p>

<ul>
<li><code>name</code></li>
<li><code>description</code></li>
<li><code>status</code></li>
</ul>


<p>In addition to the <a href="#search">search query parameters</a>, you may also use <a href="#pagination">pagination</a> and <a href="#sorting">sorting</a> query parameters to customize the paginated response.  For example:</p>

<pre><code>curl -u $API_KEY_ID:$API_KEY_SECRET \
     -H "Accept: application/json" \
     "https://api.stormpath.com/v1/accounts/$ACCOUNT_ID/groups?q=foo&amp;orderBy=name&amp;offset=0&amp;limit=50"
</code></pre>

<!-- {: .bash} -->


<p><a class="anchor" name="working-with-account-groups"></a></p>

<h4>Working With Account Groups</h4>

<p>Group resources support the full suite of CRUD commands and other interactions. Please see the <a href="#groups">Groups section</a> for more information.</p>

<p><a class="anchor" name="account-group-memberships"></a></p>

<h3><a id="account-group-memberships"></a>Account Group Memberships</h3>

<p>An account&rsquo;s <code>groupMemberships</code> resource is a <a href="#collections">Collection Resource</a> which represents all group memberships where a specific account is a member.</p>

<p><strong>Account Group Membership Collection Resource URI</strong></p>

<pre><code>/v1/accounts/:accountId/groupMemberships
</code></pre>

<p><a class="anchor" name="list-account-group-memberships"></a></p>

<h4>List Account Group Memberships</h4>

<p>HTTP <code>GET</code> returns a Collection Resource containing the group memberships to which a specific account is a member.</p>

<p><strong>Example Request</strong></p>

<pre><code>GET https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw/groupMemberships
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8;

{
    "href" : "https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw/groupMemberships",
    "offset" : 0,
    "limit" : 25,
    "items": [
      {
        "href" : "https://api.stormpath.com/v1/groupMemberships/36KuRJcsfiHZjCR0Trv4yJ",
        "account" : {
          "href" : "https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw"
        },
        "group" : {
          "href" : "https://api.stormpath.com/v1/groups/tKP_30-9TcCneD3ktBwcig"
        }
      },
      {
        "href" : "https://api.stormpath.com/v1/groupMemberships/1kjD3owGFAAzoGhFsO1oLz",
        "account" : {
          "href" : "https://api.stormpath.com/v1/accounts/MvdTIJakRO2Ry8c5z5itWw"
        },
        "group" : {
          "href" : "https://api.stormpath.com/v1/groups/smJGMBMpQ_-FKvMgCRTdVA"
        }
      }
    ]
}
</code></pre>

<p><a class="anchor" name="working-with-account-group-memberships"></a></p>

<h4>Working With Account Group Memberships</h4>

<p>Groups Membership resources support the full suite of CRUD commands and other interactions. Please see the <a href="#group-memberships">Group Memberships section</a> for more information.</p>

<hr />

<h2><a id="custom-data"></a>Custom Data</h2>

<p>Stormpath resources have predefined fields that are useful to many <code>Applications</code>, but you are likely to have your own requirements and custom fields that you need to associate with Stormpath resources. For this reason, <code>Accounts</code>, <code>Groups</code>, <code>Applications</code>, <code>Directories</code> and <code>Tenant</code> resources support a linked <code>customData</code> resource that you can use for your own needs.</p>

<p>The <code>customData</code> resource is a schema-less JSON object (aka &lsquo;map&rsquo;, &lsquo;associative array&rsquo;, or &lsquo;dictionary&rsquo;) that allows you to specify whatever name/value pairs you wish.</p>

<p>The <code>customData</code> resource <code>href</code> is always the Stormpath resource <code>href</code> with a <code>/customData</code> suffix:</p>

<p><a class="anchor" name="account-custom-data-resource-uri"></a>
<strong>Account Custom Data Resource URI</strong></p>

<pre><code>/v1/accounts/:accountId/customData
</code></pre>

<p><a class="anchor" name="group-custom-data-resource-uri"></a>
<strong>Group Custom Data Resource URI</strong></p>

<pre><code>/v1/groups/:groupId/customData
</code></pre>

<p><a class="anchor" name="application-custom-data-resource-uri"></a>
<strong>Application Custom Data Resource URI</strong></p>

<pre><code>/v1/applications/:applicationId/customData
</code></pre>

<p><a class="anchor" name="directory-custom-data-resource-uri"></a>
<strong>Directory Custom Data Resource URI</strong></p>

<pre><code>/v1/directories/:directoryId/customData
</code></pre>

<p><a class="anchor" name="tenant-custom-data-resource-uri"></a>
<strong>Tenant Custom Data Resource URI</strong></p>

<pre><code>/v1/tenants/:tenantId/customData
</code></pre>

<p>In addition to your custom name/value pairs, a <code>customData</code> resource will always contain 3 reserved read-only fields:</p>

<ul>
<li><code>href</code>: The fully qualified location of the custom data resource</li>
<li><code>createdAt</code>: the UTC timestamp with millisecond precision of when the resource was created in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string, for example <code>2017-04-01T14:35:16.235Z</code></li>
<li><code>modifiedAt</code>: the UTC timestamp with millisecond precision of when the resource was last updated in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string.</li>
</ul>


<p>You can store an unlimited number of additional name/value pairs in the <code>customData</code> resource, with the following restrictions:</p>

<ul>
<li>The total storage size of a single <code>customData</code> resource cannot exceed 10 MB (megabytes).  <strong>The <code>href</code>, <code>createdAt</code> and <code>modifiedAt</code> field names and values do not count against your resource size quota.</strong></li>
<li>Field names must:

<ul>
<li>be 1 or more characters long, but less than or equal to 255 characters long (1 &lt;= N &lt;= 255).</li>
<li>contain only alphanumeric characters <code>0-9A-Za-z</code>, underscores <code>_</code> or dashes <code>-</code> but cannot start with a dash <code>-</code>.</li>
<li>may not equal any of the following reserved names: <code>href</code>, <code>createdAt</code>, <code>modifiedAt</code>, <code>meta</code>, <code>spMeta</code>, <code>spmeta</code>, <code>ionmeta</code>, or <code>ionMeta</code>.</li>
</ul>
</li>
</ul>


<div class='docs-note'><p>While the <code>meta</code>, <code>spMeta</code>, <code>spmeta</code>, <code>ionmeta</code>, or <code>ionMeta</code> fields are not returned in the response today, they might be used in the future.  As is the case with all JSON use cases, ensure your REST client will not break if it encounters one of these (or other fields it does not recognize) at some time in the future.</p>
</div>


<p>For Custom Data, you can:</p>

<ul>
<li><a href="#create-custom-data">Create Custom Data</a></li>
<li><a href="#retrieve-custom-data">Retrieve Custom Data</a></li>
<li><a href="#update-custom-data">Update Custom Data</a></li>
<li><a href="#update-custom-data">Delete All Custom Data</a></li>
<li><a href="#delete-custom-data-field">Delete a single Custom Data field</a></li>
</ul>


<p><a class="anchor" name="create-custom-data"></a></p>

<h3><a id="create-custom-data"></a>Create Custom Data</h3>

<p>Whenever you create an Stormpath resource, an empty <code>customData</code> resource is created for that resource automatically &ndash; you do not need to explicitly execute a request to create it.</p>

<p>However, it is often useful to populate custom data at the same time you create a resource.  You can do this by embedding the <code>customData</code> directly in the resource. For example:</p>

<p><strong>Example Create Account with Custom Data</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
           "username" : "jlpicard",
           "email" : "capt@enterprise.com",
           "givenName" : "Jean-Luc",
           "middleName" : "",
           "surname" : "Picard",
           "password" : "uGhd%a8Kl!"
           "status" : "ENABLED",
           "customData": {
             "rank": "Captain",
             "birthDate": "2305-07-13",
             "birthPlace": "La Barre, France",
             "favoriteDrink": "Earl Grey tea"
           }
         }' \
 "https://api.stormpath.com/v1/directories/exampleDirectoryId/accounts"
</code></pre>

<p><strong>Example Create Group with Custom Data</strong></p>

<pre><code> curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
      -H "Accept: application/json" \
      -H "Content-Type: application/json" \
      -d '{
            "name" : "Starfleet Officers",
            "customData": {
              "headquarters": "San Francisco, CA"
            }
          }' \
  "https://api.stormpath.com/v1/directories/exampleDirectoryId/groups"
</code></pre>

<p>Similar to <code>Accounts</code> and <code>Groups</code>, <code>Applications</code> / <code>Directories</code> can have custom data assigned on creation by specifying <code>customData</code> on the request.</p>

<p><a class="anchor" name="retrieve-custom-data"></a></p>

<h3><a id="retrieve-custom-data"></a>Retrieve Custom Data</h3>

<p>A common way to retrieve an account or group&rsquo;s custom data is to use <a href="#links-expansion">link expansion</a> and retrieve the custom data at the same time as when you retrieve an account or group.</p>

<p><strong>Example: Retrieve an Account with its Custom Data</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/accounts/exampleAccountId?expand=customData
</code></pre>

<p><strong>Example: Retrieve a Group with its Custom Data</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/groups/exampleGroupId?expand=customData
</code></pre>

<p><strong>Example: Retrieve an Application with its Custom Data</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/applications/exampleApplicationId?expand=customData
</code></pre>

<p><strong>Example: Retrieve a Directory with its Custom Data</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/directories/exampleDirectoryId?expand=customData
</code></pre>

<p><strong>Example: Retrieve a Tenant with its Custom Data</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/tenants/exampleTenantId?expand=customData
</code></pre>

<p>You can also of course return a resources custom data resource by executing a <code>GET</code> request directly to the resource Custom Data Resource URI.</p>

<p><strong>Example Retrieve Account Custom Data Request</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/accounts/exampleAccountId/customData
</code></pre>

<p><strong>Example Retrieve Group Custom Data Request</strong></p>

<pre><code>curl --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/groups/exampleGroupId/customData
</code></pre>

<p>Similar to <code>Accounts</code> and <code>Groups</code>, <code>Applications</code> / <code>Directories</code> / <code>Tenants</code> can have custom data retrieved by the Custom Data Resource URI.</p>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData",
  "createdAt": "2014-07-16T13:48:22.378Z",
  "modifiedAt": "2014-07-16T13:48:22.378Z",
  "birthDate": "1985-07-15",
  "favoriteColor": "blue",
}
</code></pre>

<p><a class="anchor" name="update-custom-data"></a></p>

<h3><a id="update-custom-data"></a>Update Custom Data</h3>

<p>You may update an account or group&rsquo;s custom data, in one of two ways:</p>

<ul>
<li>by <a href="#update-custom-data-directly">updating the customData resource directly</a>, independent of the group or account, or</li>
<li>by <a href="#update-custom-data-embedded">embedding customData changes in an account or group update request</a></li>
</ul>


<p><a class="anchor" name="update-custom-data-directly"></a></p>

<h4>Update Custom Data Directly</h4>

<p>The first way to update an resource&rsquo;s custom data is by <code>POST</code>ing changes directly to the custom data&rsquo;s <code>href</code>.  This allows you to interact with the customData resource directly, without having to do so &lsquo;through&rsquo; a resource request.</p>

<p>In the following example request, we&rsquo;re interacting with a <code>customData</code> resource directly, and we&rsquo;re changing the value of an existing field named <code>favoriteColor</code> and we&rsquo;re adding a brand new field named <code>hobby</code>:</p>

<p><strong>Example Account Custom Data Update</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "favoriteColor": "red",
           "hobby": "Kendo"
         }' \
  "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb/customData"
</code></pre>

<p>The response will contain the resource with the latest values:</p>

<pre><code>HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8;

{
  "href": "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02AbA/customData",
  "createdAt": "2014-07-16T13:48:22.378Z",
  "modifiedAt": "2014-07-16T13:48:22.378Z",
  "birthDate": "1985-07-15",
  "favoriteColor": "red",
  "hobby": "Kendo"
}
</code></pre>

<p>As you can see, the response contains the &lsquo;merged&rsquo; representation of what was already on the server plus what was sent in the request, and at no point did we need to interact with the account directly.</p>

<p><a class="anchor" name="update-custom-data-embedded"></a></p>

<h4>Update Custom Data as part of a Resource Request</h4>

<p>Sometimes it is helpful to update a resource&rsquo;s <code>customData</code> as part of an update request for the account or group.  In this case, just submit customData changes in an embedded <code>customData</code> field embedded in the resource&rsquo;s request data.  For example:</p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
           "status" : "ENABLED",
           "customData": {
               "favoriteColor": "blue",
               "hobby": "Kendo"
           }
         }' \
    "https://api.stormpath.com/v1/accounts/exampleAccountId"
</code></pre>

<p>In the above example, we&rsquo;re performing 3 modifications in one request:</p>

<ol>
<li>We&rsquo;re modifying the account&rsquo;s <code>status</code> attribute and setting it to <code>ENABLED</code>.  We&rsquo;re <em>also</em></li>
<li>Changing the existing customData <code>favoriteColor</code> field value to <code>blue</code> (it was previously <code>red</code>) and</li>
<li>Adding a new customData <code>hobby</code> field with a value of <code>Kendo</code>.</li>
</ol>


<p>This request modifies both the account resource <em>and</em> that account&rsquo;s custom data in a single request.</p>

<p>The same simultaneous update behavior may be performed for <code>Group</code>, <code>Application</code>, and <code>Directory</code> updates as well.</p>

<p><a class="anchor" name="delete-custom-data"></a></p>

<h3><a id="delete-custom-data"></a>Delete Custom Data</h3>

<p>You may delete all of an resource&rsquo;s custom data by sending a <code>DELETE</code> request to the resource&rsquo;s customData <code>href</code>:</p>

<p><strong>Example: Delete all of an Account&rsquo;s Custom Data</strong></p>

<pre><code>curl -X DELETE --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/accounts/exampleAccountId/customData
</code></pre>

<p><strong>Example: Delete all of a Group&rsquo;s Custom Data</strong></p>

<pre><code>curl -X DELETE --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET https://api.stormpath.com/v1/groups/exampleGroupId/customData
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<p>This will delete all of the respective resource&rsquo;s custom data fields, but it leaves the <code>customData</code> placeholder in the account or group resource.  You cannot delete the <code>customData</code> resource entirely &ndash; it will be automatically permanently deleted when the account or group is deleted.</p>

<p><a class="anchor" name="delete-account-custom-data-field"></a></p>

<h3><a id="delete-custom-data-field"></a>Delete Custom Data Field</h3>

<p>You may also delete an individual custom data field entirely.</p>

<p>To understand field deletion, we should have a quick reminder about JSON <code>null</code> values.  <code>null</code> is a valid value for JSON fields and may be specified.  For example:</p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json;charset=UTF-8" \
     -d '{
           "favoriteColor": null
         }' \
  "https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb/customData"
</code></pre>

<p>This request is valid and indicates that the <code>favoriteColor</code> field still exists on the customData resource, and it is a meaningful field, it just does not currently have a value (maybe it will be populated later).</p>

<p>Because <code>null</code> is an important and often useful value for JSON data, then, we can&rsquo;t delete a field (remove it entirely from the customData resource) by simply setting it to <code>null</code>.</p>

<p>Therefore, to delete a customData field, we must send an explicit <code>DELETE</code> request to an href representing the exact field to delete, using the following resource URI:</p>

<p><strong>Example Account Custom Data Field Resource URI</strong></p>

<pre><code>https://api.stormpath.com/v1/accounts/:accountId/customData/:fieldName
</code></pre>

<p>These URIs only supports <code>DELETE</code> requests and can similarly be deleted on <code>Group</code>, <code>Application</code>, <code>Directory</code> and <code>Tenant</code> custom data fields.</p>

<p><strong>Example Request</strong></p>

<pre><code>DELETE https://api.stormpath.com/v1/accounts/cJoiwcorTTmkDDBsf02bAb/customData/favoriteColor
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 204 No Content
</code></pre>

<p>This request would remove the <code>favoriteColor</code> field entirely from the customData resource.  The next time the resource is <a href="#retrieve-custom-data">retrieved</a>, the field will be missing entirely.</p>

<hr />

<p><a class="anchor" name="integration-google"></a></p>

<h2><a id="integrating-with-google"></a>Integrating with Google</h2>

<p>Stormpath supports accessing accounts from a number of different locations including Google.  Google uses OAuth 2.0 protocol for authentication / authorization and Stormpath can leverage their authorization codea (or access tokens) to return an <code>Account</code> for a given code.</p>

<p>The steps to enable this functionality into your application include:</p>

<ul>
<li><a href="#creating-a-google-directory">Create a Google Directory</a></li>
<li>Create an <code>Account Store Mapping</code> between a Google Directory and your <code>Application</code></li>
<li><a href="#accessing-accounts-with-google-authorization-codes-or-an-access-tokens">Accessing Accounts with Google Authorization Codes or an Access Tokens</a></li>
</ul>


<p>Google Directories follow behavior similar to <a href="#directory-mirror">mirror directories</a>, but have a <code>Provider</code> resource that contains information regarding the Google application that the directory is configured for.</p>

<h3><a id="google-provider-resource"></a>Google Provider Resource</h3>

<p>A <code>provider</code> resource holds specific information needed for working with a Google Directory.  It is important to understand the format of the provider resource when creating and updating a Google Directory.</p>

<p>A provider resource can be obtained by accessing the directory&rsquo;s provider with an HTTP <code>GET</code> as follows:</p>

<p>Example Request</p>

<pre><code>GET https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/provider
</code></pre>

<p>Example Response</p>

<pre><code>{
    "clientId": "501417", 
    "clientSecret": "4913953281ec6bb109", 
    "redirectUri": "https://myapp.com/google/authentication"
    "createdAt": "2014-03-31T21:01:34.631Z", 
    "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/provider", 
    "modifiedAt": "2014-03-31T21:01:34.643Z", 
    "providerId": "google"
}
</code></pre>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>clientId</code> </td>
<td align="left"> The App ID for your Google application </td>
<td align="left"> String </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>clientSecret</code> </td>
<td align="left"> The App Secret for your Google application </td>
<td align="left"> String </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>redirectUri</code> </td>
<td align="left"> The redirection Uri for your Google application </td>
<td align="left"> String </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>providerId</code> </td>
<td align="left"> The provider ID is the Stormpath ID for the Directory&rsquo;s account provider </td>
<td align="left"> String </td>
<td align="left"> &lsquo;google&rsquo;</td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>In addition to your application specific attributes, a <code>Provider</code> resource will always contain 3 reserved read-only fields:</p>

<ul>
<li><code>href</code> : The fully qualified location of the custom data resource</li>
<li><code>createdAt</code> : the UTC timestamp with millisecond precision of when the resource was created in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string</li>
<li><code>modifiedAt</code> : the UTC timestamp with millisecond precision of when the resource was created in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string</li>
</ul>


<h3><a id="creating-a-google-directory"></a>Creating a Google Directory</h3>

<p>Creating a Google Directory requires that you gather some information beforehand from Google&rsquo;s Developer Console regarding your application.</p>

<ul>
<li>Client ID</li>
<li>Client Secret</li>
<li>Redirect URI</li>
</ul>


<p>Creating a Google Directory is very similar to <a href="#create-a-directory">creating a directory</a> within Stormpath by making a HTTP <code>POST</code> request to the <code>/v1/directories</code> endpoint.  For a Google Directory to be configured correctly, you must specify the correct <code>Provider</code> information.</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
          "name" : "my-google-directory",
          "description" : "A Google directory",
          "provider": {
            "providerId": "google",
            "clientId":"857385-m8vk0fn2r7jmjo.apps.googleusercontent.com",
            "clientSecret":"ehs7_-bA7OWQSQ4",
            "redirectUri":"https://myapplication.com/authenticate"
          }
        }' \
 "https://api.stormpath.com/v1/directories?expand=provider"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
Content-Type: application/json;charset=UTF-8;

{
    "accounts": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/accounts"
    }, 
    "description": "A Google directory", 
    "groups": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups"
    }, 
    "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q", 
    "name": "my-google-directory", 
    "provider": {
        "clientId": "857385-m8vk0fn2r7jmjo.apps.googleusercontent.com", 
        "clientSecret": "ehs7_-bA7OWQSQ4", 
        "createdAt": "2014-03-31T23:47:05.576Z", 
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/provider", 
        "modifiedAt": "2014-03-31T23:47:05.592Z", 
        "providerId": "google", 
        "redirectUri": "https://myapplication.com/authenticate"
    }, 
    "status": "ENABLED", 
    "tenant": {
        "href": "https://api.stormpath.com/v1/tenants/bckhcGMXQDujIXpbCDRb2Q"
    }
}
</code></pre>

<p>After the Google Directory has been created, it needs to be <a href="#application-account-store-mappings">mapped with an application as an account store</a>. The Google Directory cannot be a default account store or a default group store.  Once the directory is mapped as an account store for an application, you are ready to access <code>Accounts</code> with Google Authorization Codes.</p>

<h3><a id="accessing-accounts-with-google-authorization-codes-or-an-access-tokens"></a>Accessing Accounts with Google Authorization Codes or an Access Tokens</h3>

<p>To access or create an account in an already created Google Directory, it is required to gather a Google Authorization Code on behalf of the user.  This requires leveraging Google&rsquo;s OAuth 2.0 protocol and the user&rsquo;s consent for your application&rsquo;s permissions.</p>

<p>Once the Authorization Code is gathered, you can get or create the <code>Account</code> by HTTP <code>POST</code>ing to the <code>Application</code> accounts collection and specifying the <code>providerData</code> JSON object.  The <code>providerData</code> JSON object specifies the type of provider and the authorization code as follows:</p>

<pre><code>{
  "providerId": "google",
  "code": "%ACCESS_CODE_FROM_GOOGLE%"
}
</code></pre>

<p>The following is how you use <code>providerData</code> to get an <code>Account</code> for a given authorization code:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
            "providerData": {
              "providerId": "google",
              "code": "4/2Dz0r7r9oNBE9dFD-_JUb.suCu7uj8TEnp6UAPm0"
            }
          }' \
 "https://api.stormpath.com/v1/applications/24mp4us71ntza6lBwlu/accounts"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9
Content-Type: application/json;charset=UTF-8;

{
    "customData": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/customData"
    },
    "directory": {
        "href": "https://api.stormpath.com/v1/directories/U0HJ7YcCeMpRfMcRT8ph"
    },
    "email": "testuser@gmail.com",
    "emailVerificationToken": null,
    "fullName": "Test User",
    "givenName": "Test",
    "groupMemberships": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/groupMemberships"
    },
    "groups": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/groups"
    },
    "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9",
    "middleName": null,
    "providerData": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/providerData"
    },
    "status": "ENABLED",
    "surname": "User",
    "tenant": {
        "href": "https://api.stormpath.com/v1/tenants/GPpLzIzYkOO68I9i4dx"
    },
    "username": "testuser"
}
</code></pre>

<div class='docs-note'><p>The HTTP Status code when accessing an account based on a Google Authorization Code will denote if the account was created (201) or if it already existed in the Google Directory (200)</p>
</div>




<div class='docs-note'><p>To <a href="#link-expansion">expand</a> the <code>providerData</code> to get the Access Token for the Account in one HTTP request, add <code>expand=providerData</code> to the URL query parameters.</p>
</div>


<p>Once an <code>Account</code> is retreived, Stormpath maps common fields for the Google User to the  Account.  The access token and the refresh token for any additional calls in the <code>providerData</code> resource and can be retreived by:</p>

<pre><code>GET https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/providerData
</code></pre>

<p>The returned <code>providerData</code> will include:</p>

<pre><code>{
  "accessToken": "y29.1.AADN_Xo2hxQflWwsgCSK-WjSw1mNfZiv4", 
  "createdAt": "2014-04-01T17:00:09.154Z", 
  "href": "https://api.stormpath.com/v1/accounts/ciYmtETytH0tbHRBas1D5/providerData", 
  "modifiedAt": "2014-04-01T17:00:09.189Z", 
  "providerId": "google", 
  "refreshToken": "1/qQTS638g3ArE4U02FoiXL1yIh-OiPmhc"
}
</code></pre>

<div class='docs-note'><p>The <code>accessToken</code> can also be passed as a field for the <code>providerData</code> to access the account once it is retrieved</p>

<pre><code>POST https://api.stormpath.com/v1/applications/24mp4us71ntza6lBwlu/accounts
Content-Type: application/json;charset=UTF-8

{
  providerData: {
    "providerId": "google",
    "accessToken":"y29.1.AADN_Xo2hxQflWwsgCSK-WjSw1mNfZiv4"
  }
}
</code></pre>
</div>




<div class='docs-note'><p>The <code>refreshToken</code> will only be present if your application asked for offline access.  Review Google&#8217;s documentation for more information regarding OAuth offline access.</p>
</div>


<hr />

<p><a class="anchor" name="integration-facebook"></a></p>

<h2><a id="integrating-with-facebook"></a>Integrating with Facebook</h2>

<p>Stormpath supports accessing accounts from a number of different locations including Facebook.  Facebook uses OAuth 2.0 protocol for authentication / authorization and Stormpath can leverage their or access tokens to return an <code>Account</code> for a given code.</p>

<p>The steps to enable this functionality into your application include:</p>

<ul>
<li><a href="#creating-a-facebook-directory">Create a Facebook Directory</a></li>
<li>Create an <code>Account Store Mapping</code> between a Facebook Directory and your <code>Application</code></li>
<li><a href="#accessing-accounts-with-facebook-user-access-tokens">Accessing Accounts with Facebook User Access Tokens</a></li>
</ul>


<p>Facebook Directories follow behavior similar to <a href="#directory-mirror">mirror directories</a>, but have a <code>Provider</code> resource that contains information regarding the Facebook application that the directory is configured for.</p>

<h3><a id="facebook-provider-resource"></a>Facebook Provider Resource</h3>

<p>A <code>provider</code> resource holds specific information needed for working with a Facebook Directory.  It is important to understand the format of the provider resource when creating and updating a Facebook Directory.</p>

<p>A provider resource can be obtained by accessing the directory&rsquo;s provider with an HTTP <code>GET</code> as follows:</p>

<p>Example Request</p>

<pre><code>GET https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/provider
</code></pre>

<p>Example Response</p>

<pre><code>{
    "clientId": "501417", 
    "clientSecret": "4913953281ec6bb109", 
    "redirectUri": "https://myapp.com/facebook/authentication"
    "createdAt": "2014-03-31T21:01:34.631Z", 
    "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/provider", 
    "modifiedAt": "2014-03-31T21:01:34.643Z", 
    "providerId": "facebook"
}
</code></pre>

<p><strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type </th>
<th align="left"> Valid Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>clientId</code> </td>
<td align="left"> The App ID for your Facebook application </td>
<td align="left"> String </td>
<td align="left"> &mdash;</td>
</tr>
<tr>
<td align="left"><code>clientSecret</code> </td>
<td align="left"> The App Secret for your Facebook application </td>
<td align="left"> String </td>
<td align="left"> &mdash; </td>
</tr>
<tr>
<td align="left"><code>providerId</code> </td>
<td align="left"> The provider ID is the Stormpath ID for the Directory&rsquo;s account provider </td>
<td align="left"> String </td>
<td align="left"> &lsquo;facebook&rsquo;</td>
</tr>
<tr>
<td align="left"><code>createdAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource was created </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
<tr>
<td align="left"><code>modifiedAt</code> </td>
<td align="left"> An ISO-8601 Datetime value that represents when this resource&rsquo;s properties were last modified </td>
<td align="left"> ISO-8601 Datetime </td>
<td align="left"> <span>&mdash;</span></td>
</tr>
</tbody>
</table>


<p>In addition to your application specific attributes, a <code>Provider</code> resource will always contain 3 reserved read-only fields:</p>

<ul>
<li><code>href</code> : The fully qualified location of the custom data resource</li>
<li><code>createdAt</code> : the UTC timestamp with millisecond precision of when the resource was created in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string</li>
<li><code>modifiedAt</code> : the UTC timestamp with millisecond precision of when the resource was created in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string</li>
</ul>


<h3><a id="creating-a-facebook-directory"></a>Creating a Facebook Directory</h3>

<p>Creating a Facebook Directory requires that you gather some information beforehand from Facebook&rsquo;s Developer Console regarding your application.</p>

<ul>
<li>Client ID</li>
<li>Client Secret</li>
</ul>


<p>Creating a Facebook Directory is very similar to <a href="#create-a-directory">creating a directory</a> within Stormpath by making a HTTP <code>POST</code> request to the <code>/v1/directories</code> endpoint.  For a Facebook Directory to be configured correctly, you must specify the correct <code>Provider</code> information.</p>

<p><strong>Example Request</strong></p>

<p>curl -X POST &mdash;user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \</p>

<pre><code> -H "Accept: application/json" \
 -H "Content-Type: application/json" \
 -d '{
        "name" : "my-facebook-directory",
        "description" : "A Facebook directory",
        "provider": {
          "providerId": "facebook",
          "clientId":"857385m8vk0fn2r7jmjo",
          "clientSecret":"ehs7bA7OWQSQ4"
        }
      }' \
</code></pre>

<p> &ldquo;<a href="https://api.stormpath.com/v1/directories">https://api.stormpath.com/v1/directories</a>&rdquo;</p>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q
Content-Type: application/json;charset=UTF-8;

{
    "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q",
    "name": "my-facebook-directory",
    "description": "A Facebook directory",
    "status": "ENABLED",
    "tenant": {
        "href": "https://api.stormpath.com/v1/tenants/60bD37asZX6JoFhyKFHiOk"
    },
    "provider": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/provider"
    },
    "accounts": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/accounts"
    },
    "groups": {
        "href": "https://api.stormpath.com/v1/directories/bckhcGMXQDujIXpbCDRb2Q/groups"
    }
}
</code></pre>

<p>After the Facebook Directory has been created, it needs to be <a href="#application-account-store-mappings">mapped with an application as an account store</a>. The Facebook Directory cannot be a default account store or a default group store.  Once the directory is mapped to an account store for an application, you are ready to access <code>Accounts</code> with Facebook User Access Tokens.</p>

<h3><a id="accessing-accounts-with-facebook-user-access-tokens"></a>Accessing Accounts with Facebook User Access Tokens</h3>

<p>To access or create an account in an already created Facebook Directory, it is required to gather the <code>User Access Token</code> on behalf of the user.  This usually requires leveraging Facebook&rsquo;s javascript library and the user&rsquo;s consent for your application&rsquo;s permissions.</p>

<div class='docs-note'><p>It is required that your Facebook application request for the <code>email</code> permission from Facebook. If the access token does not grant <code>email</code> permissions, you will not be able to get an <code>Account</code> with an access token.</p>
</div>


<p>Once the <code>User Access Token</code> is gathered, you can get or create the <code>Account</code> HTTP <code>POST</code>ing to the <code>Application</code> accounts collection and specifying the <code>providerData</code> JSON object.  The <code>providerData</code> JSON object specifies the type of provider and the authorization code as follows:</p>

<pre><code>{
  "providerId": "facebook",
  "accessToken": "%ACCESS_TOKEN_FROM_FACEBOOK%"
}
</code></pre>

<p>The following is how you use <code>providerData</code> to get an <code>Account</code> for a given <code>User Access Token</code>:</p>

<p><strong>Example Request</strong></p>

<pre><code>curl -X POST --user $YOUR_API_KEY_ID:$YOUR_API_KEY_SECRET \
     -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{
            "providerData": {
              "providerId": "facebook",
              "accessToken": "CABTmZxAZBxBADbr1l7ZCwHpjivBt9T0GZBqjQdTmgyO0OkUq37HYaBi4F23f49f5"
            }
          }' \
 "https://api.stormpath.com/v1/applications/24mp4us71ntza6lBwlu/accounts"
</code></pre>

<p><strong>Example Response</strong></p>

<pre><code>HTTP/1.1 201 Created
Location: https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9
Content-Type: application/json;charset=UTF-8;

{
    "customData": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/customData"
    },
    "directory": {
        "href": "https://api.stormpath.com/v1/directories/U0HJ7YcCeMpRfMcRT8ph"
    },
    "email": "testuser@gmail.com",
    "emailVerificationToken": null,
    "fullName": "Test User",
    "givenName": "Test",
    "groupMemberships": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/groupMemberships"
    },
    "groups": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/groups"
    },
    "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9",
    "middleName": null,
    "providerData": {
        "href": "https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/providerData"
    },
    "status": "ENABLED",
    "surname": "User",
    "tenant": {
        "href": "https://api.stormpath.com/v1/tenants/GPpLzIzYkOO68I9i4dx"
    },
    "username": "testuser"
}
</code></pre>

<div class='docs-note'><p>The HTTP Status code when accessing an account based on a Facebook User Access Token will denote if the account was created (201) or if it already existed in Stormpath (200)</p>
</div>




<div class='docs-note'><p>To <a href="#link-expansion">expand</a> the <code>providerData</code> to get the Access Token for the Account in one HTTP request, add <code>expand=providerData</code> to the URL query parameters.</p>
</div>


<p>Once an <code>Account</code> is retreived, Stormpath maps common fields for the Facebook User to the  Account.  The access token for any additional calls in the <code>providerData</code> resource and can be retreived by:</p>

<pre><code>GET https://api.stormpath.com/v1/accounts/m0fw8GvxpM7n3pw6tyw9/providerData
</code></pre>

<p>The returned <code>providerData</code> will include:</p>

<pre><code>{
  "accessToken": "y29.1.AADN_Xo2hxQflWwsgCSK-WjSw1mNfZiv4", 
  "createdAt": "2014-04-01T17:00:09.154Z", 
  "href": "https://api.stormpath.com/v1/accounts/ciYmtETytH0tbHRBas1D5/providerData", 
  "modifiedAt": "2014-04-01T17:00:09.189Z", 
  "providerId": "facebook"
}
</code></pre>

<hr />

<p><a class="anchor" name="administration"></a></p>

<h2><a id="administering-stormpath"></a>Administering Stormpath</h2>

<p>For more information about administering Stormpath using the Admin Console, please refer to the <a href="http://stormpath.com/docs/console/product-guide">Admin Console Product Guide</a>.</p>

<hr />

<p><a class="anchor" name="glossary"></a></p>

<h2><a id="glossary-of-terms"></a>Glossary of Terms</h2>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a id="account"></a>Account </td>
<td align="left"> An <strong>account</strong> is a unique identity within a directory. Stormpath does not use the term <em>user</em> because it implies a person, while accounts can represent a person, 3rd-party software, or non-human clients. Accounts can be used to log in to applications.</td>
</tr>
<tr>
<td align="left"><a id="agent"></a>Agent </td>
<td align="left"> An <strong>agent</strong> populates LDAP directories. An agent status reflects communication/error state because the agent is communicating with Stormpath.</td>
</tr>
<tr>
<td align="left"><a id="apikey"></a>API Key </td>
<td align="left"> An <strong>API key</strong> is a unique ID paired with a secret value. API keys are used by software applications to communicate with Stormpath through the Stormpath REST API.</td>
</tr>
<tr>
<td align="left"><a id="application"></a>Application </td>
<td align="left"> An <strong>application</strong> is a software application that communicates with Stormpath. It is typically a real world application that you are building, such as a web application, but it can also be infrastructural software, such as a Unix or Web server.</td>
</tr>
<tr>
<td align="left"><a id="authentication"></a>Authentication </td>
<td align="left"> <strong>Authentication</strong> is the act of proving someone (or something) is actually who they say they are. When an account is authenticated, there is a high degree of certainty that the account identity is legitimate.</td>
</tr>
<tr>
<td align="left"><a id="authorization"></a>Authorization </td>
<td align="left"> <strong>Authorization</strong>, also known as Access Control, is the process of managing and enforcing access to protected resources, functionality, or behavior.</td>
</tr>
<tr>
<td align="left"><a id="directory"></a>Directory </td>
<td align="left"> A <strong>directory</strong> is a collection of accounts and groups. Administrators can use different directories to create silos of accounts. For example, customers and employees can be stored in different directories.</td>
</tr>
<tr>
<td align="left"><a id="directory-agent"></a>Directory Agent </td>
<td align="left"> A <strong>directory agent</strong> is a Stormpath software application installed on your corporate network to securely synchronize an on-premise directory, such as LDAP or Active Directory, into a Stormpath cloud directory.</td>
</tr>
<tr>
<td align="left"><a id="directory-mirroring"></a>Directory Mirroring </td>
<td align="left"> <strong>Directory mirroring</strong> securely replicates selected data from one (source) directory to another (target or mirrored) directory for authentication and access control. The source directory is the authoritative source for all data. Changes are propagated to the target/mirror directory for convenience and performance benefits.</td>
</tr>
<tr>
<td align="left"><a id="group"></a>Group </td>
<td align="left"> A <strong>group</strong> is a collection of accounts within a directory. In Stormpath, for anyone familiar with Role-Based Access Control, the term group is used instead of role.</td>
</tr>
<tr>
<td align="left"><a id="group-membership"></a>Group Membership </td>
<td align="left"> A <strong>group membership</strong> is a two-way mapping between an account and a group.</td>
</tr>
<tr>
<td align="left"><a id="account-store"></a>Account Store </td>
<td align="left"> A <strong>account store</strong> is a directory or group associated with an application for account authentication. Accounts within account stores associated with an application can login to that application.</td>
</tr>
<tr>
<td align="left"><a id="AccountStoreMapping"></a>Account Store Mapping </td>
<td align="left"> An <strong>account store mapping</strong> is a mapping between a group or directory and an application.</td>
</tr>
<tr>
<td align="left"><a id="identity-management"></a>Identity Management </td>
<td align="left"> <strong>Identity management</strong> is the management, authentication, authorization, and permissions of identities to increase security and productivity, while decreasing cost, downtime, and repetitive tasks.</td>
</tr>
<tr>
<td align="left"><a id="role"></a>Role </td>
<td align="left">A <strong>role</strong> is a classification of accounts, such as administrators or employees. In Stormpath, roles are represented as groups.</td>
</tr>
<tr>
<td align="left"><a id="rbac"></a>Role-Based Access Control </td>
<td align="left"> <strong>Role-Based Access Control</strong> (RBAC) is the act of controlling access to protected resources or behavior based on the groups assigned to a particular account. RBAC is done using Stormpath groups.</td>
</tr>
<tr>
<td align="left"><a id="rest-api-def"></a>REST API </td>
<td align="left"> <strong>REST API</strong> is a software architectural style enabling data transfer and functionality using common web-based communication protocols. Stormpath provides a REST API for tenants so they can easily integrate Stormpath with their software applications.</td>
</tr>
<tr>
<td align="left"><a id="tenant"></a>Tenant </td>
<td align="left"> A <strong>tenant</strong> is a private partition within Stormpath containing all data and settings—specifically your applications, directories, groups and accounts. When you sign up for Stormpath, a tenant is created for you. You can add other user accounts (for example, for your co-workers) to your tenant to help you manage your data. For convenience, many companies like to have one tenant where they can easily manage all application, directory, and account information across their organization.*</td>
</tr>
</tbody>
</table>


<div class='docs-note'><p>*You must know your tenant when logging in to the Admin Console website. There is a &#8220;Forgot Tenant&#8221; link on the login page if you do not know what your tenant is.</p>
</div>


            <div id="spread-word">
<hr>

<h2> Help Us Spread the Word </h2>

<p>Did you find this valuable?  If you've enjoyed playing with Stormpath or are excited about what we've built, please help us spread the world with a quick tweet or by just telling a friend.  Thank you!</p>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:title="Checkout Stormpath, it helps you set up complete user management in your application in minutes."
addthis:url="https://stormpath.com" >
  <a class="addthis_button_twitter"></a>
  <a class="addthis_button_preferred_2"></a>
  <a class="addthis_button_preferred_3"></a>
  <a class="addthis_button_preferred_4"></a>
  <a class="addthis_button_compact"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f5ed709512978e9"></script>
<!-- AddThis Button END -->
<p>
</div>

            <div id="bottom-wrapper">
             <div class="region">

	<div class="credits">
	  <div class="container">
	    <ul class="list-unstyled list-inline">
	      <li>Copyright &copy; 2015 Stormpath, Inc.</li>
	      <li class="divider-vertical"></li>
	      <li>All rights reserved</li>
	      <li class="divider-vertical"></li>
	      <li><a href="/privacy_policy">Privacy policy</a></li>
	      <li class="divider-vertical"></li>
	      <li><a href="/terms_of_service">Terms of service</a></li>
	    </ul>
	  </div>
	</div>
	
</div><!-- /.region -->

            </div>          	
    	  </div>



<aside class="sidebars">
  
    <section class="region region-sidebar-first column sidebar">
      
<div id="block-stormpath-docs-languages" class="block block-stormpath-docs first odd">
 <form class="stormpath-docs-select-language" action="/docs/java/product-guide" method="post" id="stormpath-docs-language-form" accept-charset="UTF-8"><div><div class="form-item form-type-select form-item-language">
  <label for="edit-language">Language: </label>
 <select id="edit-language" name="language" class="form-select">
  
  
 	
    <option value="rest" selected>REST API</option>
 	
    <option value="java">Java</option>
 	
    <option value="nodejs">Node.js</option>
 	
    <option value="python">Python</option>
 	
    <option value="ruby">Ruby</option>
 	
    <option value="php">PHP</option>
 	
    <option value="guides">Guides</option>
 	
    <option value="console">Admin Console</option>
 	
 </select>
</div>
<input type="hidden" name="form_id" value="stormpath_docs_language_form">
</div></form>
</div>

<script type="text/javascript">
	var sp_docs_menu = {};
	
		sp_docs_menu['_includes'] = [];
		
	
		sp_docs_menu['_layouts'] = [];
		
	
		sp_docs_menu['angularjs'] = [];
		
	
		sp_docs_menu['assets'] = [];
		
	
		sp_docs_menu['console'] = [];
		
			sp_docs_menu['console'].push('product-guide');
		
			sp_docs_menu['console'].push('quickstart');
		
	
		sp_docs_menu['errors'] = [];
		
			sp_docs_menu['errors'].push('1101');
		
			sp_docs_menu['errors'].push('1902');
		
			sp_docs_menu['errors'].push('2000');
		
			sp_docs_menu['errors'].push('2001');
		
			sp_docs_menu['errors'].push('2002');
		
			sp_docs_menu['errors'].push('2003');
		
			sp_docs_menu['errors'].push('2004');
		
			sp_docs_menu['errors'].push('2005');
		
			sp_docs_menu['errors'].push('2006');
		
			sp_docs_menu['errors'].push('2007');
		
			sp_docs_menu['errors'].push('2008');
		
			sp_docs_menu['errors'].push('2009');
		
			sp_docs_menu['errors'].push('2010');
		
			sp_docs_menu['errors'].push('2011');
		
			sp_docs_menu['errors'].push('2012');
		
			sp_docs_menu['errors'].push('2013');
		
			sp_docs_menu['errors'].push('2014');
		
			sp_docs_menu['errors'].push('2015');
		
			sp_docs_menu['errors'].push('2016');
		
			sp_docs_menu['errors'].push('2017');
		
			sp_docs_menu['errors'].push('2018');
		
			sp_docs_menu['errors'].push('2100');
		
			sp_docs_menu['errors'].push('2101');
		
			sp_docs_menu['errors'].push('2102');
		
			sp_docs_menu['errors'].push('2103');
		
			sp_docs_menu['errors'].push('2104');
		
			sp_docs_menu['errors'].push('2105');
		
			sp_docs_menu['errors'].push('2106');
		
			sp_docs_menu['errors'].push('2107');
		
			sp_docs_menu['errors'].push('3000');
		
			sp_docs_menu['errors'].push('3001');
		
			sp_docs_menu['errors'].push('3002');
		
			sp_docs_menu['errors'].push('3003');
		
			sp_docs_menu['errors'].push('3004');
		
			sp_docs_menu['errors'].push('4001');
		
			sp_docs_menu['errors'].push('4002');
		
			sp_docs_menu['errors'].push('5010');
		
			sp_docs_menu['errors'].push('5100');
		
			sp_docs_menu['errors'].push('5101');
		
			sp_docs_menu['errors'].push('5102');
		
			sp_docs_menu['errors'].push('5103');
		
			sp_docs_menu['errors'].push('5104');
		
			sp_docs_menu['errors'].push('5106');
		
			sp_docs_menu['errors'].push('5108');
		
			sp_docs_menu['errors'].push('5110');
		
			sp_docs_menu['errors'].push('5112');
		
			sp_docs_menu['errors'].push('5114');
		
			sp_docs_menu['errors'].push('6100');
		
			sp_docs_menu['errors'].push('6101');
		
			sp_docs_menu['errors'].push('6201');
		
			sp_docs_menu['errors'].push('6202');
		
			sp_docs_menu['errors'].push('7100');
		
			sp_docs_menu['errors'].push('7101');
		
			sp_docs_menu['errors'].push('7102');
		
			sp_docs_menu['errors'].push('7103');
		
			sp_docs_menu['errors'].push('7104');
		
			sp_docs_menu['errors'].push('7200');
		
			sp_docs_menu['errors'].push('7201');
		
			sp_docs_menu['errors'].push('7202');
		
			sp_docs_menu['errors'].push('9000');
		
			sp_docs_menu['errors'].push('9001');
		
			sp_docs_menu['errors'].push('9002');
		
			sp_docs_menu['errors'].push('9003');
		
			sp_docs_menu['errors'].push('9004');
		
			sp_docs_menu['errors'].push('9005');
		
			sp_docs_menu['errors'].push('9006');
		
	
		sp_docs_menu['express'] = [];
		
			sp_docs_menu['express'].push('quickstart');
		
	
		sp_docs_menu['flask'] = [];
		
			sp_docs_menu['flask'].push('quickstart');
		
	
		sp_docs_menu['guides'] = [];
		
			sp_docs_menu['guides'].push('ad-ldap');
		
			sp_docs_menu['guides'].push('api-key-management');
		
			sp_docs_menu['guides'].push('dev-test-prod-environments');
		
			sp_docs_menu['guides'].push('multi-tenant');
		
			sp_docs_menu['guides'].push('social-integrations');
		
			sp_docs_menu['guides'].push('token-management');
		
			sp_docs_menu['guides'].push('using-id-site');
		
	
		sp_docs_menu['home'] = [];
		
	
		sp_docs_menu['how-do-i'] = [];
		
	
		sp_docs_menu['images'] = [];
		
	
		sp_docs_menu['integrations'] = [];
		
	
		sp_docs_menu['java'] = [];
		
			sp_docs_menu['java'].push('product-guide');
		
			sp_docs_menu['java'].push('quickstart');
		
	
		sp_docs_menu['javascripts'] = [];
		
	
		sp_docs_menu['nodejs'] = [];
		
			sp_docs_menu['nodejs'].push('quickstart');
		
	
		sp_docs_menu['php'] = [];
		
			sp_docs_menu['php'].push('product-guide');
		
			sp_docs_menu['php'].push('quickstart');
		
	
		sp_docs_menu['python'] = [];
		
			sp_docs_menu['python'].push('product-guide');
		
			sp_docs_menu['python'].push('quickstart');
		
	
		sp_docs_menu['rest'] = [];
		
			sp_docs_menu['rest'].push('api');
		
			sp_docs_menu['rest'].push('product-guide');
		
			sp_docs_menu['rest'].push('quickstart');
		
	
		sp_docs_menu['ruby'] = [];
		
			sp_docs_menu['ruby'].push('product-guide');
		
			sp_docs_menu['ruby'].push('quickstart');
		
	
		sp_docs_menu['sample-apps'] = [];
		
	
		sp_docs_menu['stylesheets'] = [];
		
	
</script>


<div id="block-stormpath-docs-docs-menu" class="block block-stormpath-docs last even">
  
  
        
  	
                
                
		<ul class="menu">
		
			<li class="leaf">
			
				<a href="/rest/quickstart">Quickstart</a>
			
			
			</li>
		
			<li class="leaf active-trail">
			
				<a href="/rest/product-guide">Product Guide</a>
			
			
				<ul class="menu"><li class="leaf"><a href="#what-is-stormpath" data-level="0" class="fragment">What is Stormpath?</a><ul class="menu"><li class="leaf"><a href="#overview" data-level="1" class="fragment">Overview</a><ul class="menu"></ul></li><li class="leaf"><a href="#core-concepts" data-level="1" class="fragment">Core Concepts</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#rest-api-general-concepts" data-level="0" class="fragment">REST API General Concepts</a><ul class="menu"><li class="leaf"><a href="#base-url" data-level="1" class="fragment">Base URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#authentication" data-level="1" class="fragment">Authentication</a><ul class="menu"></ul></li><li class="leaf"><a href="#resource-format" data-level="1" class="fragment">Resource Format</a><ul class="menu"></ul></li><li class="leaf"><a href="#creating-resources" data-level="1" class="fragment">Creating Resources</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieving-resources" data-level="1" class="fragment">Retrieving Resources</a><ul class="menu"></ul></li><li class="leaf"><a href="#updating-resources" data-level="1" class="fragment">Updating Resources</a><ul class="menu"></ul></li><li class="leaf"><a href="#deleting-resources" data-level="1" class="fragment">Deleting Resources</a><ul class="menu"></ul></li><li class="leaf"><a href="#http-method-overloading" data-level="1" class="fragment">HTTP Method Overloading</a><ul class="menu"></ul></li><li class="leaf"><a href="#errors" data-level="1" class="fragment">Errors</a><ul class="menu"></ul></li><li class="leaf"><a href="#collection-resources" data-level="1" class="fragment">Collection Resources</a><ul class="menu"></ul></li><li class="leaf"><a href="#pagination" data-level="1" class="fragment">Pagination</a><ul class="menu"></ul></li><li class="leaf"><a href="#sorting" data-level="1" class="fragment">Sorting</a><ul class="menu"></ul></li><li class="leaf"><a href="#search" data-level="1" class="fragment">Search</a><ul class="menu"></ul></li><li class="leaf"><a href="#links" data-level="1" class="fragment">Links</a><ul class="menu"></ul></li><li class="leaf"><a href="#link-expansion" data-level="1" class="fragment">Link Expansion</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#tenants" data-level="0" class="fragment">Tenants</a><ul class="menu"><li class="leaf"><a href="#tenant-resource" data-level="1" class="fragment">Tenant Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-a-tenant" data-level="1" class="fragment">Retrieve a Tenant</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-the-current-tenant" data-level="1" class="fragment">Retrieve the Current Tenant</a><ul class="menu"></ul></li><li class="leaf"><a href="#tenant-applications" data-level="1" class="fragment">Tenant Applications</a><ul class="menu"></ul></li><li class="leaf"><a href="#tenant-directories" data-level="1" class="fragment">Tenant Directories</a><ul class="menu"></ul></li><li class="leaf"><a href="#tenant-accounts" data-level="1" class="fragment">Tenant Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#tenant-groups" data-level="1" class="fragment">Tenant Groups</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#applications" data-level="0" class="fragment">Applications</a><ul class="menu"><li class="leaf"><a href="#application-resource" data-level="1" class="fragment">Application Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-an-applications-rest-url" data-level="1" class="fragment">Locate an Application’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-an-application-aka-register-an-application-with-stormpath" data-level="1" class="fragment">Create an Application (aka Register an Application with Stormpath)</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-an-application" data-level="1" class="fragment">Retrieve an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-an-application" data-level="1" class="fragment">Update an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-an-application" data-level="1" class="fragment">Delete an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-applications" data-level="1" class="fragment">List Applications</a><ul class="menu"></ul></li><li class="leaf"><a href="#search-applications" data-level="1" class="fragment">Search Applications</a><ul class="menu"></ul></li><li class="leaf"><a href="#application-accounts" data-level="1" class="fragment">Application Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#application-groups" data-level="1" class="fragment">Application Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#application-account-store-mappings" data-level="1" class="fragment">Application Account Store Mappings</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#account-store-mappings" data-level="0" class="fragment">Account Store Mappings</a><ul class="menu"><li class="leaf"><a href="#account-store-mapping-resource" data-level="1" class="fragment">Account Store Mapping Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-an-account-store-mappings-rest-url" data-level="1" class="fragment">Locate an Account Store Mapping’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-an-account-store-mapping" data-level="1" class="fragment">Create an Account Store Mapping</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-an-account-store-mapping" data-level="1" class="fragment">Retrieve An Account Store Mapping</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-an-account-store-mapping" data-level="1" class="fragment">Update An Account Store Mapping</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-an-account-store-mapping" data-level="1" class="fragment">Delete an Account Store Mapping</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-account-store-mappings" data-level="1" class="fragment">List Account Store Mappings</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#directories" data-level="0" class="fragment">Directories</a><ul class="menu"><li class="leaf"><a href="#directory-resource" data-level="1" class="fragment">Directory Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-a-directorys-rest-url" data-level="1" class="fragment">Locate a Directory’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-a-directory" data-level="1" class="fragment">Create a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-a-directory" data-level="1" class="fragment">Retrieve a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-a-directory" data-level="1" class="fragment">Update a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-a-directory" data-level="1" class="fragment">Delete a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-directories" data-level="1" class="fragment">List Directories</a><ul class="menu"></ul></li><li class="leaf"><a href="#search-directories" data-level="1" class="fragment">Search Directories</a><ul class="menu"></ul></li><li class="leaf"><a href="#account-password-strength-policy" data-level="1" class="fragment">Account Password Strength Policy</a><ul class="menu"></ul></li><li class="leaf"><a href="#register-a-new-account" data-level="1" class="fragment">Register A New Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#work-with-accounts" data-level="1" class="fragment">Work With Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#verify-an-accounts-email-address" data-level="1" class="fragment">Verify An Account’s Email Address</a><ul class="menu"></ul></li><li class="leaf"><a href="#directory-groups" data-level="1" class="fragment">Directory Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#directory-accounts" data-level="1" class="fragment">Directory Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#directory-account-creation-policy" data-level="1" class="fragment">Directory Account Creation Policy</a><ul class="menu"></ul></li><li class="leaf"><a href="#directory-password-policy" data-level="1" class="fragment">Directory Password Policy</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#groups" data-level="0" class="fragment">Groups</a><ul class="menu"><li class="leaf"><a href="#group-resource" data-level="1" class="fragment">Group Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-a-groups-rest-url" data-level="1" class="fragment">Locate a Group’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-a-group" data-level="1" class="fragment">Create a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-a-group" data-level="1" class="fragment">Retrieve a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-a-group" data-level="1" class="fragment">Update a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-a-group" data-level="1" class="fragment">Delete a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#group-custom-data" data-level="1" class="fragment">Group Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-groups" data-level="1" class="fragment">List Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#search-groups" data-level="1" class="fragment">Search Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#group-accounts" data-level="1" class="fragment">Group Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#account-memberships" data-level="1" class="fragment">Account Memberships</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#group-memberships" data-level="0" class="fragment">Group Memberships</a><ul class="menu"><li class="leaf"><a href="#group-membership-resource" data-level="1" class="fragment">Group Membership Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-a-group-memberships-rest-url" data-level="1" class="fragment">Locate a Group Membership’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-a-group-membership" data-level="1" class="fragment">Create a Group Membership</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-a-group-membership" data-level="1" class="fragment">Retrieve a Group Membership</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-a-group-membership" data-level="1" class="fragment">Delete a Group Membership</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-group-memberships" data-level="1" class="fragment">List Group Memberships</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#organizations" data-level="0" class="fragment">Organizations</a><ul class="menu"><li class="leaf"><a href="#organization-resource" data-level="1" class="fragment">Organization Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-an-organizations-rest-url" data-level="1" class="fragment">Locate an Organization’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-an-organization" data-level="1" class="fragment">Create an Organization</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-an-organization" data-level="1" class="fragment">Retrieve an organization</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-an-organization" data-level="1" class="fragment">Update an Organization</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-an-organization" data-level="1" class="fragment">Delete an Organization</a><ul class="menu"></ul></li><li class="leaf"><a href="#adding-an-account-store-to-an-organization" data-level="1" class="fragment">Adding an Account Store to an Organization</a><ul class="menu"></ul></li><li class="leaf"><a href="#adding-an-organization-to-an-application-as-an-account-store" data-level="1" class="fragment">Adding an Organization to an Application as an Account Store</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#accounts" data-level="0" class="fragment">Accounts</a><ul class="menu"><li class="leaf"><a href="#account-resource" data-level="1" class="fragment">Account Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#locate-an-accounts-rest-url" data-level="1" class="fragment">Locate an Account’s REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-an-account" data-level="1" class="fragment">Create an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-an-account" data-level="1" class="fragment">Retrieve an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-an-account" data-level="1" class="fragment">Update an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-an-account" data-level="1" class="fragment">Delete an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#account-custom-data" data-level="1" class="fragment">Account Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-accounts" data-level="1" class="fragment">List Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#search-accounts" data-level="1" class="fragment">Search Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#verify-an-email-address" data-level="1" class="fragment">Verify An Email Address</a><ul class="menu"></ul></li><li class="leaf"><a href="#authenticate-an-account" data-level="1" class="fragment">Authenticate An Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#reset-an-accounts-password" data-level="1" class="fragment">Reset An Account’s Password</a><ul class="menu"></ul></li><li class="leaf"><a href="#account-groups" data-level="1" class="fragment">Account Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#account-group-memberships" data-level="1" class="fragment">Account Group Memberships</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#custom-data" data-level="0" class="fragment">Custom Data</a><ul class="menu"><li class="leaf"><a href="#create-custom-data" data-level="1" class="fragment">Create Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-custom-data" data-level="1" class="fragment">Retrieve Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-custom-data" data-level="1" class="fragment">Update Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-custom-data" data-level="1" class="fragment">Delete Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-custom-data-field" data-level="1" class="fragment">Delete Custom Data Field</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#integrating-with-google" data-level="0" class="fragment">Integrating with Google</a><ul class="menu"><li class="leaf"><a href="#google-provider-resource" data-level="1" class="fragment">Google Provider Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#creating-a-google-directory" data-level="1" class="fragment">Creating a Google Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#accessing-accounts-with-google-authorization-codes-or-an-access-tokens" data-level="1" class="fragment">Accessing Accounts with Google Authorization Codes or an Access Tokens</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#integrating-with-facebook" data-level="0" class="fragment">Integrating with Facebook</a><ul class="menu"><li class="leaf"><a href="#facebook-provider-resource" data-level="1" class="fragment">Facebook Provider Resource</a><ul class="menu"></ul></li><li class="leaf"><a href="#creating-a-facebook-directory" data-level="1" class="fragment">Creating a Facebook Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#accessing-accounts-with-facebook-user-access-tokens" data-level="1" class="fragment">Accessing Accounts with Facebook User Access Tokens</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#administering-stormpath" data-level="0" class="fragment">Administering Stormpath</a><ul class="menu"></ul></li><li class="leaf"><a href="#glossary-of-terms" data-level="0" class="fragment">Glossary of Terms</a><ul class="menu"></ul></li></ul>
			
			</li>
		
			<li class="leaf">
			
				<a href="/sample-apps">Sample Apps</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/integrations">Integrations</a>
			
			
			</li>
		
		</ul>
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
                
                       <div class="menu-divider"></div> 
                
                
		<ul class="menu">
		
			<li class="leaf">
			
				<a href="/how-do-i">How Do I..?</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/errors">Stormpath Error Codes</a>
			
			
			</li>
		
		</ul>
  	
  
</div>

    </section>
  

  
</aside>


        </div>
      </div>
    </div>
  </div>
</div>
  
<script src="/javascripts/highlight.min.js"></script>

<script>
$(function() {
   hljs.initHighlightingOnLoad();

   /* javascript for codetab to stop the page from shifting when changing tabs (tab sync) */
   var currentEventTab;
   var initialObjectTopOffset;
   var initialPageYOffset;

   $('.tabs').tabs({
		activate: function(event ,ui){

			//if the dom event, grab the hotness 
			if(event.cancelable){
				currentEventTab = event.target;
				initialObjectTopOffset = $(currentEventTab).offset().top;
				initialPageYOffset = window.pageYOffset;
			}
			//change ze tab
			$('.tabs').tabs('option', 'active', ui.newTab.index());

			//grab the new offsets
			var afterChangeOffset = $(currentEventTab).offset().top;
			var afterPageYOffset = window.pageYOffset;

			//do ze scroll
			$('body').scrollTop(initialPageYOffset - (initialObjectTopOffset - afterChangeOffset));
		}
	});
});
</script>









  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<!-- Google Code for Remarketing tag -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1002663385;
var google_conversion_label = "wSRZCLfkjQQQ2duN3gM";
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
/* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1002663385/?value=0&amp;label=wSRZCLfkjQQQ2duN3gM&amp;guid=ON&amp;script=0"/>
</div>
</noscript>

<!-- AdRoll Code -->
<script type="text/javascript">
adroll_adv_id = "RVWGHIV3GJCLHIUDNFIMNY";
adroll_pix_id = "L2WE5KAWDRDBVP46PZZBQJ";
(function () {
var oldonload = window.onload;
window.onload = function(){
__adroll_loaded=true;
var scr = document.createElement("script");
var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
scr.setAttribute('async', 'true');
scr.type = "text/javascript";
scr.src = host + "/j/roundtrip.js";
((document.getElementsByTagName('head') || [null])[0] ||
document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
if(oldonload){oldonload()}};
}());
</script>

<!-- HubSpot Analytics Code -->
<script type="text/javascript">
    (function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
        n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/475298.js';
        e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
</script>
<!-- End HubSpot Analytics Code -->

<!-- CrazyEgg -->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0017/1602.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>

<!-- Perfect Audience -->
<script type="text/javascript">
(function() {
window._pa = window._pa || {};
// _pa.orderId = "";
// _pa.revenue = "";
var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.perfectaudience.com/serve/51fc2c6f1b440adfcc000099.js";
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
})();
</script>


</body>
</html>
