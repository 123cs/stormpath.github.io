

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration &mdash; Stormpath Zuul Spring Cloud Starter 1.1.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="Stormpath Zuul Spring Cloud Starter 1.1.3 documentation" href="index.html"/>
        <link rel="next" title="Registration" href="registration.html"/>
        <link rel="prev" title="Tutorial" href="tutorial.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  
  <script src="https://cdn.optimizely.com/js/225847041.js"></script>

  
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '986262161469311');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=986262161469311&ev=PageView&noscript=1"
  /></noscript>
</head>

<body class="wy-body-for-nav" role="document">

  
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NQZZFW');</script>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Stormpath Zuul Spring Cloud Starter
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-stormpath">What is Stormpath?</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#what-is-the-project">What is the Stormpath Zuul Spring Cloud Starter?</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#who-should-use-stormpath">Who should use Stormpath?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#get-an-api-key">Get an API Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#add-the-project">Add the Stormpath Zuul Spring Cloud Starter</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#configure-zuul">Configure Zuul</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#try-it">Try it!</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#zuul-config">Zuul Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="#no-stormpath-config">No Stormpath Config?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#property-overrides">Property Overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bean-overrides">Bean Overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stormpath-client">Stormpath Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stormpath-application">Stormpath Application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="registration.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#email-verification">Email Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#internationalization-i18n">Internationalization (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#events">Events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="login.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#security-notice">Security Notice</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#uri">URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#view">View</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#i18n">i18n</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#authentication-state">Authentication State</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#spring-security">Spring Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="social.html">Social Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="social.html#facebook-login">Facebook Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social.html#google-login">Google Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social.html#linkedin-login">LinkedIn Login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social.html#json-api">JSON API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forgot-password.html">Forgot Password</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#configure-the-workflow">Configure the Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#try-it">Try it!</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#forgot-uri">Forgot URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#forgot-next-uri">Forgot Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#forgot-view">Forgot View</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#change-password-uri">Change Password URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#change-password-next-uri">Change Password Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#change-password-view">Change Password View</a></li>
<li class="toctree-l2"><a class="reference internal" href="forgot-password.html#i18n">i18n</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logout.html#uri">URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#events">Events</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="request-authentication.html">HTTP Request Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request-authentication.html#http-basic-authentication">HTTP Basic Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-authentication.html#token-authentication">Token Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-authentication.html#api-key-authentication">API Key Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="request.html">Request Context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request.html#current-user-account">Current User Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="request.html#stormpath-application">Stormpath Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="request.html#stormpath-client">Stormpath Client</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forwarded-request.html">Forwarded Request</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forwarded-request.html#forwarded-account-header-name">Forwarded Account Header Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="forwarded-request.html#default-header-value">Default Header Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="forwarded-request.html#custom-header-value">Custom Header Value</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="i18n.html">Internationalization (i18n)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#languages">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#request-locale">Request Locale</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#view-templates">View Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html#i18n-properties">i18n.properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a><ul>
<li class="toctree-l2"><a class="reference internal" href="events.html#requesteventlistener">RequestEventListener</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#id2">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#listener-best-practices">Listener Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html#spring-security">Spring Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Caching</a><ul>
<li class="toctree-l2"><a class="reference internal" href="caching.html#disable-caching">Disable Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html#cache-configuration">Cache Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="idsite.html">ID Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#how-does-it-work">How Does It Work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#enable-id-site">Enable ID Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#configure-your-application">Configure Your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="idsite.html#try-it">Try It!</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Custom Views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views.html#thymeleaf-views">Thymeleaf Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#internationalization-i18n">Internationalization (i18n)</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#head-template">Head Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#css">CSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#change-a-default-view">Change a Default View</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="appendix/default-stormpath-properties.html">Default Stormpath Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/i18n-properties.html">i18n.properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/stormpath-css.html">stormpath.css</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/change-password.html">/templates/stormpath/change-password.html</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/forgot-password.html">/templates/stormpath/forgot-password.html</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/head.html">/templates/stormpath/head.html</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/login.html">/templates/stormpath/login.html</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/register.html">/templates/stormpath/register.html</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix/verify.html">/templates/stormpath/verify.html</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Stormpath Zuul Spring Cloud Starter</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <blockquote>
<div></div></blockquote>
<div class="section" id="configuration">
<span id="config"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#zuul-config" id="id2">Zuul Config</a></li>
<li><a class="reference internal" href="#no-stormpath-config" id="id3">No Stormpath Config?</a></li>
<li><a class="reference internal" href="#property-overrides" id="id4">Property Overrides</a><ul>
<li><a class="reference internal" href="#security-considerations-passwords-and-secret-values" id="id5">Security Considerations: Passwords and secret values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bean-overrides" id="id6">Bean Overrides</a></li>
<li><a class="reference internal" href="#stormpath-client" id="id7">Stormpath Client</a><ul>
<li><a class="reference internal" href="#api-key" id="id8">API Key</a></li>
<li><a class="reference internal" href="#http-proxy" id="id9">HTTP Proxy</a></li>
<li><a class="reference internal" href="#authentication-scheme" id="id10">Authentication Scheme</a></li>
<li><a class="reference internal" href="#caching" id="id11">Caching</a></li>
<li><a class="reference internal" href="#usage" id="id12">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stormpath-application" id="id13">Stormpath Application</a><ul>
<li><a class="reference internal" href="#id1" id="id14">Usage</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="zuul-config">
<h2><a class="toc-backref" href="#id2">Zuul Config</a><a class="headerlink" href="#zuul-config" title="Permalink to this headline">¶</a></h2>
<p>Zuul needs to know where your web application is, so we need to set some zuul configuration properties. As an example,
we&#8217;ll assume that your webapp is available via <code class="docutils literal"><span class="pre">http://localhost:8080</span></code> (&#8220;localhost eighty eighty&#8221;) and your
Spring Cloud Zuul gateway will be available via <code class="docutils literal"><span class="pre">http://localhost:8000</span></code> (&#8220;localhost eight thousand&#8221;).</p>
<p>This means web traffic will go to <code class="docutils literal"><span class="pre">http://localhost:8000</span></code> to be handled by your Zuul gateway first, and then
the gateway will flow traffic as necessary through to your web application which is available at
<code class="docutils literal"><span class="pre">http://localhost:8080</span></code>.  Web clients (like browsers or mobile apps) will not communicate directly to
<code class="docutils literal"><span class="pre">localhost:8080</span></code> anymore - instead they will only &#8216;see&#8217; <code class="docutils literal"><span class="pre">localhost:8000</span></code>.</p>
<p>Here is the minimal config to add to your Spring Cloud Zuul gateway project&#8217;s application configuration:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">zuul</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">routes</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">app</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/**</span>
      <span class="l l-Scalar l-Scalar-Plain">url</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">http://localhost:8080</span>

<span class="l l-Scalar l-Scalar-Plain">server</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8000</span>
  <span class="l l-Scalar l-Scalar-Plain">use-forward-headers</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="l l-Scalar l-Scalar-Plain">logging</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">level</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">root</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">INFO</span>
</pre></div>
</div>
</div>
<div class="section" id="no-stormpath-config">
<h2><a class="toc-backref" href="#id3">No Stormpath Config?</a><a class="headerlink" href="#no-stormpath-config" title="Permalink to this headline">¶</a></h2>
<p>Refreshingly, the Stormpath Zuul Spring Cloud Starter doesn&#8217;t require any configuration at all if the following conditions apply:</p>
<ol class="arabic simple">
<li>You added the <code class="docutils literal"><span class="pre">stormpath-zuul-spring-cloud-starter-1.1.3.jar</span></code> and its transitive dependencies to your gateway&#8217;s classpath.  This happens automatically if you use a Maven-compatible build tool like Maven or Gradle to <a class="reference internal" href="quickstart.html#dependency-jar"><span class="std std-ref">specify the Stormpath dependency</span></a> in your project build configuration.</li>
<li>Your gateway can read the <code class="docutils literal"><span class="pre">$HOME/.stormpath/apiKey.properties</span></code> file <a class="reference internal" href="quickstart.html#get-api-key"><span class="std std-ref">mentioned in the Quickstart</span></a>.</li>
<li>You have only one <code class="docutils literal"><span class="pre">Application</span></code> record registered within Stormpath.</li>
</ol>
<p>If all of these conditions cannot be met, then you will have to specify some minimal configuration (but not much!) as described below.</p>
</div>
<div class="section" id="property-overrides">
<h2><a class="toc-backref" href="#id4">Property Overrides</a><a class="headerlink" href="#property-overrides" title="Permalink to this headline">¶</a></h2>
<p>Wherever possible, sane default configuration values are used to automatically configure Stormpath beans loaded by Spring.</p>
<p>If you wish to override any of these defaults, you can do so by overriding properties in your gateway&#8217;s Spring Boot <a class="reference external" href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">application.properties</a> locations.  In most cases, setting a configuration property will be all that is necessary - most of all of the default Stormpath bean implementations are highly configurable with property values.  If you need even finer control, you may wish to re-define a Stormpath bean entirely to provide your own implementation as discussed in the next section below.</p>
<p>All Stormpath configuration properties are prefixed with <code class="docutils literal"><span class="pre">stormpath.</span></code> and take the following form (for example):</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">stormpath.some.property.name</span> <span class="o">=</span> <span class="s">aValue</span>
<span class="na">stormpath.another.property.name</span> <span class="o">=</span> <span class="s">anotherValue</span>
</pre></div>
</div>
<p>Simply just re-define the relevant <code class="docutils literal"><span class="pre">stormpath.</span></code>* property in one of your gateway&#8217;s Spring Boot <a class="reference external" href="http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">application.properties</a> locations and your value will be used instead of the default.</p>
<div class="section" id="security-considerations-passwords-and-secret-values">
<span id="property-security-considerations"></span><h3><a class="toc-backref" href="#id5">Security Considerations: Passwords and secret values</a><a class="headerlink" href="#security-considerations-passwords-and-secret-values" title="Permalink to this headline">¶</a></h3>
<p>It is <strong>strongly</strong> recommended that you do not specify the <code class="docutils literal"><span class="pre">stormpath.client.apiKey.secret</span></code> property - or any other password or secret property - in shared properties files. These files are usually committed to version control (like git) and shared with other developers.</p>
<p>Because Stormpath API Keys are always assigned to an individual person, they should never be shared with or visible to anyone else, not even other co-workers or even Stormpath employees.  Anyone that has your API Key id and secret can alter the data in your Stormpath tenant.</p>
<p>Also, it should also be noted that, while JVM system properties are not usually visible to other developers, using system properties for secrets and passwords can also be seen as a security risk: system property values are visible to anyone performing a process listing on a production machine (e.g. <code class="docutils literal"><span class="pre">ps</span> <span class="pre">aux</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">java</span></code>).</p>
<p>If you cannot rely on accessing the default <code class="docutils literal"><span class="pre">$HOME/.stormpath/apiKey.properties</span></code> file, environment variables or a different private local file (with restricted read permissions) is usually a safer alternative when defining passwords or secret values than shared files or JVM system properties.</p>
</div>
</div>
<div class="section" id="bean-overrides">
<h2><a class="toc-backref" href="#id6">Bean Overrides</a><a class="headerlink" href="#bean-overrides" title="Permalink to this headline">¶</a></h2>
<p>If property overrides are not sufficient or you need even finer control, you may wish to re-define a Stormpath bean entirely and provide your own custom implementation.</p>
<p>To do so, you just need to re-define that bean in your own Spring Boot Java configuration.  Often certain bean names must be retained, so if you re-define a bean, try to use the same name and your bean will be used instead of the default.</p>
<p>For example, assume a bean named <code class="docutils literal"><span class="pre">stormpathJwtFactory</span></code> existed.  To use your own implementation instead of the Stormpath default, just redefine the bean in your project&#8217;s Java Config.  For example:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">JwtFactory</span> <span class="nf">stormpathJwtFactory</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">MyJwtFactory</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>A <code class="docutils literal"><span class="pre">MyJwtFactory</span></code> instance will be used instead of the default.</p>
</div>
<div class="section" id="stormpath-client">
<h2><a class="toc-backref" href="#id7">Stormpath Client</a><a class="headerlink" href="#stormpath-client" title="Permalink to this headline">¶</a></h2>
<p>The Stormpath Zuul Spring Cloud Starter depends on a Stormpath <code class="docutils literal"><span class="pre">Client</span></code> instance to communicate with Stormpath for most functionality.  You may configure the client via <code class="docutils literal"><span class="pre">stormpath.*</span></code> properties as necessary.</p>
<div class="section" id="api-key">
<h3><a class="toc-backref" href="#id8">API Key</a><a class="headerlink" href="#api-key" title="Permalink to this headline">¶</a></h3>
<p>The API Key used by the SDK Client will be acquired from the following locations.  Locations inspected later override previously discovered values.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">$HOME/.stormpath/apiKey.properties</span></code> file</li>
<li>Any <code class="docutils literal"><span class="pre">stormpath.client.apiKey.id</span></code> value discovered from Spring property placeholder locations</li>
<li>Any <code class="docutils literal"><span class="pre">stormpath.client.apiKey.secret</span></code> value discovered from Spring property placeholder locations</li>
</ul>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">While <code class="docutils literal"><span class="pre">stormpath.client.apiKey.secret</span></code> can be configured as a property in a file, please be aware of the <a class="reference internal" href="#property-security-considerations"><span class="std std-ref">security considerations</span></a> of files shared with other people.</p>
</div>
</div>
<div class="section" id="http-proxy">
<h3><a class="toc-backref" href="#id9">HTTP Proxy</a><a class="headerlink" href="#http-proxy" title="Permalink to this headline">¶</a></h3>
<p>If your gateway requires communication to Stormpath go through an HTTP Proxy, you can set the following configuration properties as needed:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">stormpath.client.proxy.host</span></code>: Proxy server hostname or IP address, e.g. <code class="docutils literal"><span class="pre">proxy.mycompany.com</span></code> or <code class="docutils literal"><span class="pre">10.0.2.88</span></code>.</li>
<li><code class="docutils literal"><span class="pre">stormpath.client.proxy.port</span></code>: Proxy server port, for example <code class="docutils literal"><span class="pre">8888</span></code>.</li>
<li><code class="docutils literal"><span class="pre">stormpath.client.proxy.username</span></code>: Username to use when connecting to the proxy server.  Only configure this property if proxy server username/password authentication is required.</li>
<li><code class="docutils literal"><span class="pre">stormpath.client.proxy.password</span></code>: Password to use when connecting to the proxy server.  Only configure this property if proxy server username/password authentication is required, but <strong>note</strong>: it is strongly recommended that you don&#8217;t embed passwords in text files. You might want to specify this property as an environment variable, for example:</li>
</ul>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">STORMPATH_CLIENT_PROXY_PASSWORD</span><span class="o">=</span>your_proxy_server_password
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="authentication-scheme">
<h3><a class="toc-backref" href="#id10">Authentication Scheme</a><a class="headerlink" href="#authentication-scheme" title="Permalink to this headline">¶</a></h3>
<p>The Stormpath SDK Client communicates with Stormpath using a very secure <a class="reference external" href="http://en.wikipedia.org/wiki/Cryptographic_hash_function">cryptographic digest</a>-based authentication scheme.</p>
<p>If you deploy your gateway on Google App Engine however, you might experience some problems.  You can change the scheme to use <code class="docutils literal"><span class="pre">basic</span></code> authentication by setting the following configuration property and value:</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">stormpath.client.authenticationScheme</span> <span class="o">=</span> <span class="s">basic</span>
</pre></div>
</div>
<p>If your gateway is not deployed on Google App Engine, we recommend that you <em>do not</em> set this property.</p>
</div>
<div class="section" id="caching">
<h3><a class="toc-backref" href="#id11">Caching</a><a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h3>
<p>The client caches resources from the Stormpath API server by default in an in-memory, in-process cache to enhance performance.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">If your gateway is deployed across multiple JVMs (e.g. clustered or striped) the default caching mechanism could cause problems because each gateway instance would have its <em>own</em> cache.  This could cause data consistency problems across the gateway instances.</p>
</div>
<p>You can either disable the cache entirely or configure your own coherent or cluster-friendly Spring <code class="docutils literal"><span class="pre">CacheManager</span></code> and that would be used for the Stormpath Client&#8217;s needs automatically.</p>
<p>Please see the <a class="reference internal" href="caching.html#caching"><span class="std std-ref">Caching</span></a> chapter for more information.</p>
</div>
<div class="section" id="usage">
<h3><a class="toc-backref" href="#id12">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>You may access the Stormpath <code class="docutils literal"><span class="pre">Client</span></code> instance via normal Spring autowiring.  For example:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="n">Client</span> <span class="n">client</span><span class="o">;</span>
</pre></div>
</div>
<p>You can also <a class="reference internal" href="request.html#request-sdk-client"><span class="std std-ref">access the client via a ServletRequest</span></a>.</p>
</div>
</div>
<div class="section" id="stormpath-application">
<h2><a class="toc-backref" href="#id13">Stormpath Application</a><a class="headerlink" href="#stormpath-application" title="Permalink to this headline">¶</a></h2>
<p>The Stormpath Zuul Spring Cloud Starter requires that your gateway correspond to a registered <code class="docutils literal"><span class="pre">Application</span></code> record within Stormpath.</p>
<p>If you only have one registered application with Stormpath, Stormpath Zuul Spring Cloud Starter will automatically query Stormpath at startup, find the <code class="docutils literal"><span class="pre">Application</span></code> and use it, and no configuration is necessary.</p>
<p>However, if you have more than one application registered with Stormpath, you must configure the <code class="docutils literal"><span class="pre">href</span></code> of the specific application to access by setting the following configuration property:</p>
<div class="highlight-properties"><div class="highlight"><pre><span></span><span class="na">stormpath.application.href</span> <span class="o">=</span> <span class="s">your_application_href_here</span>
</pre></div>
</div>
<p>You can find your gateway&#8217;s href in the <a class="reference external" href="https://api.stormpath.com">Stormpath Admin Console</a>:</p>
<ol class="arabic">
<li><p class="first">Click on the <code class="docutils literal"><span class="pre">Applications</span></code> tab and find your gateway in the list.  Click on the Application&#8217;s name:</p>
<img alt="_images/console-applications-ann.png" src="_images/console-applications-ann.png" />
</li>
<li><p class="first">On the resulting <em>Application Details</em> page, the <strong>REST URL</strong> property value is your gateway&#8217;s <code class="docutils literal"><span class="pre">href</span></code>:</p>
<img alt="_images/console-application-href.png" src="_images/console-application-href.png" />
</li>
</ol>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id14">Usage</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>You may access the <code class="docutils literal"><span class="pre">Application</span></code> instance within your gateway if desired (for example, searching your application&#8217;s user accounts, creating groups, etc) using normal Spring autowiring:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="n">Application</span> <span class="n">application</span><span class="o">;</span>
</pre></div>
</div>
<p>You can also <a class="reference internal" href="request.html#request-application"><span class="std std-ref">access the application via a ServletRequest</span></a>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="registration.html" class="btn btn-neutral float-right" title="Registration" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorial.html" class="btn btn-neutral" title="Tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Stormpath, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>