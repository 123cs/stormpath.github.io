

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration &mdash; ASP.NET Core Library Guide  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="ASP.NET Core Library Guide  documentation" href="index.html"/>
        <link rel="next" title="Request context" href="request_context.html"/>
        <link rel="prev" title="Quickstart" href="quickstart.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  
  <script src="https://cdn.optimizely.com/js/225847041.js"></script>

  
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '986262161469311');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=986262161469311&ev=PageView&noscript=1"
  /></noscript>
</head>

<body class="wy-body-for-nav" role="document">

  
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NQZZFW');</script>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ASP.NET Core Library Guide
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-does-this-library-do">What does this library do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#what-is-stormpath">What is Stormpath?</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#who-should-use-stormpath">Who should use Stormpath</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-stormpath-account">Create a Stormpath account</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-an-api-key-pair">Create an API Key pair</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#find-your-stormpath-application">Find your Stormpath Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#example-projects">Example projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#create-a-new-project">Create a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#install-the-library">Install the library</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#initialize-the-middleware">Initialize the middleware</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#loading-order">Loading order</a></li>
<li class="toctree-l2"><a class="reference internal" href="#required-settings">Required settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#markup-file-yaml-or-json">Markup file (YAML or JSON)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-credentials-file">API credentials file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inline-options">Inline options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-features">Default features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#disabling-features">Disabling features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#disabling-content-types">Disabling content types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#specifying-the-server-uri">Specifying the server URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stormpath-client-options">Stormpath Client options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="request_context.html">Request context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request_context.html#stormpath-client">Stormpath Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="request_context.html#stormpath-application">Stormpath Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="request_context.html#current-account">Current Account</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using_the_sdk.html">Using the Stormpath SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdk.html#tasks-and-cancellation">Tasks and Cancellation</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdk.html#making-synchronous-calls">Making synchronous calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_the_sdk.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cors.html">Cross-origin requests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cors.html#configuring-the-pipeline">Configuring the pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#cookie-authentication">Cookie authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#oauth-2-0-password-grant">OAuth 2.0 password grant</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authorization.html">Authorization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authorization.html#requiring-login">Requiring login</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html#groups-and-roles">Groups and roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="authorization.html#fine-grained-permissions">Fine-grained permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="id_site.html">ID Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="id_site.html#who-should-use-id-site">Who should use ID Site?</a></li>
<li class="toctree-l2"><a class="reference internal" href="id_site.html#how-does-it-work">How does it work?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">View templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="templates.html#default-views">Default views</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#custom-views">Custom views</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="oauth2.html">OAuth 2.0 API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="me_api.html">Current user API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#using-the-endpoint">Using the endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#link-expansion">Link expansion</a></li>
<li class="toctree-l2"><a class="reference internal" href="me_api.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="registration.html">Registration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="registration.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#customizing-the-form">Customizing the form</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#password-strength-requirements">Password strength requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#email-verification">Email verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#auto-login">Auto login</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="registration.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="login.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#customizing-the-form">Customizing the form</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#next-uri">Next URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="social_login.html">Social login</a><ul>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-facebook-login">Setting up Facebook login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-github-login">Setting up Github login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-google-login">Setting up Google login</a></li>
<li class="toctree-l2"><a class="reference internal" href="social_login.html#setting-up-linkedin-login">Setting up LinkedIn login</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="logout.html">Logout</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logout.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="logout.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="password_reset.html">Password reset</a><ul>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#enabling-the-workflow">Enabling the workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#auto-login">Auto login</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="password_reset.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="email_verification.html">Email verification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#enabling-the-workflow">Enabling the workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#configuration-options">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#auto-login">Auto login</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#mobile-json-api">Mobile/JSON API</a></li>
<li class="toctree-l2"><a class="reference internal" href="email_verification.html#default-configuration">Default configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="help.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="help.html#inspecting-traffic">Inspecting traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="help.html#getting-help">Getting help</a></li>
</ul>
</li>
</ul>

            
          

  <hr/>

  <li class="toctree-l1">
    <a class="reference internal" href="/csharp/product-guide/latest">C# SDK Documentation &rarr;</a>
  </li>

  <li class="toctree-l1">
    <a class="reference internal" href="/vbnet/product-guide/latest">VB SDK Documentation &rarr;</a>
  </li>

  <li class="toctree-l1">
    <a class="reference internal" href="/dotnet/api/">SDK API Reference &rarr;</a>
  </li>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ASP.NET Core Library Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration">
<span id="id1"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>The Stormpath ASP.NET Core library provides several options that allow you to customize the authentication features of your ASP.NET Core application. This section will cover how to configure the library in general, and later sections will go into detail on specific features.</p>
<p>The default configuration enables a lot of functionality by default, but you may want to customize the behavior of the library to suit the needs of your application.</p>
<p>There are a few ways you can set these configuration options:</p>
<ul class="simple">
<li>Environment variables</li>
<li>Markup file (YAML or JSON)</li>
<li>API credentials file (<code class="docutils literal"><span class="pre">apiKey.properties</span></code>, used to set the Stormpath API Key and Secret)</li>
<li>Inline options in code (supplied to the middleware constructor)</li>
</ul>
<div class="section" id="loading-order">
<span id="config-loading-order"></span><h2>Loading order<a class="headerlink" href="#loading-order" title="Permalink to this headline">¶</a></h2>
<p>These configuration methods are loaded in the order above. This means that values supplied via inline code will override any values supplied via a markup file for the same settings. Likewise, values supplied via a markup file will override values supplied via environment variables for the same settings.</p>
<p>Any settings that are not specified using <strong>any</strong> method will fall back to the <a class="reference external" href="https://github.com/stormpath/stormpath-dotnet-config/blob/master/src/Stormpath.Configuration.Abstractions/Default.cs">Web Configuration Defaults</a>.</p>
</div>
<div class="section" id="required-settings">
<h2>Required settings<a class="headerlink" href="#required-settings" title="Permalink to this headline">¶</a></h2>
<p>At the very least, these configuration options <strong>must</strong> be set in order for
the Stormpath middleware to initialize properly:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">stormpath.client.apiKey.id</span></code></li>
<li><code class="docutils literal"><span class="pre">stormpath.client.apiKey.secret</span></code></li>
</ul>
<p>Additionally, if you have more than one Application resource in your Stormpath tenant, either <code class="docutils literal"><span class="pre">stormpath.application.name</span></code> or <code class="docutils literal"><span class="pre">stormpath.application.href</span></code> must be set.</p>
<p>If these values aren&#8217;t set (using one of the methods below), the Stormpath middleware component with throw an error on startup.</p>
</div>
<div class="section" id="environment-variables">
<h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p>Configuration options can be set in environment variables by formatting the key name with underscores. For example, <code class="docutils literal"><span class="pre">stormpath.client.apiKey.id</span></code> becomes <code class="docutils literal"><span class="pre">STORMPATH_CLIENT_APIKEY_ID</span></code>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">It is a best practice to store confidential information in environment
variables, to avoid hard-coding it into your application. We recommend you store your confidential Stormpath information (API credentials and application URL) in this way.</p>
</div>
<p>In a bash-like shell, you can set environment variables by running these commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">STORMPATH_CLIENT_APIKEY_ID</span><span class="o">=</span>your_id_here
<span class="nb">export</span> <span class="nv">STORMPATH_CLIENT_APIKEY_SECRET</span><span class="o">=</span>your_secret_here
<span class="nb">export</span> <span class="nv">STORMPATH_APPLICATION_HREF</span><span class="o">=</span>your_app_href
</pre></div>
</div>
<p>On Windows, the commands are:</p>
<div class="highlight-powershell"><div class="highlight"><pre><span></span><span class="n">setx</span> <span class="n">STORMPATH_CLIENT_APIKEY_ID</span> <span class="n">your_id_here</span>
<span class="n">setx</span> <span class="n">STORMPATH_CLIENT_APIKEY_SECRET</span> <span class="n">your_secret_here</span>
<span class="n">setx</span> <span class="n">STORMPATH_APPLICATION_HREF</span> <span class="n">your_app_href</span>
</pre></div>
</div>
<p>Any configuration option can be set using environment variables. The above are just examples!</p>
</div>
<div class="section" id="markup-file-yaml-or-json">
<span id="config-markup"></span><h2>Markup file (YAML or JSON)<a class="headerlink" href="#markup-file-yaml-or-json" title="Permalink to this headline">¶</a></h2>
<p>Configuration options can also be set by placing a file called <code class="docutils literal"><span class="pre">stormpath.yaml</span></code> or <code class="docutils literal"><span class="pre">stormpath.json</span></code> in one of these locations:</p>
<ul class="simple">
<li><strong>Hidden .stormpath Directory</strong></li>
</ul>
<p>On Unix-like machines, the path <code class="docutils literal"><span class="pre">~/.stormpath/</span></code> is searched.</p>
<p>On Windows machines, the path is <code class="docutils literal"><span class="pre">%HOMEDRIVE%%HOMEPATH%%\.stormpath</span></code>. This is typically resolved to <code class="docutils literal"><span class="pre">C:\Users\&lt;username&gt;\.stormpath</span></code>.</p>
<ul class="simple">
<li><strong>Application Base Directory</strong></li>
</ul>
<p>The application&#8217;s base directory is defined as the directory that <code class="docutils literal"><span class="pre">project.json</span></code> or <code class="docutils literal"><span class="pre">appsettings.json</span></code> resides in.</p>
<p>For example, this <code class="docutils literal"><span class="pre">stormpath.yaml</span></code> file will disable the default <code class="docutils literal"><span class="pre">/register</span></code> and <code class="docutils literal"><span class="pre">/login</span></code> routes:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="l l-Scalar l-Scalar-Plain">login</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>The equivalent <code class="docutils literal"><span class="pre">stormpath.json</span></code> is:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;web&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;register&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;login&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In both cases, the <code class="docutils literal"><span class="pre">stormpath</span></code> root node is implied and should be omitted.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can also refer to the <a class="reference external" href="https://github.com/stormpath/stormpath-framework-spec/blob/master/example-config.yaml">Example Stormpath configuration</a> to see the entire default library configuration in YAML.</p>
</div>
</div>
<div class="section" id="api-credentials-file">
<h2>API credentials file<a class="headerlink" href="#api-credentials-file" title="Permalink to this headline">¶</a></h2>
<p>The API Key ID (<code class="docutils literal"><span class="pre">stormpath.client.apiKey.id</span></code>) and API Key Secret (<code class="docutils literal"><span class="pre">stormpath.client.apiKey.secret</span></code>) can be set by placing the <code class="docutils literal"><span class="pre">apiKey.properties</span></code> generated by the Stormpath Admin Console file in one of these locations:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">~/.stormpath/</span></code> (where <code class="docutils literal"><span class="pre">~</span></code> represents the user&#8217;s home directory)</li>
<li>The application&#8217;s base directory</li>
</ul>
<p>If you don&#8217;t opt to store the Stormpath API credentials in environment variables, this functionality makes it easy to download the <code class="docutils literal"><span class="pre">apiKey.properties</span></code> file from Stormpath and place it directly in one of these locations.</p>
</div>
<div class="section" id="inline-options">
<h2>Inline options<a class="headerlink" href="#inline-options" title="Permalink to this headline">¶</a></h2>
<p>If you wish to define your configuration in code, you can do so when initializing the middleware.</p>
<p>Values set using inline code have the highest precedence and will override any values set with other methods, such as a markup file. (See <a class="reference internal" href="#config-loading-order"><span class="std std-ref">Loading order</span></a>.)</p>
<p>The middleware accepts a parameter of type <code class="docutils literal"><span class="pre">StormpathConfiguration</span></code> (found in <code class="docutils literal"><span class="pre">Stormpath.Configuration.Abstractions</span></code>):</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Application</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ApplicationConfiguration</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Name</span> <span class="p">=</span> <span class="s">&quot;My Application&quot;</span>
    <span class="p">},</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Register</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can also use an anonymous object with the same (case-insensitive) names:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddStormpath</span><span class="p">(</span><span class="k">new</span>
<span class="p">{</span>
    <span class="n">application</span> <span class="p">=</span> <span class="k">new</span>
    <span class="p">{</span>
        <span class="n">name</span> <span class="p">=</span> <span class="s">&quot;My Application&quot;</span>
    <span class="p">},</span>
    <span class="n">web</span> <span class="p">=</span> <span class="k">new</span>
    <span class="p">{</span>
        <span class="n">register</span> <span class="p">=</span> <span class="k">new</span>
        <span class="p">{</span>
            <span class="n">enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Both of these examples will use the Stormpath Application called &#8220;My Application&#8221; and disable the default <code class="docutils literal"><span class="pre">/register</span></code> route.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The most flexible way of providing configuration in a production environment is with YAML/JSON markup or environment variables. Inline options are useful during development.</p>
</div>
</div>
<div class="section" id="default-features">
<span id="id2"></span><h2>Default features<a class="headerlink" href="#default-features" title="Permalink to this headline">¶</a></h2>
<p>When you add the Stormpath middleware to your application pipeline,
the library will automatically add the following routes to your application:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="60%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">URI</th>
<th class="head">Purpose</th>
<th class="head">Documentation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/forgot</td>
<td>Request a password reset link.</td>
<td><a class="reference internal" href="password_reset.html#password-reset"><span class="std std-ref">Password reset</span></a></td>
</tr>
<tr class="row-odd"><td>/change</td>
<td>Reset your password (second step)</td>
<td><a class="reference internal" href="password_reset.html#password-reset"><span class="std std-ref">Password reset</span></a></td>
</tr>
<tr class="row-even"><td>/login</td>
<td>Login to your application with username and password.</td>
<td><a class="reference internal" href="login.html#login"><span class="std std-ref">Login</span></a></td>
</tr>
<tr class="row-odd"><td>/logout</td>
<td>Accepts a POST request, and destroys the login session.</td>
<td><a class="reference internal" href="logout.html#logout"><span class="std std-ref">Logout</span></a></td>
</tr>
<tr class="row-even"><td>/me</td>
<td>Returns a JSON representation of the current user.</td>
<td><a class="reference internal" href="me_api.html#me-api"><span class="std std-ref">Current user API</span></a></td>
</tr>
<tr class="row-odd"><td>/oauth/token</td>
<td>Issue OAuth2 access and refresh tokens.</td>
<td><a class="reference internal" href="oauth2.html#oauth2"><span class="std std-ref">OAuth 2.0 API</span></a></td>
</tr>
<tr class="row-even"><td>/register</td>
<td>Create an account within your application.</td>
<td><a class="reference internal" href="registration.html#registration"><span class="std std-ref">Registration</span></a></td>
</tr>
<tr class="row-odd"><td>/reset</td>
<td>Reset an account password, from a password reset link.</td>
<td><a class="reference internal" href="password_reset.html#password-reset"><span class="std std-ref">Password reset</span></a></td>
</tr>
<tr class="row-even"><td>/verify</td>
<td>Verify a new account, from a email verification link.</td>
<td><a class="reference internal" href="email_verification.html#email-verification"><span class="std std-ref">Email verification</span></a></td>
</tr>
</tbody>
</table>
<p>Each feature has its own configurable options, which are explained in the feature&#8217;s documentation. If you want to disable specific features, continue to the next section.</p>
</div>
<div class="section" id="disabling-features">
<h2>Disabling features<a class="headerlink" href="#disabling-features" title="Permalink to this headline">¶</a></h2>
<p>The library enables many features by default, but you might not want to use all of them.
For example, if you wanted to disable all the default features, you could use
this configuration in code:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">ForgotPassword</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebForgotPasswordRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">ChangePassword</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebChangePasswordRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">Login</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebLoginRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">Logout</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebLogoutRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">Me</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebMeRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">Oauth2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebOauth2RouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">Register</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRegisterRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">},</span>
        <span class="n">VerifyEmail</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebVerifyEmailRouteConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The equivalent <code class="docutils literal"><span class="pre">stormpath.yaml</span></code> looks like this:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">forgotPassword</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">changePassword</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">login</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">logout</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">me</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">oauth2</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

  <span class="l l-Scalar l-Scalar-Plain">verifyEmail</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>You could also achieve the same result using environment variables, by setting <code class="docutils literal"><span class="pre">STORMPATH_WEB_LOGIN_ENABLED</span> <span class="pre">=</span> <span class="pre">'false'</span></code> and so on.</p>
</div>
<div class="section" id="disabling-content-types">
<h2>Disabling content types<a class="headerlink" href="#disabling-content-types" title="Permalink to this headline">¶</a></h2>
<p>By default, the routes provided by this library can handle requests from both browsers and clients such as Single Page Applications and mobile apps. Incoming requests are inspected for an Accept header of either <code class="docutils literal"><span class="pre">text/html</span></code> (browsers) or <code class="docutils literal"><span class="pre">application/json</span></code> (SPA/mobile).</p>
<p>It&#8217;s possible to disable either of these modes by changing the values in <code class="docutils literal"><span class="pre">stormpath.web.produces</span></code>. For example, if you want to build a pure API that will never send HTML responses, use this configuration:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Produces</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">&quot;application/json&quot;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-the-server-uri">
<h2>Specifying the server URI<a class="headerlink" href="#specifying-the-server-uri" title="Permalink to this headline">¶</a></h2>
<p>Some <a class="reference internal" href="social_login.html#social-login"><span class="std std-ref">Social login</span></a> providers require the base URI of your server to be set in configuration. To do this, you can set the <code class="docutils literal"><span class="pre">stormpath.web.serverUri</span></code> property using one of the configuration methods described in this section.</p>
<p>For example, in YAML:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">stormpath</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">web</span><span class="p p-Indicator">:</span>
   <span class="l l-Scalar l-Scalar-Plain">serverUri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">http://localhost:5000</span>
</pre></div>
</div>
<p>Alternatively, you can set this property in code when you configure the Stormpath middleware:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Web</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebConfiguration</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">ServerUri</span> <span class="p">=</span> <span class="s">&quot;http://localhost:5000&quot;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="stormpath-client-options">
<h2>Stormpath Client options<a class="headerlink" href="#stormpath-client-options" title="Permalink to this headline">¶</a></h2>
<p>When you initialize this library, it creates an instance of the Stormpath SDK Client.
The Stormpath Client is responsible for communicating with the Stormpath REST
API and is provided by the <a class="reference external" href="https://github.com/stormpath/stormpath-sdk-dotnet">Stormpath .NET SDK</a>.</p>
<p>Any options you set when initializing the Stormpath middleware library are also passed down to the SDK Client.</p>
<p>For example, to hardcode the Stormpath API credentials (not recommended!), you could use this configuration:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddStormpath</span><span class="p">(</span><span class="k">new</span> <span class="n">StormpathConfiguration</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ClientConfiguration</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">ApiKey</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ClientApiKeyConfiguration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Id</span> <span class="p">=</span> <span class="s">&quot;YOUR_API_KEY_ID&quot;</span><span class="p">,</span>
            <span class="n">Secret</span> <span class="p">=</span> <span class="s">&quot;YOUR_API_KEY_SECRET&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The Stormpath Client constructor ignores the <code class="docutils literal"><span class="pre">stormpath.web</span></code> node of the configuration. For more information about setting options on the SDK Client object, please see the
<a class="reference external" href="https://docs.stormpath.com/dotnet/api/html/M_Stormpath_SDK_Client_IClientBuilder_SetConfiguration.htm">.NET SDK documentation</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="request_context.html" class="btn btn-neutral float-right" title="Request context" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Stormpath, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/scrollspy.js"></script>
      <script type="text/javascript" src="_static/gumshoe.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
   
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-29159574-1', 'auto');
    ga('send', 'pageview');
  </script>
  <script type="text/javascript">
    (function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n=d.createElement(s),e=d.getElementsByTagName(s)[0];
        n.id=i;n.src='//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/475298.js';
        e.parentNode.insertBefore(n, e);
    })(document,"script","hs-analytics",300000);
  </script>
  <script type="text/javascript">
    var _kmq = _kmq || [];
    var _kmk = _kmk || '684b854336bd3a6523260ebd991eec06b18b929a';
    function _kms(u){
        setTimeout(function(){
            var d = document, f = d.getElementsByTagName('script')[0],
                    s = d.createElement('script');
            s.type = 'text/javascript'; s.async = true; s.src = u;
            f.parentNode.insertBefore(s, f);
        }, 1);
    }
    _kms('//i.kissmetrics.com/i.js');
    _kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
  </script>
  <script src="//cdn.optimizely.com/js/225847041.js"></script>


</body>
</html>