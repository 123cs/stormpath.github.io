
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Stormpath Ruby Product Guide - Stormpath</title>
  <meta name="author" content="Stormpath, Inc.">

  
  <meta name="description" content="Stormpath is a User Management API that reduces development time with instant-on, scalable user infrastructure. Stormpath’s intuitive API and expert &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stormpath.github.io/ruby/product-guide">
  <link href="/favicon.ico" rel="icon">

  <style>
  @import url("/stylesheets/normalize.css?mrrrji");
  @import url("/stylesheets/wireframes.css?mrrrji");
  @import url("/stylesheets/html-elements.css?mrrrji");
  @import url("/stylesheets/tabs.css?mrrrji");
  @import url("/stylesheets/tinybox2.css?mrrrji");
  @import url("/stylesheets/pages.css?mrrrji");
  @import url("/stylesheets/docs.css?mrrrji");
  @import url("/stylesheets/blocks.css?mrrrji");
  @import url("/stylesheets/navigation.css?mrrrji");
  @import url("/stylesheets/views-styles.css?mrrrji");
  @import url("/stylesheets/nodes.css?mrrrji");
  @import url("/stylesheets/comments.css?mrrrji");
  @import url("/stylesheets/forms.css?mrrrji");
  @import url("/stylesheets/fields.css?mrrrji");
  @import url("/stylesheets/layouts/responsive-sidebars.css?mrrrji");
  </style>

  <link href="/atom.xml" rel="alternate" title="Stormpath" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Covered+By+Your+Grace|Open+Sans:300italic,400italic,600italic,700italic,800italic,300,400,600,700,800" media="all" />

<!--[if lt IE 9]>
<script src="/javascripts/html5-respond.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29159574-1']);
  _gaq.push(['_setDomainName', 'stormpath.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- kissmetrics -->
<script type="text/javascript">
  var _kmq = _kmq || [];
  var _kmk = _kmk || '684b854336bd3a6523260ebd991eec06b18b929a';
  function _kms(u){
    setTimeout(function(){
      var d = document, f = d.getElementsByTagName('script')[0],
      s = d.createElement('script');
      s.type = 'text/javascript'; s.async = true; s.src = u;
      f.parentNode.insertBefore(s, f);
    }, 1);
  }
  _kms('//i.kissmetrics.com/i.js');
  _kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
</script>

<!-- Optimizely -->
<script src="//cdn.optimizely.com/js/225847041.js"></script>

  

</head>

<body  class="not-front  node-type-documentation  ">
<!-- Qualaroo for stormpath.com -->
<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript" src="//s3.amazonaws.com/ki.js/47725/9JM.js" async="true"></script>
      
<script type="text/javascript" src="//assets.zendesk.com/external/zenbox/v2.6/zenbox.js"></script>
<style type="text/css" media="screen, projection">
  @import url(//assets.zendesk.com/external/zenbox/v2.6/zenbox.css);
</style>
<script type="text/javascript">
  if (typeof(Zenbox) !== "undefined") {
    Zenbox.init({
      dropboxID:   "20184231",
      url:         "https://stormpath.zendesk.com",
      tabTooltip:  "Get Help",
      tabImageURL: "/images/tab_questions_black_right.png",
      tabColor:    "689ed0",
      tabPosition: "Right"
    });
  }
</script>


<script src="/javascripts/stormpath_docs.js"></script>
<script type="text/javascript">
	var sp_docs_menu = {};
	
		sp_docs_menu['_includes'] = [];
		
	
		sp_docs_menu['_layouts'] = [];
		
	
		sp_docs_menu['assets'] = [];
		
	
		sp_docs_menu['console'] = [];
		
			sp_docs_menu['console'].push('product-guide');
		
			sp_docs_menu['console'].push('quickstart');
		
	
		sp_docs_menu['errors'] = [];
		
			sp_docs_menu['errors'].push('2000');
		
			sp_docs_menu['errors'].push('2001');
		
			sp_docs_menu['errors'].push('2002');
		
			sp_docs_menu['errors'].push('2003');
		
			sp_docs_menu['errors'].push('2004');
		
			sp_docs_menu['errors'].push('2005');
		
			sp_docs_menu['errors'].push('2006');
		
			sp_docs_menu['errors'].push('2007');
		
			sp_docs_menu['errors'].push('2008');
		
			sp_docs_menu['errors'].push('2009');
		
			sp_docs_menu['errors'].push('2010');
		
			sp_docs_menu['errors'].push('2011');
		
			sp_docs_menu['errors'].push('2012');
		
			sp_docs_menu['errors'].push('2013');
		
			sp_docs_menu['errors'].push('2014');
		
			sp_docs_menu['errors'].push('2015');
		
			sp_docs_menu['errors'].push('2016');
		
			sp_docs_menu['errors'].push('2017');
		
			sp_docs_menu['errors'].push('2018');
		
			sp_docs_menu['errors'].push('2100');
		
			sp_docs_menu['errors'].push('2101');
		
			sp_docs_menu['errors'].push('2102');
		
			sp_docs_menu['errors'].push('2103');
		
			sp_docs_menu['errors'].push('2104');
		
			sp_docs_menu['errors'].push('2105');
		
			sp_docs_menu['errors'].push('2106');
		
			sp_docs_menu['errors'].push('2107');
		
			sp_docs_menu['errors'].push('3000');
		
			sp_docs_menu['errors'].push('3001');
		
			sp_docs_menu['errors'].push('3002');
		
			sp_docs_menu['errors'].push('3003');
		
			sp_docs_menu['errors'].push('3004');
		
			sp_docs_menu['errors'].push('5100');
		
			sp_docs_menu['errors'].push('5101');
		
			sp_docs_menu['errors'].push('5102');
		
			sp_docs_menu['errors'].push('5103');
		
			sp_docs_menu['errors'].push('5114');
		
			sp_docs_menu['errors'].push('6100');
		
			sp_docs_menu['errors'].push('9000');
		
			sp_docs_menu['errors'].push('9001');
		
			sp_docs_menu['errors'].push('9002');
		
			sp_docs_menu['errors'].push('9003');
		
			sp_docs_menu['errors'].push('9004');
		
			sp_docs_menu['errors'].push('9005');
		
			sp_docs_menu['errors'].push('9006');
		
	
		sp_docs_menu['home'] = [];
		
	
		sp_docs_menu['how-do-i'] = [];
		
	
		sp_docs_menu['images'] = [];
		
	
		sp_docs_menu['java'] = [];
		
			sp_docs_menu['java'].push('product-guide');
		
			sp_docs_menu['java'].push('quickstart');
		
	
		sp_docs_menu['javascripts'] = [];
		
	
		sp_docs_menu['php'] = [];
		
			sp_docs_menu['php'].push('product-guide');
		
			sp_docs_menu['php'].push('quickstart');
		
	
		sp_docs_menu['python'] = [];
		
			sp_docs_menu['python'].push('product-guide');
		
			sp_docs_menu['python'].push('quickstart');
		
	
		sp_docs_menu['rest'] = [];
		
			sp_docs_menu['rest'].push('api');
		
			sp_docs_menu['rest'].push('product-guide');
		
			sp_docs_menu['rest'].push('quickstart');
		
	
		sp_docs_menu['ruby'] = [];
		
			sp_docs_menu['ruby'].push('product-guide');
		
			sp_docs_menu['ruby'].push('quickstart');
		
	
		sp_docs_menu['sample-apps'] = [];
		
	
		sp_docs_menu['stylesheets'] = [];
		
	
</script>

<div id="page">

  <div id="header-wrapper">
  	<header id="header" role="banner" class="container">
      <hgroup id="name-and-slogan">
  <h1 id="site-name">
    <a href="http://www.stormpath.com/" title="Home" rel="home"><span>Stormpath</span></a>
  </h1>
</hgroup><!-- /#name-and-slogan -->

<div id="navigation"><div class="menu-button">Menu</div>
<nav id="main-menu" role="navigation">
  <h2 class="element-invisible">Main menu</h2>
<ul class="links inline clearfix">
<li class="menu-1413 first"><a href="/" title="Documentation">Docs</a></li>
<li class="menu-710"><a href="http://www.stormpath.com/product">Product</a></li>
<li class="menu-709"><a href="http://www.stormpath.com/pricing">Pricing</a></li>
<li class="menu-438"><a href="https://support.stormpath.com/" title="">Support</a></li>
<li class="menu-547"><a href="http://www.jobscore.com/jobs/stormpath" title="Jobs at Stormpath. Join us!">Jobs</a></li>
<li class="menu-556"><a href="http://api.stormpath.com" title="">Log in</a></li>
<li class="menu-1328 last"><a href="https://api.stormpath.com/register" title="">Sign up</a></li>
</ul>
</nav>
</div>
    </header>
  </div>
  <div id="main-wrapper">
    <div id="main" class="container">
      <div id="main-inner">
        <div id="main-inner-inner">
          <div id="content" class="column" role="main">
            <a id="main-content"></a>
            
              <h1 class="title" id="page-title">Stormpath Ruby Product Guide</h1>
            
          	<p>Stormpath is a User Management API that reduces development time with instant-on, scalable user infrastructure. Stormpath’s intuitive API and expert support make it easy for developers to authenticate, manage and secure users and roles in any application.</p>

<p>For help to quickly get started with Stormpath, refer to the <a href="/ruby/quickstart">Ruby Quickstart Guide</a>.</p>

<hr />

<h2><a id="what-is-stormpath"></a>What is Stormpath?</h2>

<p>Stormpath is the first easy, secure user management and authentication service for developers.</p>

<p>Fast and intuitive to use, Stormpath enables plug-and-play security and accelerates application development on any platform.</p>

<p>Built for developers, it offers an easy API, open source SDKs, and an active community. The flexible cloud service can manage millions of users with a scalable pricing model that is ideal for projects of any size.</p>

<p>By offloading user management and authentication to Stormpath, developers can bring new applications to market faster, reduce development and operations costs, and protect their users with best-in-class security.</p>

<h3><a id="architectural-overview"></a>Architectural Overview</h3>

<p><img src="/images/docs/Architecture.png" title="High-level Architecture" alt="" /></p>

<h3><a id="stormpath-admin-console"></a>Stormpath Admin Console</h3>

<p>The Stormpath Admin Console allows authorized administrators to:</p>

<ul>
<li>Configure applications to access Stormpath</li>
<li>Create and manage accounts and adjust group membership</li>
<li>Create and manage directories and the associated groups</li>
<li>Map directories and groups to allow accounts to log in to integrated applications</li>
<li>Configure workflow or account administration automation</li>
</ul>


<p>To access the Stormpath Admin Console, visit <a href="https://api.stormpath.com/login">https://api.stormpath.com/login</a></p>

<h3><a id="rest-api"></a>REST API</h3>

<p>The Stormpath API offers authorized developers and administrators programmatic access to:</p>

<ul>
<li>Securely authenticate accounts.</li>
<li>Create and manage accounts and adjust group membership.</li>
<li>Manage directories.</li>
<li>Manage groups.</li>
<li>Initiate and process account automations.</li>
</ul>


<p>For more detailed documentation on the Stormpath API, visit the <a href="/rest/product-guide">REST Product Guide</a>.</p>

<h3><a id="ruby-sdk"></a>Ruby SDK</h3>

<p>The Stormpath Ruby SDK allows any Ruby-based application to easily use the Stormpath user management service for all authentication and access control needs. The Ruby SDK can be found on <a href="https://github.com/stormpath/stormpath-sdk-ruby">Github</a>.</p>

<p>When you make SDK method calls, the calls are translated into HTTPS requests to the Stormpath REST+JSON API. The Stormpath Ruby SDK therefore provides a clean object-oriented paradigm natural to Ruby developers and alleviates the need to know how to make REST+JSON requests.</p>

<p>This SDK is compatible with the <em>1.9.3</em> and later versions of Ruby. The sample codes of this documentation are based on version <em>1.0.0.beta</em> or greater of the Ruby SDK.</p>

<p>Stormpath also offers guides and SDKs for <a href="/java/product-guide">Java</a>, <a href="/php/product-guide">PHP</a>, and <a href="/python/product-guide">Python</a>.</p>

<p>If you are using a language that does not yet have an SDK, you can use the REST API directly and refer to the <a href="/docs/rest/product-guide" title="API">REST API Product Guide.</a></p>

<hr />

<h2><a id="sdk-concepts"></a>SDK Concepts</h2>

<p>Throughout this guide, code examples appear using the Stormpath Ruby SDK.</p>

<p>Although knowing how the SDK is designed and how it works is not required to use it, knowing some of the design details will help you use it more efficiently and effectively.</p>

<h3><a id="client"></a>Client</h3>

<p>The root entry point for SDK functionality is the <code>Client</code> instance. Using the client instance, you can access all tenant data, such as applications, directories, groups, and accounts.</p>

<h4>Preferred Configuration</h4>

<p>There are different ways to create a client instance to interact with your resources. The preferred mechanism is by reading a secure <code>apiKey.properties</code> file, where the Client instance is generated from the api key credentials:</p>

<pre><code>require "stormpath-sdk"

client = Stormpath::Client.new api_key_file_location: File.join(ENV['HOME'], '.stormpath', 'apiKey.properties')
</code></pre>

<p>This is heavily recommended if you have access to the file system.</p>

<h4>Single URL Configuration</h4>

<p>The <a href="/ruby/quickstart">Ruby Quickstart Guide</a> assumes you have easy access to an <code>apiKey.properties</code> file. Some applications however might not have access to the file system (such as Heroku) applications. In these cases, you can also create a client instance using a single URL, where often the URL is available as an environment variable, such as <code>ENV</code>.</p>

<p>This technique requires embedding the API key ID and Secret as components in a URL allowing you to have a single URL that contains all necessary information required to construct a <code>Client</code>.</p>

<div class='docs-warning'><p>Do not use this technique if you have access to a file system. Depending on the environment, environment variables are less secure than reading a permission-restricted file like <code>apiKey.properties</code>.</p>
</div>


<p>If you do not have access to the file system to read an <code>apiKey.properties</code> file, you can create a <code>Client</code> instance from the URL. The <code>Client</code> accepts a single URL of the application Stormpath HREF with the API key information embedded in the URL. For example:</p>

<pre><code>application_href = "https://apiKeyId:apiKeySecret@api.stormpath.com/v1/applications/YOUR_APP_UID_HERE"
</code></pre>

<p>Make sure that the <code>apiKeyId</code> and <code>apiKeySecret</code> components are URL-encoded.</p>

<p>You can acquire the <code>Application</code> instance by calling the <code>load</code> class method of the <code>Application</code> class, then you can get the <code>Client</code> instance from the application:</p>

<pre><code>require "stormpath-sdk"

application = Stormpath::Resource::Application::load application_href
client = application.client
</code></pre>

<h4>API Key Configuration</h4>

<p>Another way to create a client is by creating an <code>ApiKey</code> instance with the API credentials and passing this instance to create the client instance:</p>

<pre><code>require "stormpath-sdk"

api_key = Stormpath::ApiKey.new 'api_id', 'api_secret'
client = Stormpath::Client.new  api_key: api_key
</code></pre>

<div class='docs-note'><p>DO NOT specify your actual <code>apiKey.id</code> and <code>apiKey.secret</code> values in source code! They are secure values associated with a specific person. You should never expose these values to other people, not even other co-workers.</p>
</div>


<p>Only use this technique if the values are obtained at runtime using a configuration mechanism that is not hard-coded into source code or easily-visible configuration files.</p>

<h3><a id="high-level-overview"></a>High-level Overview</h3>

<p>The Stormpath SDK and the associated components reside and execute within your application at runtime. When making method calls on the SDK objects &ndash; particularly objects that represent REST data resources such as applications and accounts &ndash; the method call automatically triggers an HTTPS request to the Stormpath API server if necessary.</p>

<p>The HTTPS request allows you to program your application code to use regular Ruby objects and alleviates you from worrying about the lower-level HTTP REST+JSON details and individual REST resource HTTP endpoints.</p>

<p>Here is how the communication works:<br />
<img src="/images/docs/SDKCommunicationFlow.png" width="700" title="SDK Communication Flow" alt="" /></p>

<p>In this example, the request is trying to determine the <code>directory</code> of the existing SDK <code>account</code> resource instance.</p>

<p>The request is broken down as follows:</p>

<ol>
<li>The application attempts to acquire the account directory instance.</li>
<li>If the directory resource is not already in memory, the SDK creates a request to send to the Stormpath API server.</li>
<li>An HTTPS GET request is executed.</li>
<li>The Stormpath API server authenticates the request caller and looks up the directory resource.</li>
<li>The Stormpath API server responds with the JSON representation of the directory resource.</li>
<li>The Stormpath SDK transforms the JSON response into a directory object instance.</li>
<li>The directory instance is returned to the application.</li>
</ol>


<h3><a id="detailed-design"></a>Detailed Design</h3>

<p>The Stormpath SDK is designed with two primary design principles:</p>

<ul>
<li><p><strong>Composition</strong><br />
Although most SDK end users never need to customize the implementation behavior of an SDK, the SDK is pluggable meaning that the functionality can be customized by plugging in new implementations of relevant components. The SDK leans toward the <a href="http://en.wikipedia.org/wiki/Software_interface#Software_interfaces">programming to interfaces</a> (as much it they can be applied to Ruby) and principles of <a href="http://en.wikipedia.org/wiki/Object_composition">object composition</a> to support pluggability. Even if SDK end users never leverage this design, the design helps the Stormpath development team provide support and bug fixes without disrupting existing SDK usages.</p></li>
<li><p><strong>Proxying</strong><br />
Ruby instances representing REST resources use the <a href="http://en.wikipedia.org/wiki/Proxy_pattern">Proxy software design pattern</a> to intercept property access allowing the SDK implementation to automatically load the resource data or other referenced resources if necessary.</p></li>
</ul>


<h4>Architectural Components</h4>

<p>The core component concepts of the SDK are as follows:<br />
<img src="/images/docs/ComponentArchitecture.png" height="430" width="700" title="Stormpath SDK Component Architecture" alt="" /></p>

<ul>
<li><strong>Client</strong> is the root entry point for SDK functionality and accessing other SDK components, such as the <code>DataStore</code>. A client is constructed with a Stormpath API key which is required to communicate with the Stormpath API server. After it is constructed, the client delegates to an internal DataStore to do most of its work.</li>
<li><strong>DataStore</strong> is central to the Stormpath SDK. It is responsible for managing all Ruby <code>resource</code> objects that represent Stormpath REST data resources such as applications, directories, and accounts. The DataStore is also responsible for translating calls made on Ruby <code>resource</code> objects into REST requests to the Stormpath API server as necessary. It works between your application and the Stormpath API server

<ul>
<li><strong>RequestExecutor</strong> is an internal infrastructure component used by the <code>DataStore</code> to execute HTTP requests (<code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>) as necessary. When the DataStore needs to send a Ruby <code>Resource</code> instance state to or query the server for resources, it delegates to the RequestExecutor to perform the actual HTTP requests. The Stormpath SDK default <code>RequestExecutor</code> implementation is <code>HttpClientRequestExecutor</code> which uses the <a href="http://rubygems.org/gems/httpclient">httpclient</a> to execute the raw requests and read the raw responses.</li>
<li><strong>MapMarshaller</strong> is an library used by the <code>DataStore</code> to convert JSON strings into Ruby <code>Hash</code> instances or the reverse. The Hash instances are used by the <code>ResourceFactory</code> to construct standard Ruby objects representing REST resources. The Stormpath SDK default <code>MapMarshaller</code> is the <a href="http://rubygems.org/gems/multi_json">multi JSON gem</a>.</li>
<li><strong>ResourceFactory</strong> is an internal infrastructure component used by the <code>DataStore</code> to convert REST resource map data into standard Ruby <code>resource</code> objects. The ResourceFactory uses hashes from multi JSON to construct the Ruby resource instances.</li>
<li><strong>Resources</strong> are standard Ruby objects that have a 1-to-1 correlation with REST data resources in the Stormpath API server such as applications and directories. Applications directly use these <code>resource</code> objects for security needs, such as authenticating user accounts, creating groups and accounts, finding application accounts, assigning accounts to groups, and resetting passwords.</li>
</ul>
</li>
</ul>


<h3><a id="resources-and-proxying"></a>Resources and Proxying</h3>

<p>When applications interact with a Stormpath SDK <code>resource</code> instance, they are really interacting with an intelligent data-aware proxy, not a simple object with some properties. Specifically, the <code>resource</code> instance is a proxy to the SDK client <code>DataStore</code> allowing resource instances to load data that might not yet be available.</p>

<p>For example, using the SDK Communication Flow diagram in the <a href="#HighLevelOverview">high-level overview</a> section, assuming you have a reference to an <code>account</code> object &ndash; perhaps you have queried for it or you already have the account <code>href</code> and you want to load the <code>account</code> resource from the server:</p>

<pre><code>account_href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
account = client.accounts.get account_href
</code></pre>

<p>This retrieves the account at the specified <code>href</code> location using an HTTP <code>GET</code> request.</p>

<p>If you also want information about the <code>directory</code> owning that account, every account has a reference to the parent directory location in the JSON representation. For example:</p>

<pre><code>{
  "givenName": "John",
  "surname": "Smith",
  ...
  "directory": {
      "href": "https://api.stormpath.com/v1/directories/someDirectoryIdHere"
  }
  ...
}
</code></pre>

<p>Notice the JSON <code>directory</code> property is only a link (pointer) to the directory; it does not contain any of the directory properties. The JSON shows we should be able to reference the <code>directory</code> property, and then reference the <code>href</code> property, and do another lookup (pseudo code):</p>

<pre><code>directory_href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
directory = client.directories.get directory_href
</code></pre>

<p>This technique is cumbersome, verbose, and requires a lot of boilerplate code in your project. As such, SDK resources <strong>automatically</strong> execute the lookups for unloaded references for you using simple property navigation!</p>

<p>The previous lookup becomes:</p>

<pre><code>directory = account.directory
</code></pre>

<p>If the directory already exists in memory because the <code>DataStore</code> has previousy loaded it, the directory is immediately returned. However, if the directory is not present, the directory <code>href</code> is used to return the directory properties (the immediate data loaded) automatically for you. This technique is known as <em>lazy loading</em> which allows you to traverse entire object graphs automatically without requiring constant knowledge of <code>href</code> URLs.</p>

<h3><a id="error-handling"></a>Error Handling</h3>

<p>Errors thrown from the server are translated to a <a href="https://github.com/stormpath/stormpath-sdk-ruby/blob/master/lib/stormpath-sdk/error.rb">Stormpath Error</a>. This applies to all requests to the Stormpath API endpoints.</p>

<p>For example, when getting the current tenant from the client you can catch any error that the request might produce as follows:</p>

<pre><code>begin

  tenant = client.tenant

rescue Stormpath::Error =&gt; e
  p 'Message: ' + e.message
  p 'HTTP Status: ' + e.status.to_s
  p 'Developer Message: ' + e.developer_message
  p 'More Information: ' + e.more_info
  p 'Error Code: ' + e.code.to_s
end
</code></pre>

<hr />

<h2><a id="applications"></a>Applications</h2>

<p>An <a href="#Application" title="Application">application</a> in Stormpath represents a real world software application that communicates with Stormpath for its user management and authentication needs.</p>

<p>When defining an application in Stormpath, it is typically associated with one or more directories or groups. The associated directories and groups form the application <em>user base</em>. The accounts within the associated directories and groups are considered the application users and can login to the application.</p>

<p>For applications, the basic details include:</p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Name </td>
<td align="left"> The name used to identify the application within Stormpath. This value must be unique.</td>
</tr>
<tr>
<td align="left">Description </td>
<td align="left"> A short description of the application.</td>
</tr>
<tr>
<td align="left">Status </td>
<td align="left"> By default, this value is set to Enabled. Change the value to Disabled if you want to prevent accounts from logging in to the application.</td>
</tr>
</tbody>
</table>


<div class='docs-note'><p>A URL for the application is often helpful.</p>
</div>


<p>For applications, you can:</p>

<ul>
<li><a href="#locate-the-application-rest-url">Locate the application REST URL</a> within the Stormpath Admin Console.</li>
<li><a href="#list-applications">List applications</a>.</li>
<li><a href="#retrieve-an-application">Retrieve an application</a>.</li>
<li><a href="#register-an-application">Register an application</a>.</li>
<li><a href="#edit-an-application">Edit the details of an application</a>.</li>
<li><a href="#enable-an-application">Enable an application</a>.</li>
<li><a href="#disable-an-application">Disable an application</a>.</li>
<li><a href="#disable-an-application">Delete an application</a>.</p></li>
</ul>


<h3><a id="locate-the-application-rest-url"></a>Locate the Application REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference an application using the REST URL or <code>href</code>. For example, you require the REST URL to delete applications or to obtain a listing of accounts mapped to an application.</p>

<p>To obtain an application REST URL:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Applications</strong> tab.</li>
<li>In the Applications table, click the application name.<br />
The REST URL appears on the Details tab.<br />
<img src="/images/docs/AppResturl.png" title="Application Resturl" alt="" /></li>
</ol>


<h3><a id="list-applications"></a>List Applications</h3>

<p>To retrieve a list of applications, you must do the following:</p>

<p>Get the tenant applications from the client.</p>

<p><strong>Code:</strong></p>

<pre><code>client.applications.each do |application|
  p "Application: #{application.name}"
  p "Application Description: #{application.description}"
  p "Application Status: #{application.status}"
end
</code></pre>

<h3><a id="retrieve-an-application"></a>Retrieve an Application</h3>

<p>You will typically retrieve an <code>Application</code> referenced from another resource, for example using the <code>Application Collection</code> property of the <code>Tenant</code> resource.</p>

<p>You can also directly retrieve a specific application using the <code>href</code> (REST URL) value. For any application, you can <a href="#LocateAppURL">find the application href</a> in the Stormpath console. This can be particularly useful when you need an application href for the to create a <code>Client</code> instance.</p>

<p>After you have the <code>href</code> it can be loaded directly as an object instance by retrieving it from the server, using the client:</p>

<pre><code>application_href = 'https://api.stormpath.com/v1/applications/APP_UID_HERE'
application = client.applications.get application_href
</code></pre>

<h3><a id="register-an-application"></a>Register an Application</h3>

<p>To authenticate a user account in your <a href="#Application">application</a>, you must first register the application with Stormpath.</p>

<p>To register an application you must create it from the client instance:</p>

<pre><code>application = client.applications.create({
  name: 'This Is My Ruby App',
  description: 'This is my ruby app description'
})
</code></pre>

<h3><a id="edit-an-application"></a>Edit an Application</h3>

<p>To edit applications, use the <code>_accessors_</code> of an existing application instance to set the values and call the <code>save</code> method:</p>

<pre><code>application.status = Status::DISABLED  # the Status class provides the valid status' constants
application.name = 'New Application Name'
application.description = 'New Application Description'

application.save
</code></pre>

<h3><a id="enable-an-application"></a>Enable an Application</h3>

<p>Enabling a previously disabled application allows any enabled directories, groups, and accounts associated with the application account store in Stormpath to log in.</p>

<p>To enable an application, you must set the &lsquo;ENABLED&rsquo; status to the application instance and call the &lsquo;save&rsquo; method on it:</p>

<p><strong>Code:</strong></p>

<pre><code>application.status = Status::ENABLED  # the Status class provides the valid status' constants

application.save
</code></pre>

<h3><a id="disable-an-application"></a>Disable an Application</h3>

<p>Disabling an application prevents the application from logging in any accounts in Stormpath, but retains all application configurations. If you must temporarily turn off logins, disable an application.</p>

<div class='docs-note'><p>The Stormpath IAM application cannot be disabled.</p>
</div>


<p>To disable an application, you must set the &lsquo;DISABLED&rsquo; status to the application instance and call the &lsquo;save&rsquo; method on it:</p>

<p><strong>Code:</strong></p>

<pre><code>application.status = Status::DISABLED  # the Status class provides the valid status' constants

application.save
</code></pre>

<h3><a id="delete-an-application"></a>Delete an Application</h3>

<p>Deleting an application completely erases the application and its configurations from Stormpath. We recommend that you disable an application rather than delete it, if you anticipate that you might use the application again.</p>

<div class='docs-note'><ul>
<li>The Stormpath IAM application cannot be deleted.</li>
<li>Deleted applications cannot be restored.</li>
</ul>

</div>


<p>To delete an application, you must call the &lsquo;delete&rsquo; method on the application instance.</p>

<p><strong>Code:</strong></p>

<pre><code>application.delete
</code></pre>

<hr />

<h2><a id="account-store-mappings"></a>Account Store Mappings</h2>

<p>Account Store is a generic term for either a Directory or a Group. Directories and Groups are both considered “account stores” because they both contain, or ‘store’, Accounts. An Account Store Mapping, then, is a relationship between an Account Store and an Application.</p>

<p>In Stormpath, you control who may login to an application by associating (or ‘mapping’) one or more account stores to an application. All of the accounts in the application’s assigned account stores form the application’s effective user base; those accounts may login to the application. If no account stores are assigned to an application, no accounts will be able to login to the application.</p>

<p>You control which account stores are assigned (mapped) to an application, and the order in which they are consulted during a login attempt, by manipulating an application’s <code>AccountStoreMapping</code> resources.</p>

<h4>How Login Attempts Work</h4>

<p><strong>Example:</strong>
Assume an application named Foo has been mapped to two account stores, the Customers and Employees directories, in that order.</p>

<p>Here is what happens when a user attempts to log in to an application named Foo:</p>

<p><img src="/images/docs/LoginAttemptFlow.png" height="500" width="650" title="Account Stores Diagram" alt="Account Stores Diagram" /></p>

<p>You can configure multiple account stores, but only one is required for logging in. Multiple account stores allows each application to view multiple directories as a single repository during a login attempt.</p>

<h3><a id="account-store-mapping-resource"></a>Account Store Mapping Resource</h3>

<p>An individual <code>accountStoreMapping</code> resource may be accessed via its Resource URI:</p>

<p><a class="anchor" name="account-store-mapping-url"></a>
<strong>Resource URI</strong></p>

<pre><code>/v1/accountStoreMappings/:accountStoreMappingId
</code></pre>

<p><a class="anchor" name="account-store-mapping-resource-attributes"></a>
<strong>Resource Attributes</strong></p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
<th align="left"> Type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">href </td>
<td align="left"> The Account Store Mapping resource&rsquo;s fully qualified location URI. </td>
<td align="left"> String</td>
</tr>
<tr>
<td align="left">application </td>
<td align="left"> A link to the mapping&rsquo;s Application </td>
<td align="left"> Link </td>
</tr>
<tr>
<td align="left">accountStore </td>
<td align="left"> A link to the mapping&rsquo;s Account Store (either a Group or Directory) containing accounts that may login to the application. </td>
<td align="left"> Link </td>
</tr>
<tr>
<td align="left">listIndex </td>
<td align="left"> The order (priority) when the associated Account Store will be consulted by the Application during an authentication attempt.  This is a zero-based index; an account store at listIndex of <code>0</code> will be consulted first (has the highest priority), followed the account store at listIndex <code>1</code> (next highest priority), etc.  Setting a negative value will default the value to <code>0</code>, placing it first in the list.  A listIndex of larger than the current list size will place the mapping at the end of the list and then default the value to <code>(list size - 1)</code>. </td>
<td align="left"> Integer</td>
</tr>
<tr>
<td align="left">isDefaultAccountStore </td>
<td align="left"> A <code>true</code> value indicates that new accounts created by the application will be automatically saved to the mapping&rsquo;s Account Store. A <code>false</code> value indicates that new accounts created by the application will not be saved to the Account Store. </td>
<td align="left"> Boolean</td>
</tr>
<tr>
<td align="left">isDefaultGroupStore </td>
<td align="left"> A <code>true</code> value indicates that new groups created by the Application will be automatically saved to the mapping&rsquo;s AccountStore. A <code>false</code> value indicates that new groups created by the application will not be saved to the <code>accountStore</code>. <strong>This may only be set to <code>true</code> if the AccountStore is a Directory.  Stormpath does not currently support Groups storing other Groups.</strong> </td>
<td align="left"> Boolean</td>
</tr>
</tbody>
</table>


<p>For Account Store Mappings you may:</p>

<ul>
<li><a href="#create-an-account-store-mapping">Create an Account Store Mapping</a></li>
<li><a href="#retrive-an-account-store-mapping">Retrive an Account Store Mapping</a></li>
<li><a href="#change-account-store-priority">Change the Account Store priority order</a></li>
<li><a href="#change-default-account-store-and-default-group-store">Change Default Account Store and Default Group Store</a></li>
<li><a href="#remove-account-store">Remove Account Stores</a>.</li>
</ul>


<p>To manage application account stores, you must log in to the Stormpath Admin Console:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Applications</strong> tab.</li>
<li>Click the application name.</li>
<li>Click the <strong>Account Stores</strong> tab.<br /></li>
</ol>


<h4>Create an Account Store Mapping</h4>

<p>Adding a account store to an application provisions a directory or group to that application.  By doing so, all accounts in the account store can log into the application.</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Applications</strong> tab.</li>
<li>Click the application name.</li>
<li>Click the <strong>Account Store</strong> tab.</li>
<li>Click <strong>Add Account Store</strong>.</li>
<li>In the <em>account store</em> list, select the appropriate directory.<br /></li>
<li>If the directory contains groups, you can select all users or specific group for access.<br /></li>
<li>Click <strong>Add Account Store</strong>.<br /></li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>account_store_mapping = client.account_store_mappings.create({ 
    application: application, # an application resource object 
    account_store: directory, # a directory or a group resource object 
    list_index: 0, 
    is_default_account_store: true, 
    is_default_group_store: true 
}) 
</code></pre>

<hr />

<h4>Retrive an account store mapping</h4>

<p>Account store mappings are retrivable through their REST URL:</p>

<p><strong>Code:</strong></p>

<pre><code>example_url = 'https://api.stormpath.com/v1/accountStoreMappings/:accountStoreMappingId'
account_store_mapping = client.account_store_mappings.get example_url

application = account_store_mapping.application 
account_store = account_store_mapping.account_store # this could be a directory or a group instance 
list_index = account_store_mapping.list_index 
is_default_account_store = account_store_mapping.default_account_store? # true of false
is_default_group_store = account_store_mapping.default_group_store? # true or false
</code></pre>

<hr />

<h4>Change Account Store Priority</h4>

<p>When you map multiple account store to an application, you must also define the account store order.</p>

<p>The account store order is important during the login attempt for a user account because of cases where the same user account exists in multiple directories. When a user account attempts to log in to an application, Stormpath searches the listed account store in the order specified, and uses the credentials (password) of the first occurrence of the user account to validate the login attempt.</p>

<p>To specify the account store order:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Applications</strong> tab.</li>
<li>Click the application name.</li>
<li>Click the <strong>Account Store</strong> tab.</li>
<li>Click the row of the directory to move.</li>
<li>Drag the row to the appropriate order.<br />
 For example, if you want to switch the first account store and the second account store, click anywhere in the first row of the account store table and drop the row on the second row.</li>
<li>Click <strong>Save Priorities</strong>.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>account_store_mapping.list_index = 1
account_store_mapping.save
</code></pre>

<hr />

<h4>Change Default Account Store and Default Group Store:</h4>

<p>When you map multiple account store to an application, you must also define the account store order.</p>

<p>New accounts created by the application will be automatically saved to the mapping’s default account store.
New groups created by the application will be automatically saved to the mapping’s default group store.</p>

<p>To specify the default account or group store:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Applications</strong> tab.</li>
<li>Click the application name.</li>
<li>Click the <strong>Account Store</strong> tab.</li>
<li>Click the radio buttons to toggle between default account and group locations (stores).</li>
<li>Click <strong>Save</strong>.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>account_store_mapping.default_account_store = directory # this can be a directory or a group instance
account_store.mapping.default_group_store = directory # this can only be a directory instance
account_store_mapping.save
</code></pre>

<hr />

<h4>Remove Account Stores</h4>

<p>Removing a account store from an application deprovisions that directory or group from the application. By doing so, all accounts from the account store are no longer able to log into the application.</p>

<p>To remove a account store from an application:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Applications</strong> tab.</li>
<li>Click the application name.</li>
<li>Click the <strong>Account stores</strong> tab.</li>
<li>On the Account stores tab, locate the directory or group.</li>
<li>Under the Actions column, click <strong>Remove</strong>.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>account_store_mapping.delete
</code></pre>

<hr />

<h2><a id="directories"></a>Directories</h2>

<p><a href="#Directory">Directories</a> contain <a href="#Authentication">authentication</a> and <a href="#Authorization">authorization</a> information about users and groups. Stormpath supports an unlimited number of directories. Administrators can use different directories to create silos of users. For example, you might store your customers in one directory and your employees in another.</p>

<p>For directories, the basic details include:</p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Name </td>
<td align="left"> The name used to identify the directory within Stormpath. This value must be unique.</td>
</tr>
<tr>
<td align="left">Description </td>
<td align="left"> Details about this specific directory. (Optional)</td>
</tr>
<tr>
<td align="left">Status </td>
<td align="left"> By default, this value is set to Enabled. Change the value to Disabled if you want to prevent all user accounts in the directory from authenticating even where the directory is set as an account store to an application.</td>
</tr>
</tbody>
</table>


<p>Within Stormpath, there are two types of directories you can implement:</p>

<ul>
<li>A <strong>Cloud</strong> directory, also known as a Stormpath-managed directory, which is hosted by Stormpath and uses the Stormpath data model to store user and group information. This is the default and most common type of directory in Stormpath.</li>
<li>A <strong>Mirror</strong> directory, which is a Stormpath-hosted directory populated with data pushed from your existing LDAP/AD directory using a Stormpath synchronization agent. All user management is done on your existing LDAP/AD directory, but the cloud mirror can be accessed through the Stormpath APIs on your modern applications.

<ul>
<li>LDAP/AD directories cannot be created using the API.</li>
<li>You can specify various LDAP/AD object and attribute settings of the specific LDAP/AD server for users and groups via the Stormpath Admin Console.</li>
<li>If the agent status is Online, but you are unable to see any data when browsing your LDAP/AD mapped directory, it is likely that your object and filters are configured incorrectly.</li>
</ul>
</li>
</ul>


<p>You can add as many directories of each type as you require. Changing group memberships, adding accounts, or deleting accounts in directories affects ALL applications to which the directories are mapped as <a href="#LoginSource" title="login source">account stores</a>.</p>

<p>LDAP/AD accounts and groups are automatically deleted when:</p>

<ul>
<li>The backing object is deleted from the LDAP/AD directory service.</li>
<li>The backing LDAP/AD object information no longer matches the filter criterias configured for the agent.</li>
<li>The LDAP/AD directory is deleted.</li>
</ul>


<p>For directories, you can:</p>

<ul>
<li><a href="#LocateDirURL">Locate the directory REST URL</a>.</li>
<li><a href="#ListDirectories">List directories</a>.</li>
<li><a href="#RetrieveDir">Retrieve directories</a>.</li>
<li><a href="#CreateDir">Create a directory</a>.

<ul>
<li><a href="#CreateCloud">Create a cloud directory</a>.</li>
<li><a href="#CreateMirror">Create a mirrored (LDAP) directory</a>.</li>
</ul>
</li>
<li><a href="#AssocApplications">Map directories to applications</a>.</li>
<li><a href="#EditDir">Edit directory details</a>.</li>
<li><a href="#UpdateAgent">Update agent configuration</a>.</li>
<li><a href="#EnableDir">Enable a directory</a>.</li>
<li><a href="#DisableDir">Disable a directory</a>.</li>
<li><a href="#DeleteDir">Delete a directory</a>.</li>
</ul>


<h3><a id="locate-the-directory-rest-url"></a>Locate the Directory REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference a directory using the REST URL or <code>href</code>. For example, you require the REST URL to create accounts in the directory using an SDK.</p>

<p>To obtain a directory REST URL:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Directories</strong> tab.</li>
<li>In the Directories table, click the directory name.<br />
The REST URL appears on the Details tab.<br />
<img src="/images/docs/Resturl.png" title="Application Resturl" alt="" /></li>
</ol>


<h3><a id="list-directories"></a>List Directories</h3>

<p>To retrieve directories, you must:</p>

<ol>
<li>Get the directories from the client.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>    require "stormpath-sdk"
    ...
    ...
    client.directories.each do |dir|
        p '** Directory: ' + dir.name
        p '   Description: ' + ((dir.description.nil?) ? '-' : dir.description)
        p '   Status: ' + dir.status
    end
</code></pre>

<h3><a id="retrieve-a-directory"></a>Retrieve a Directory</h3>

<p>You will typically retrieve a <code>Directory</code> linked from another resource.</p>

<p>You can also retrieve it or as a direct reference, such as <code>account.directory</code>.</p>

<p>Finally, you can also directly retrieve a specific directory using the <code>href</code> (REST URL) value. For any directory, you can <a href="#LocateDirURL">find the directory href</a> in the Stormpath console.</p>

<p>After you have the <code>href</code> it can be loaded directly as an object instance by retrieving it from the server, using the client:</p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
directory = client.directories.get href 
</code></pre>

<h3><a id="create-a-directory"></a>Create a Directory</h3>

<p>To create a directory for application authentication, you must know which type of directory service to use.</p>

<p>You can create a:</p>

<ul>
<li><a href="#CreateCloud">Cloud directory</a>, which is hosted by Stormpath and uses the Stormpath data model to store user and group information. This is the most common type of directory in Stormpath.</li>
</ul>


<p><strong>OR</strong></p>

<ul>
<li><a href="#CreateMirror">Mirrored (LDAP) directory</a>, which uses a synchronization agent for your existing LDAP/AD directory. All user account management is done on your existing LDAP/AD directory with the Stormpath agent mirroring the primary LDAP/AD server.</li>
</ul>


<div class='docs-note'><p>The ability to create a mirrored, or agent, directory is connected to your subscription. If the option is not available, click the question mark for more information.</p>
</div>


<h4>Create a Cloud Directory</h4>

<pre><code>require "stormpath-sdk"
...
...
directory = client.directories.create({
    name: "New Directory",
    description: "New Directory Description"
})
</code></pre>

<h4>Create a Mirrored Directory</h4>

<p>Mirrored directories, after initial configuration, are accessible through the Agents tab of the directory.</p>

<ol>
<li>Click the <strong>Directories</strong> tab.</li>
<li>Click <strong>Create Directory</strong>.</li>
<li><p>Click <strong>Mirror</strong>.</p>

<p> <img src="/images/docs/CreateLDAPDirectory.png" width="650" title="Create Mirrored Directory" alt="Create LDAP Directory" /></p></li>
<li><p>On the 1. Directory Basics tab, complete the field values as follows:</p>

<table>
<thead>
<tr>
<th align="left"> Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Directory Name </td>
<td align="left"> A short name for this directory, unique from your other Stormpath directories.</td>
</tr>
<tr>
<td align="left">Directory Description </td>
<td align="left"> An optional description explaining the purpose for the directory.</td>
</tr>
<tr>
<td align="left">Directory Status </td>
<td align="left"> Whether or not the directory is to be used to authenticate accounts for any assigned applications. By default, this value is set to Enabled. Change the value to Disabled if you want to prevent all user accounts in the directory from authenticating even where the directory is set as a account store to an application.</td>
</tr>
</tbody>
</table>
</li>
<li><p>Click <strong>Next</strong>.</p>

<p> <img src="/images/docs/CreateLDAP2.png" width="650" title="Agent Configuration" alt="Agent Configuration" /></p></li>
<li><p>On the 2. Agent Configuration tab, complete the field values as follows::</p>

<table>
<thead>
<tr>
<th align="left"> Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Directory Service </td>
<td align="left"> The type of directory service to be mirrored. For example, LDAP.</td>
</tr>
<tr>
<td align="left">Directory Host </td>
<td align="left"> The IP address or Host name of the directory server to connect to. This domain must be accessible to the agent, for example, behind any firewall that might exist.</td>
</tr>
<tr>
<td align="left">Directory Port </td>
<td align="left"> The directory server port to connect to. Example: <code>10389</code> for LDAP, <code>10689</code> for LDAPS, however your directory server maybe configured differently.</td>
</tr>
<tr>
<td align="left">Use SSL </td>
<td align="left"> Should the agent socket connection to the directory use Secure Sockets Layer (SSL) encryption? The Directory Port must accept SSL.</td>
</tr>
<tr>
<td align="left">Agent User DN </td>
<td align="left"> The username used to connect to the directory. For example: <code>cn=admin,cn=users,dc=ad,dc=acmecorp,dc=com</code></td>
</tr>
<tr>
<td align="left">Agent Password </td>
<td align="left"> The agent user DN password.</td>
</tr>
<tr>
<td align="left">Base DN </td>
<td align="left"> The base Distinguished Name (DN) to use when querying the directory. For example, <code>o=mycompany,c=com</code></td>
</tr>
<tr>
<td align="left">Directory Services Poll Interval </td>
<td align="left"> How often (in minutes) to poll the directory to detect directory object changes.</td>
</tr>
</tbody>
</table>
</li>
<li><p>Click <strong>Next</strong>.</p>

<p> <img src="/images/docs/CreateLDAP3.png" width="640" title="Account Configuration" alt="Account Configuration" /></p></li>
<li><p>On the 3. Account Configuration tab, complete the field values as follows:</p>

<table>
<thead>
<tr>
<th align="left"> Attribute </th>
<th align="left"> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Account DN Suffix </td>
<td align="left"> Optional value appended to the Base DN when accessing accounts. For example, <code>ou=Users</code>. If left unspecified, account searches will stem from the Base DN.</td>
</tr>
<tr>
<td align="left">Account Object Class </td>
<td align="left"> The object class to use when loading accounts. For example, <code>user</code></td>
</tr>
<tr>
<td align="left">Account Object Filter </td>
<td align="left"> The filter to use when searching user objects.</td>
</tr>
<tr>
<td align="left">Account Email Attribute </td>
<td align="left"> The attribute field to use when loading the user email address. Example: <code>email</code></td>
</tr>
<tr>
<td align="left">Account First Name Attribute </td>
<td align="left"> The attribute field to use when loading the account first name.  Example: <code>givenname</code></td>
</tr>
<tr>
<td align="left">Account Middle Name Attribute </td>
<td align="left"> The attribute field to use when loading the account middle name. Example: <code>middlename</code></td>
</tr>
<tr>
<td align="left">Account Last Name Attribute </td>
<td align="left"> The attribute field to use when loading the account last name. Example: <code>sn</code></td>
</tr>
<tr>
<td align="left">Account Login Name Attribute </td>
<td align="left">  The attribute field to use when logging in the account. Example: <code>uid</code></td>
</tr>
<tr>
<td align="left">Account Password Attribute </td>
<td align="left"> The attribute field to use when loading the account password. Example: <code>password</code></td>
</tr>
</tbody>
</table>
</li>
<li><p>Click <strong>Next</strong>.</p>

<p> <img src="/images/docs/CreateLDAP4.png" width="640" title="Group Configuration" alt="Group Configuration" /></p></li>
<li><p>On the 4. Group Configuration tab, complete the field values as follows:</p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Group DN Suffix </td>
<td align="left"> This value is used in addition to the base DN when searching and loading roles. An example is <code>ou=Roles</code>. If no value is supplied, the subtree search will start from the base DN.</td>
</tr>
<tr>
<td align="left">Group Object Class </td>
<td align="left"> This is the name of the class used for the LDAP group object. Example: <code>group</code></td>
</tr>
<tr>
<td align="left">Group Object Filter </td>
<td align="left"> The filter to use when searching for group objects.</td>
</tr>
<tr>
<td align="left">Group Name Attribute </td>
<td align="left"> The attribute field to use when loading the group name. Example: <code>cn</code></td>
</tr>
<tr>
<td align="left">Group Description Attribute </td>
<td align="left"> The attribute field to use when loading the group description. Example: <code>desc</code></td>
</tr>
<tr>
<td align="left">Group Members Attribute </td>
<td align="left"> The attribute field to use when loading the group members. Example: <code>member</code></td>
</tr>
</tbody>
</table>
</li>
<li><p>Click <strong>Next</strong>.</p></li>
<li>On the 5. Confirm tab, review the information and click <strong>Create Directory</strong>.<br />The webpage refreshes with the populated directory information.</li>
<li><p>Review the Download Agent tab and perform the steps as directed.</p>

<p><img src="/images/docs/LastLDAPCreate.png" title="Download Agent" alt="Download Agent" /></p></li>
</ol>


<p>The <code>agent.id</code> and <code>agent.key</code> values will be specific to the agent of this directory.</p>

<p>After creating a backed directory in the Stormpath Admin Console and installing the Stormpath agent, the synchronization of the directory data starts when you start the agent.</p>

<p>After the agent is configured, associated with the agent is a status. This status is the <strong>agent communication status</strong> which reflects communication state as the agent communicates with Stormpath. As you make changes to the agent configuration, those changes are automatically pushed to the remote client and applied. Any further errors or conditions appear under the status column. The valid status codes are:</p>

<ul>
<li><strong>Online</strong>: The agent is online and all things are working nominally.</li>
<li><strong>Offline</strong>: Stormpath detects that the agent is not communicating with it at all.</li>
<li><strong>Error</strong>: The agent is online, but there is a problem with communicating nominally with Stormpath or LDAP.</li>
</ul>


<div class='docs-note'><p>After the directory has been created, although the Workflows tab appears, workflows cannot be configured for this type of directory.</p>
</div>


<h3><a id="map-directories-to-applications"></a>Map Directories to Applications</h3>

<p>Currently, you can only associate directories with application in the Stormpath Admin Console.</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Directories</strong> tab.</li>
<li>Click the directory name.</li>
<li>Click the <strong>Applications</strong> tab.<br />The applications table shows the application for which the directory is providing account authentication, or log in, credentials.</li>
<li>To change a account store, you must modify the application account store information.<br />If the directory is currently not specified as a account store for an application, the table contains the following message:<br />  <br/>
 <em>Currently, there are no applications associated with this directory. To create an association, click here, and select an application. From the account stores tab, you can create the association.</em></li>
</ol>


<h3><a id="edit-directory-details"></a>Edit Directory Details</h3>

<p>To edit directories, use the <code>_accessors_</code> of an existing directory instance to set the values and call the <code>save</code> method:</p>

<pre><code>    require "stormpath-sdk"
    ...
    ...
    directory.status = Status::DISABLED  # the Status class provides the valid status' constants
    directory.name = 'New Directory Name'
    directory.description = 'New Directory Description'

    directory.save
</code></pre>

<h3><a id="update-agent-configuration"></a>Update Agent Configuration</h3>

<p>You can modify an agent configuration going through the <a href="#UpdateAgentDir">Directories</a> or <a href="#UpdateAgentAgents">Agent</a> tabs.</p>

<p>The Agents tab contains a table listing all known agents used by you. Each table entry shows the following:</p>

<ul>
<li>The <strong>Stormpath directory name</strong> as a link which you can click to modify any parameters.</li>
<li>A <strong>description</strong> which is pulled from the directory Details tab.</li>
<li><p>The agent communication <strong>status</strong> reflects communication state as the agent communicates with Stormpath. As you make changes to the agent configuration, those changes are automatically pushed to the remote client and applied. Any further errors or conditions appear under the status column. The valid status codes are:</p>

<ul>
<li><strong>Online</strong>: The agent is online and all things are working nominally.</li>
<li><strong>Offline</strong>: Stormpath detects that the agent is not communicating with it at all.</li>
<li><strong>Error</strong>: The agent is online, but there is a problem with communicating nominally with Stormpath or LDAP/AD.</li>
</ul>
</li>
</ul>


<p>Although the Workflows tab appears for a mirrored LDAP/AD directory, workflows cannot be configured for this type of directory.</p>

<h4>Directories Tab</h4>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Directories</strong> tab.</li>
<li>Click the directory name.</li>
<li>Click the <strong>Agent Configuration</strong> tab.</li>
<li>Make the necessary changes and click <strong>Update</strong>.</li>
</ol>


<div class='docs-note'><p>If you do not see an Agent Configuration tab, you are looking at a Stormpath cloud directory.</p>
</div>


<h4>Agents Tab</h4>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Agents</strong> tab.</li>
<li>Click the directory name.</li>
<li>Make the necessary changes and click <strong>Update</strong>.</li>
</ol>


<h3><a id="enable-a-directory"></a>Enable a Directory</h3>

<p>Enabling previously disabled directories allows the groups and accounts to log into any applications for which the directory is defined as a account store.</p>

<p>To enable a directory, you must:</p>

<ol>
<li>Get the directory instance from the client instance with the href of the directory.</li>
<li>Set the directory instance to enabled.</li>
<li>Call the save method on the directory instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>    require "stormpath-sdk"
    ...
    ...
    href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
    directory = client.directories.get href

    directory.status = Status::ENABLED  # the Status class provides the valid status' constants

    directory.save
</code></pre>

<h3><a id="disable-a-directory"></a>Disable a Directory</h3>

<p>Disabling directories prevents the accounts from logging into any applications connected to Stormpath, but retains the directory data as well as all group and account data. If you must shut off several accounts quickly and easily, disable a directory.</p>

<p>The Stormpath Administrators directory cannot be disabled.</p>

<p>To disable a directory, you must:</p>

<ol>
<li>Get the directory instance from the client with the href of the directory.</li>
<li>Set the directory instance to disabled.</li>
<li>Call the save method on the directory instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>    require "stormpath-sdk"
    ...
    ...
    href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
    directory = client.directories.get href

    directory.status = Status::DISABLED  # the Status class provides the valid status' constants

    directory.save
</code></pre>

<h3><a id="delete-a-directory"></a>Delete a Directory</h3>

<p><strong>Code:</strong></p>

<pre><code>    require "stormpath-sdk"
    ...
    ...
    href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
    directory = client.directories.get href

    directory.delete
</code></pre>

<hr />

<h2><a id="accounts"></a>Accounts</h2>

<p>In Stormpath, users are referred to as user account objects or <a href="#Account">accounts</a>. The username and email fields for accounts are unique within a directory and are used to log into applications. Within Stormpath, an unlimited number of accounts per directory is supported.</p>

<p>You manage LDAP/AD accounts on your primary LDAP/AD installation. LDAP/AD accounts and groups are automatically deleted when:</p>

<ul>
<li>The backing object is deleted from the LDAP/AD directory service.</li>
<li>The backing LDAP/AD object information no longer matches the account filter criteria configured for the agent.</li>
<li>The LDAP/AD directory is deleted.</li>
</ul>


<p>An account is a unique identity within a directory. An account can exist in only a single directory but can be a part of multiple groups owned by that directory.</p>

<p>For accounts, the the basic detail information includes:</p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Directory </td>
<td align="left"> The directory to which the account will be added.</td>
</tr>
<tr>
<td align="left">Username </td>
<td align="left"> The login name of the account for applications using username instead of email. The value must be unique within its parent directory.|</td>
</tr>
<tr>
<td align="left">First Name </td>
<td align="left"> The account owner first name.</td>
</tr>
<tr>
<td align="left">Middle Name </td>
<td align="left"> The account owner middle name.</td>
</tr>
<tr>
<td align="left">Last Name </td>
<td align="left"> The account owner last name.</td>
</tr>
<tr>
<td align="left">First Name </td>
<td align="left"> The account owner first name.</td>
</tr>
<tr>
<td align="left">Email </td>
<td align="left"> The account owner email address. This is can be used by applications, such as the Stormpath Admin Console, that use an email address for logging in. The value must be unique within its parent directory.</td>
</tr>
<tr>
<td align="left">Status </td>
<td align="left"> The status is set to Enabled by default. It is only set to Disabled if you want to deny access to the account to Stormpath-connected applications.</td>
</tr>
<tr>
<td align="left">Password </td>
<td align="left"> The credentials used by an account during a login attempt. The specified value must adhere to the password policies set for the parent directory.</td>
</tr>
</tbody>
</table>


<div class='docs-note'><p>The account cannot be moved to a different directory after it has been created.</p>
</div>


<p>For accounts, you can:</p>

<ul>
<li><a href="#LocateAccURL">Locate the account REST URL</a>.</li>
<li><a href="#AuthenticateAccounts">Authenticate an account</a>.</li>
<li><a href="#ListAccounts">List accounts</a>.

<ul>
<li><a href="#ListGroupAccounts">List accounts by group</a>.</li>
<li><a href="#ListDirectoryAccounts">List accounts by directory</a>.</li>
<li><a href="#ViewAccountMap">List accounts by application</a>.</li>
</ul>
</li>
<li><a href="#CreateAccounts">Create an account</a>.</li>
<li><a href="#EditAccounts">Edit account details</a>.</li>
<li><a href="#ChangeAccountPasswords">Change an account password</a>.</li>
<li><a href="#AssignAccountGroup">Assign accounts to groups</a>.</li>
<li><a href="#RemoveAccountGroup">Remove accounts from groups</a>.</li>
<li><a href="#EnableAccounts">Enable an account</a>.</li>
<li><a href="#DisableAccounts">Disable an account</a>.</li>
<li><a href="#DeleteAccounts">Delete an account</a>.</li>
</ul>


<h3><a id="locate-the-account-rest-url"></a>Locate the Account REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference an account using the REST URL or <code>href</code>. For example, you require the REST URL to create accounts in the directory using an SDK.</p>

<p>To obtain a directory REST URL:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Accounts</strong> tab.</li>
<li>In the Accounts table, click the account name.<br />
The REST URL appears on the Details tab.</li>
</ol>


<h3><a id="authenticate-an-account"></a>Authenticate an Account</h3>

<p>After an account has been created, you can authenticate an account given an input of a username or email and a password from the end-user.  When authentication occurs, you are authenticating a user within a specific application against the application&rsquo;s account stores. That being said, the <code>application</code> resource is the starting point for authentication attempts.</p>

<p>With the application, the account is authenticated by providing the username and password as follows:</p>

<pre><code>require "stormpath-sdk"
...
...
client = Stormpath::Client.new api_key_file_location: File.join(ENV['HOME'], '.stormpath', 'apiKey.properties')

href = 'https://api.stormpath.com/v1/applications/APP_UID_HERE'
application = client.applications.get href

# when the account is authenticated, it produces an AuthenticationResult
request = Stormpath::Authentication::UsernamePasswordRequest.new 'usernameOrEmail', 'password'
result = application.authenticate_account request

# from the result, we obtain the authenticated Account
account = result.account
</code></pre>

<h3><a id="list-accounts"></a>List Accounts</h3>

<p>For accounts, you can view, or list them according to their <a href="#ListGroupAccounts">group membership</a>,
<a href="#ListDirectoryAccounts">the directories to which they belong</a>, or the <a href="#ViewAccountMap">applications
 to which they are associated</a>.</p>

<h4>List Accounts by Group</h4>

<p>To list all accounts associated with a group:</p>

<ol>
<li>Get the client.</li>
<li>Get the group from the client with the group <code>href</code>.</li>
<li>Get the group accounts.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...
 href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'
 group = client.groups.get href

 accounts = group.accounts

 accounts.each do |acc|
    p 'Given Name ' + acc.given_name
 end
</code></pre>

<h4>List Accounts by Directory</h4>

<p>To list user accounts contained in a directory, you must:</p>

<ol>
<li>Get the client.</li>
<li>Get the directory from the client with the directory <code>href</code>.</li>
<li>Get the directory accounts from the directory instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...

 href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
 directory = client.directories.get href

 accounts = directory.accounts

 accounts.each do |acc|
    p 'Given Name ' + acc.given_name
 end
</code></pre>

<h4>List Accounts by Application</h4>

<p>To list user accounts mapped to an application, you must:</p>

<ol>
<li>Get the client.</li>
<li>Get the application from the client with the application <code>href</code>.</li>
<li>Get the application accounts.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...

 href = 'https://api.stormpath.com/v1/applications/APPLICATION_UID_HERE'
 application = client.applications.get href

 accounts = application.accounts

 accounts.each do |acc|
    p 'Given Name ' + acc.given_name
 end
</code></pre>

<h3><a id="retrieve-an-account"></a>Retrieve an Account</h3>

<p>To retrieve a specific account you need the <code>href</code> which can be loaded as an object instance by retrieving it from the server, using the client:</p>

<pre><code>require "stormpath-sdk"
...
href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
account = client.accounts.get href
</code></pre>

<h3><a id="create-an-account"></a>Create an Account</h3>

<p>To create a user accounts, you must:</p>

<ol>
<li>Get the client.</li>
<li>Get the directory where you want to create the account from the client with the directory href.</li>
<li>Set the account properties.</li>
<li>Create the account from the directory.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>     require "stormpath-sdk"
     ...
     ...
     href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
     directory = client.directories.get href

     account = directory.accounts.create({
       given_name: 'John',
       surname: 'Smith',
       email: 'john.smith@example.com',
       username: 'johnsmith',
       password: '4P@$$w0rd!'
     })
</code></pre>

<p>If you want to override the registration workflow and have the account created with ENABLED status right away, pass an account instance and <em>false</em> as second argument, for example:</p>

<pre><code> account = Stormpath::Resource::Account.new({
   given_name: 'John',
   surname: 'Smith',
   email: 'john.smith@example.com',
   username: 'johnsmith',
   password: '4P@$$w0rd!'
 }, client)

 account = directory.create_account account, false
</code></pre>

<p>If you want to associate the new account to a group, use the following:</p>

<pre><code>account.add_group group
</code></pre>

<h3><a id="edit-account-details"></a>Edit Account Details</h3>

<p>To edit accounts, use the setters of an existing account instance to set the values and call the <code>save</code> method:</p>

<pre><code>require "stormpath-sdk"
...
...
account.status = Stormpath::Resource::Status::DISABLED  # the Status class provides the valid status'   constants
account.given_name = 'New Given Name'
account.surname = 'New Surname'
account.username = 'New Username'
account.email = 'New Email'
account.password = 'New Password'
account.middle_name = 'New Middle Name'

account.save
</code></pre>

<p>If you want to add a group to an account, do the following:</p>

<pre><code>account.add_group group
</code></pre>

<h3><a id="assign-accounts-to-groups"></a>Assign Accounts to Groups</h3>

<p>The association between a group and an account can be done from an account or group instance. If the account is part of a directory containing groups, you can associate the account with a group. To add an account to a group, you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the group and account instances from the client with the corresponding hrefs.</li>
<li>Add the group to the account instance OR add the account to the group instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...
 href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
 account = client.accounts.get href

 href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'
 group = client.groups.get href

 # account.add_group group OR group.add_account account
</code></pre>

<h3><a id="remove-accounts-from-groups"></a>Remove Accounts from Groups</h3>

<p>The remove an account from, or delete the account as a member of, a group you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the group membership instance.

<ul>
<li>The group membership can be retrieved directly from the client, if the <code>href</code> is known to the user.</li>
<li>Another way of retrieving the group membership is by searching for the group membership that represents the relationship between the group and the account that you want to delete.</li>
</ul>
</li>
<li>Delete the group membership by calling the <code>delete</code> method.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...
 href = 'https://api.stormpath.com/v1/groupMemberships/GROUP_MEMBERSHIP_UID_HERE'
 group_membership = client.group_memberships.get href

 group_membership.delete 
</code></pre>

<p><strong>OR</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...
 group_href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'

 account_href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
 account = client.accounts.get account_href

 group_linked = false
 group_membership = nil
 # looping the group membership aggregate of the account
 account.group_memberships.each { |tmp_group_membership|

   group_membership = tmp_group_membership
   tmp_group = group_membership.group

   # here, we make sure this is the group we're looking for
   if !tmp_group.nil? and tmp_group.href.include? group_href
    group_linked = true
    break
   end
 }

 # if the group was found, we delete it
 if group_linked
   group_membership.delete
 end
</code></pre>

<h3><a id="enable-accounts"></a>Enable Accounts</h3>

<p>Enabling a previously disabled account allows the account to log in to any applications where the directory or group is defined as an application account store.</p>

<div class='docs-note'><p>Enabling and disabling accounts for mirrored (LDAP) directories is not available in Stormpath. You manage mirrored (LDAP) accounts on the primary server installation.</p>
</div>


<p>To enable an account, you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the account instance from the client with the account href.</li>
<li>Set the account instance status to enabled.</li>
<li>Call the save method on the account instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...
 href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
 account = client.accounts.get href

 account.status = Status::ENABLED  # the Status class provides the valid status' constants

 account.save
</code></pre>

<h3><a id="disable-accounts"></a>Disable Accounts</h3>

<p>Disabling an account prevents the account from logging into any applications in Stormpath, but retains all account information. You typically disable an account if you must temporarily remove access privileges.</p>

<p>If you disable an account within a directory or group, you are completely disabling the account from logging in to any applications to which it is associated.</p>

<div class='docs-note'><p>Enabling and disabling accounts for mirrored (LDAP) directories is not available in Stormpath. You manage mirrored (LDAP) accounts on the primary server installation.</p>
</div>


<p>To disable an account, you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the account instance from the client with the account href.</li>
<li>Set the account instance status to disabled.</li>
<li>Call the save method on the account instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...

 href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
 account = client.accounts.get href

 account.status = Status::DISABLED  # the Status class provides the valid status' constants

 account.save
</code></pre>

<h3><a id="delete-an-account"></a>Delete an Account</h3>

<p>Deleting an account completely erases the account from the directory and erases all account information from Stormpath.</p>

<p>To delete an account, you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the account instance from the client with the account href.</li>
<li>Call the <code>delete</code> method on the account instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code> require "stormpath-sdk"
 ...
 ...

 href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
 account = client.accounts.get href

 account.delete
</code></pre>

<hr />

<h2><a id="groups"></a>Groups</h2>

<p><a href="#Group">Groups</a> are collections of accounts within a directory that are often used for authorization and access control to the application. In Stormpath, the term group is synonymous with <a href="#Role">role</a>.</p>

<p>You manage LDAP/AD groups on your primary LDAP/AD installation. LDAP/AD accounts and groups are automatically deleted when:</p>

<ul>
<li>The backing object is deleted from the LDAP/AD directory service.</li>
<li>The backing LDAP/AD object information no longer matches the account filter criteria configured for the agent.</li>
<li>The LDAP/AD directory is deleted.</li>
</ul>


<p>For groups, the basic detail information includes:</p>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Name </td>
<td align="left"> The name of the group. Within a given directory, this value must be unique.</td>
</tr>
<tr>
<td align="left">Description </td>
<td align="left"> A short description of the group.</td>
</tr>
<tr>
<td align="left">Status </td>
<td align="left"> This is set to Enabled by default. This is only set to Disabled to prevent all group accounts from logging into any application even when the group is set as a account store to an application.</td>
</tr>
</tbody>
</table>


<div class='docs-note'><p>If an account is also a member to another group that does have access to an application, then the account can login.</p>
</div>


<p>With groups, you can:</p>

<ul>
<li><a href="#LocateGroupURL">Locate the group REST URL</a>.</li>
<li><a href="#ListGroups">List groups</a> including:

<ul>
<li><a href="#ListAccountGroups">List group accounts</a>.</li>
<li><a href="#ListDirectoryGroups">List directory groups</a>.</li>
</ul>
</li>
<li><a href="#CreateGroups">Create groups</a>.</li>
<li><a href="#EditGroups">Edit group details</a>.</li>
<li><a href="#EnableGroups">Enable a group</a>.</li>
<li><a href="#DisableGroups">Disable a group</a>.</li>
<li><a href="#DeleteGroups">Delete a group</a>.</p></li>
</ul>


<h3><a id="locate-the-group-rest-url"></a>Locate the Group REST URL</h3>

<p>When communicating with the Stormpath REST API, you might need to reference a group using the REST URL or <code>href</code>. For example, you require the REST URL to create accounts to associate with the group in the directory using an SDK.</p>

<p>To obtain a group REST URL:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Directories</strong> tab.</li>
<li>In the Directories table, click the directory name.</li>
<li>Click the <strong>Groups</strong> tab.</li>
<li>Click the group name.<br />
The REST URL appears on the Details tab.</li>
</ol>


<h3><a id="list-groups"></a>List Groups</h3>

<p>For groups, you can view, or list them by <a href="#ListAccountGroups">account membership</a> or <a href="#ListDirectoryGroups">the directory</a>.</p>

<h4>List Accounts in a Group</h4>

<p>To list all accounts associated with, or members of, a group, you must:</p>

<ol>
<li>Create a client instance.</li>
<li>Get the account instance from the client instance using the account href.</li>
<li>Get the groups from the account.</li>
</ol>


<p>To list all groups on a directory or an account, loop the groups aggregate from a directory or an account:</p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/accounts/ACCOUNT_UID_HERE'
account = client.accounts.get href

groups = account.groups

groups.each do |grp|
    p 'Group ' + grp.name
end
</code></pre>

<h4>List Groups in a Directory</h4>

<p>To list all groups contained within a directory, you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the directory instance from the client instance using the directory href.</li>
<li>Get the groups from the directory.</li>
</ol>


<p>To list all groups on a directory or an account, loop the groups aggregate from a directory or an account:</p>

<pre><code>    require "stormpath-sdk"
    ...
    ...
    href = 'https://api.stormpath.com/v1/directories/DIR_UID_HERE'
    directory = client.directories.get href

    groups = directory.groups

    groups.each do |grp|
        p 'Group ' + grp.name
    end
</code></pre>

<h3><a id="retrieve-a-group"></a>Retrieve a Group</h3>

<p>To retrieve a specific group you need the <code>href</code> which can be loaded as an object instance by retrieving it from the server:</p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'
group = client.groups.get href
</code></pre>

<h3><a id="create-groups"></a>Create Groups</h3>

<p>You can create a group from the Ruby SDK. You can do it getting a reference to a directory and creating the group out of it:</p>

<pre><code>require "stormpath-sdk"
...
...
directory_url = "https://api.stormpath.com/v1/directories/YOUR_DIRECTORY_ID_HERE"

directory = client.directories.get directory_url

group = directory.groups.create({
  name: 'A new group', 
  description: 'The description of the new group'
})
</code></pre>

<h3><a id="edit-group-details"></a>Edit Group Details</h3>

<p>To edit groups, use the <code>_accesors_</code> of an existing group instance to set the values and call the save method:</p>

<pre><code>require "stormpath-sdk"
...
...
group.status = Status::DISABLED  # the Status class provides the valid status' constants
group.name = 'New Group Name'
group.description = 'New Group Description'

group.save
</code></pre>

<h3><a id="enable-a-group"></a>Enable a Group</h3>

<p>If the group is contained within an <em>enabled directory where the directory is defined as a account store</em>, then enabling or re-enabling the group allows all accounts contained within the group (membership list) to log in to any applications for which the directory is defined as a login source.</p>

<p>If the group is contained within a <em>disabled directory where the directory is defined as a account store</em>, the group status is irrelevant and the group members are not be able to log in to any applications for which the directory is defined as a account store.</p>

<p>If the group is defined as a account store, then enabling or re-enabling the group allows accounts contained within the group (membership list) to log in to any applications for which the group is defined as a account store.</p>

<p>To enable a group, you must:</p>

<ol>
<li>Create a client instance.</li>
<li>Get the group instance from the client instance using the group href.</li>
<li>Set the group instance status to enabled.</li>
<li>Call the save method on the group instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'
group = client.groups.get href

group.status = Status::ENABLED  # the Status class provides the valid status' constants

group.save
</code></pre>

<h3><a id="disable-a-group"></a>Disable a Group</h3>

<p>If a group is explicitly set as an application account store, then disabling that group prevents any of its user accounts from logging into that application but retains the group data and memberships. You would typically disable a group if you must shut off a group of user accounts quickly and easily.</p>

<p>To disable a group, you must:</p>

<ol>
<li>Get a client instance.</li>
<li>Get the group instance from the client instance using the group href.</li>
<li>Set the group instance status to disabled.</li>
<li>Call the save method on the group instance.</li>
</ol>


<p><strong>Code:</strong></p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'
group = client.groups.get href

group.status = Status::DISABLED  # the Status class provides the valid status' constants

group.save
</code></pre>

<h3><a id="delete-a-group"></a>Delete a Group</h3>

<p>A group can be deleted by invoking the <code>delete</code> method on the group instance:</p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/groups/GROUP_UID_HERE'
group = client.groups.get href

group.delete
</code></pre>

<hr />

<h2><a id="custom-data"></a>Custom Data</h2>

<p>Account and Group resources have predefined fields that are useful to many applications, but you are likely to have your own custom data that you need to associate with an account or group as well.</p>

<p>For this reason, both the account and group resources support a linked <code>custom_data</code> resource that you can use for your own needs.</p>

<p>The <code>custom_data</code> resource is a schema-less JSON object (aka &lsquo;hash&rsquo;) that allows you to specify whatever name/value pairs you wish.</p>

<p>The <code>custom_data</code> resource is always connected to an account or group and you can always reach it by calling the <code>.custom_data</code> method on the account or group resource instance.</p>

<p>In addition to your custom name/value pairs, a <code>customData</code> resource will always contain 3 reserved read-only fields:</p>

<ul>
<li><code>href</code>: The fully qualified location of the custom data resource</li>
<li><code>createdAt</code>: the UTC timestamp with millisecond precision of when the resource was created in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string, for example <code>2017-04-01T14:35:16.235Z</code></li>
<li><code>modifiedAt</code>: the UTC timestamp with millisecond precision of when the resource was last updated in Stormpath as an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string.</li>
</ul>


<p>You can store an unlimited number of additional name/value pairs in the <code>customData</code> resource, with the following restrictions:</p>

<ul>
<li>The total storage size of a single <code>customData</code> resource cannot exceed 10 MB (megabytes).  <strong>The <code>href</code>, <code>createdAt</code> and <code>modifiedAt</code> field names and values do not count against your resource size quota.</strong></li>
<li>Field names must:

<ul>
<li>be 1 or more characters long, but less than or equal to 255 characters long (1 &lt;= N &lt;= 255).</li>
<li>contain only alphanumeric characters <code>0-9A-Za-z</code>, underscores <code>_</code> or dashes <code>-</code> but cannot start with a dash <code>-</code>.</li>
<li>may not equal any of the following reserved names: <code>href</code>, <code>createdAt</code>, <code>modifiedAt</code>, <code>meta</code>, <code>spMeta</code>, <code>spmeta</code>, <code>ionmeta</code>, or <code>ionMeta</code>.</li>
</ul>
</li>
</ul>


<div class='docs-note'><p>While the <code>meta</code>, <code>spMeta</code>, <code>spmeta</code>, <code>ionmeta</code>, or <code>ionMeta</code> fields are not returned in the response today, they might be used in the future.  As is the case with all JSON use cases, ensure your REST client will not break if it encounters one of these (or other fields it does not recognize) at some time in the future.</p>
</div>


<p>For Custom Data, you can:</p>

<ul>
<li><a href="#create-custom-data">Create Custom Data</a></li>
<li><a href="#retrieve-custom-data">Retrieve Custom Data</a></li>
<li><a href="#update-custom-data">Update Custom Data</a></li>
<li><a href="#update-custom-data">Delete All Custom Data</a></li>
<li><a href="#delete-custom-data-field">Delete a Custom Data field</a></li>
</ul>


<h3><a id="create-custom-data"></a>Create Custom Data</h3>

<p>You can add or update custom data fields by using the <code>put</code> method:</p>

<pre><code>account = directory.accounts.create email: 'jabba.hutt@example.com', password: 'Jabba123!', username: 'Jabba'

custom_data = account.custom_data

custom_data.put(:vehicle, "Sail barge")
custom_data.put(:homeworld, "Tatooine")
</code></pre>

<p>After modifying the desired custom data fields, you can push the changes by using the <code>save</code> method on the custom data resource:</p>

<pre><code>custom_data.save
</code></pre>

<p>Whenever an <code>account</code> or <code>group</code> resource is saved, the connected <code>custom data</code> is also saved, so you can save changes by calling the <code>save</code> method on the <code>account</code> or <code>group</code> resource.</p>

<pre><code>account.save
</code></pre>

<h3><a id="retrieve-custom-data"></a>Retrieve Custom Data</h3>

<p>Retrieving an account or group’s custom data is managed by using the <code>custom_data</code> method on those resources, and fetching each individual field using the <code>get</code> method on the <code>custom_data</code> resource:</p>

<pre><code>account = directory.accounts.create email: 'jabba.hutt@example.com', password: 'Jabba123!', username: 'Jabba'
account.custom_data.get("vehicle")
#=&gt; Sail barge
</code></pre>

<h3><a id="update-custom-data"></a>Update Custom Data</h3>

<p>Updating custom_data is managed in the same manner as creating new resources, by using the <code>put</code> method:</p>

<pre><code>account = directory.accounts.create email: 'jabba.hutt@example.com', password: 'Jabba123!', username: 'Jabba'

account.custom_data.get("vehicle")
#=&gt; Sail barge

account.custom_data.put(:vehicle, "Jedi Starfighter")
</code></pre>

<h3><a id="delete-custom-data"></a>Delete Custom Data</h3>

<p>You may delete all of an account or group’s custom data by calling the <code>delete</code> method on the account or group’s custom_data:</p>

<pre><code>account.custom_data.delete

group.custom_data.delete
</code></pre>

<h3><a id="delete-custom-data-field"></a>Delete Custom Data Field</h3>

<p>You may also delete an individual custom data field entirely by calling the <code>delete</code> method on the account or group&rsquo;s custom_data with stating the custom data field as a parameter:</p>

<pre><code>account.custom_data.delete("vehicle")

group.custom_data.delete("location")
</code></pre>

<h2><a id="workflow-automations"></a>Workflow Automations</h2>

<p>Workflows are common user management operations that are automated for you by Stormpath. Account Registration and Verification workflow configurations manage how accounts are created in your directory. The Password Reset workflow enables you to configure how password reset works and the context of messages. For both workflows, messages can be formatted in plain text or HTML.</p>

<p>Workflows are only available on cloud directories and only configurable using the Stormpath Admin Console.The Stormpath Administrator directory has default workflow automations which cannot be altered.<br /></p>

<p>On the Workflows tab, you can automate <a href="#AccountRegistration" title="account registration and verification">account registration and verification</a> and <a href="#PasswordReset" title="password reset">password resets</a>.</p>

<p><img src="/images/docs/ManageWorkflows.png" height="250" width="670" title="Workflow Automation" alt="Workflow Automation" /></p>

<h3><a id="account-registration-and-verification"></a>Account Registration and Verification</h3>

<p>For the Account Registration and Verification workflow, you must perform the following actions:</p>

<ul>
<li><a href="#ConfigureAccountRegistration" title="Configure Account Registration and Verification">Configure account registration and verification</a></li>
<li><a href="#InitiateAccountRegistration" title="Initiate Account Registration and Verification">Initiate account registration and verification</a></li>
<li><a href="#VerifyAccount" title="Verify the Account">Verify the account</a></li>
</ul>


<br />




<div class='docs-note'><p>The ability to modify workflows, depends on your subscription level. If an option is not available (grayed out), click the question mark for more information.</p>
</div>


<h4>Configure Account Registration and Verification</h4>

<p>To configure account registration and verification:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Directories</strong> tab.</li>
<li>Click the directory name.</li>
<li>Click <strong>Workflows</strong> tab.</li>
<li><p>On the Workflows tab, next to Registration and Verification, click <strong>show</strong>.</p>

<ul>
<li>By default, the Account Registration and Verification workflow automation is disabled. By leaving this workflow off, all accounts created in the directory are enabled, unless otherwise specified, and the user does not receive any registration or verification emails from Stormpath.</li>
<li><p>By only enabling <strong>Enable Registration and Verification Workflow</strong> and not also enabling <strong>Require newly registered accounts to verify their email address</strong>, new accounts are marked as enabled and the users receive a registration success email. <br /></p>

<p>  <img src="/images/docs/RegistrationVerification.png" height="430" width="650" title="Account Registration and Verification" alt="Account Registration and Verification" /></p></li>
<li><p>You configure the Registration Success Message with the following attributes:</p>

<table>
<thead>
<tr>
<th align="left">  Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Message Format </td>
<td align="left"> The message format for the body of the Account Registration Success email. It can be Plain Text or HTML. Available formats depend on the tenant subscription level.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Name </td>
<td align="left"> The value to display in the &ldquo;From&rdquo; field of the Account Registration Success message.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Email Address </td>
<td align="left"> The email address from which the Account Registration Success message is sent.</td>
</tr>
<tr>
<td align="left">Subject </td>
<td align="left"> The value for the subject field of the Account Registration Success message.</td>
</tr>
<tr>
<td align="left">Body </td>
<td align="left"> The value for the body of the message. Variable substitution is supported for the account first name, last name, username, and email, as well as the name of the directory where the account is registered.</td>
</tr>
</tbody>
</table>
</li>
<li><p>By also selecting <strong>Require newly registered accounts to verify their email address</strong>:</p>

<ul>
<li>Newly created accounts are given an <em>unverified</em> status and a verification email is sent to the user. The verification email contains a token unique to the user account. When the user clicks the link, they are sent to the verification base URL where the token is submitted to Stormpath for verification. If verified, the account status changes to enabled and a verification success email is sent to the user.</li>
<li><p>An Account Verification Message section appears.<br /></p>

<p>  <img src="/images/docs/AccountVerificationMessage.png" height="420" width="700" title="Account Verification" alt="Account Verification" /></p></li>
<li><p>You configure the Account Verification Message with the following attributes: <br /></p>

<table>
<thead>
<tr>
<th align="left">  Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Account Base URL </td>
<td align="left"> Your application URL which receives the token and completes the workflow. Stormpath offers a default base URL to help during development.</td>
</tr>
<tr>
<td align="left">Message Format </td>
<td align="left"> The message format for the body of the Account Verification email. It can be Plain Text or HTML. Available formats depend on the tenant subscription level.</td>
</tr>
<tr>
<td align="left">From&#8221; Name </td>
<td align="left"> The value to display in the &ldquo;From&rdquo; field of the Account Success message.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Email Address </td>
<td align="left"> The email address from which the Account Verification message is sent.</td>
</tr>
<tr>
<td align="left">Subject </td>
<td align="left"> The value for the subject field of the Account Verification message.</td>
</tr>
<tr>
<td align="left">Body </td>
<td align="left"> The value for the body of the message. Variable substitution is supported for the account first name, last name, username, and email, as well as the name of the directory where the account is registered and the url (containing the token) that the user must click.</td>
</tr>
</tbody>
</table>
</li>
<li><p>A Verification Success Message section appears.<br />
  <img src="/images/docs/VerificationEmailParams.png" height="420" width="700" title="Email Verification" alt="Email Verification" /></p></li>
<li><p>You configure the Verification Success Message with the following attributes: <br /></p>

<table>
<thead>
<tr>
<th align="left">  Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Message Format </td>
<td align="left"> The message format for the body of the Account Verification Success email. It can be Plain Text or HTML. Available formats depend on the tenant subscription level.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Name </td>
<td align="left"> The value to display in the &ldquo;From&rdquo; field of the Account Verification Success message.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Email Address </td>
<td align="left"> The email address from which the Account Verification Success message is sent.</td>
</tr>
<tr>
<td align="left">Subject </td>
<td align="left"> The value for the subject field of the Account Verification Success message.</td>
</tr>
<tr>
<td align="left">Body </td>
<td align="left"> The value for the body of the message. Variable substitution is supported for the account first name, last name, username, and email, as well as the name of the directory where the account is registered.</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
</ul>
</li>
<li><p>When all the fields are complete, click <strong>Update</strong>.</p></li>
</ol>


<h4>Initiate Account Registration and Verification</h4>

<p>If the workflow is enabled, an account registration is automatically initiated during an account creation.</p>

<h4>Verify Account</h4>

<p>If a directory has the the account verification workflow enabled:</p>

<ol>
<li>A newly created account in the directory has an <code>UNVERIFIED</code> status until the email address has been verified.</li>
<li>When a new user is registered for the first time, Stormpath sends an email to the user with a secure verification link, which includes a secure verification token.</li>
<li>When the user clicks the link in the email, they are sent to the verification URL set up in the verification workflow.

<ul>
<li>To verify the account email address (which sets the account status to <code>ENABLED</code>), the verification token in the account verification email must be obtained from the link account holders receive in the email.</li>
<li><p>This is achieved by implementing the following logic:</p>

<pre><code>  require "stormpath-sdk"
  ...
  ...
  verification_token = # obtain it from query parameter, according to the workflow configuration of the link

  # when the account is correctly verified it gets activated and that account is returned in this verification
  account = client.accounts.verify_email_token verification_token
</code></pre></li>
</ul>
</li>
</ol>


<h3><a id="password-reset"></a>Password Reset</h3>

<p>When you reset an account password using Stormpath, the user receives an email with a link and a secure reset token. The link sends the user to a password reset page where they submit a new password to Stormpath. When the password is successfully reset, the user receives a success email. You can configure, at the directory level, how password reset works, the URL of the reset page, and the content of the email messages.</p>

<p>This workflow is enabled by default.</p>

<h4>Configure Password Reset</h4>

<p>To configure the password reset workflow:</p>

<ol>
<li>Log in to the Stormpath Admin Console.</li>
<li>Click the <strong>Directories</strong> tab.</li>
<li>Click the directory name.</li>
<li>Click <strong>Workflows</strong> tab.</li>
<li><p>On the Workflows tab, next to Password Reset, click <strong>show</strong>.</p>

<p> <img src="/images/docs/ResetPW1.png" height="430" width="640" title="Password Reset" alt="Password Reset" /></p></li>
<li><p>Complete the values as follows:<br /></p>

<table>
<thead>
<tr>
<th align="left"> Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a id ="BaseURL"></a>Base URL </td>
<td align="left"> Your application URL which receives the token and completes the workflow. Stormpath offers a default base URL to help during development.</td>
</tr>
<tr>
<td align="left">Expiration Window </td>
<td align="left"> The number of hours that the password reset token remains valid from the time it is sent.</td>
</tr>
</tbody>
</table>
</li>
<li><p>Under Password Reset Message, complete the values as follows:<br /></p>

<table>
<thead>
<tr>
<th align="left"> Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Message Format </td>
<td align="left"> The message format for the body of the Password Reset email. It can be Plain Text or HTML. Available formats depend on the tenant subscription level.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Name </td>
<td align="left"> The value to display in the &ldquo;From&rdquo; field of the Password Reset message.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Email Address </td>
<td align="left"> The email address from which the Password Reset message is sent.</td>
</tr>
<tr>
<td align="left">Subject </td>
<td align="left"> The value for the subject field of the Password Reset message.</td>
</tr>
<tr>
<td align="left">Body </td>
<td align="left"> The value for the body of the message. Variable substitution is supported for the account first name, last name, username, and email, as well as the name of the directory where the account is registered, the url the user must click to verify their account, and the number of hours for which the URL is valid.</td>
</tr>
</tbody>
</table>
</li>
<li><p>Under Password Reset Success Message, complete the values as follows:<br /></p>

<table>
<thead>
<tr>
<th align="left"> Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Message Format </td>
<td align="left"> The message format for the body of the Password Reset Success email. It can be Plain Text or HTML. Available formats depend on the tenant subscription level.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Name </td>
<td align="left"> The value to display in the &ldquo;From&rdquo; field of the Password Reset Success message.</td>
</tr>
<tr>
<td align="left">&ldquo;From&rdquo; Email Address </td>
<td align="left"> The email address from which the Password Reset Success message is sent.</td>
</tr>
<tr>
<td align="left">Subject </td>
<td align="left"> The value for the subject field of the Password Reset Success message.</td>
</tr>
<tr>
<td align="left">Body </td>
<td align="left"> The value for the body of the message. Variable substitution is supported for the account first name, last name, username, and email, as well as the name of the directory where the account is registered.</td>
</tr>
</tbody>
</table>


<p>  <img src="/images/docs/ResetPW2.png" height="418" width="640" title="Password Reset" alt="Password Reset" /></p></li>
<li><p>When all the fields are complete, click <strong>Update</strong>.</p></li>
</ol>


<h4>Initiate Password Reset</h4>

<p>To initiate the password reset workflow in your application, you must create a password reset token, which is sent from Stormpath in an email to the user.</p>

<p>This is done from the application as follows:</p>

<pre><code>require "stormpath-sdk"
...
...
href = 'https://api.stormpath.com/v1/applications/APP_UID_HERE'
application = client.applications.get href

# creating the password reset token and sending the email
application.send_password_reset_email 'email'
</code></pre>

<h4>Complete Password Reset</h4>

<p>After the password reset token is created and the workflow is initiated, Stormpath sends a reset email to the user. The email contains a web link that includes the <a href="#BaseURL">base URL</a> and the reset token.</p>

<p><code>https://myAwesomeapp.com/passwordReset?sptoken=TOKEN</code></p>

<p>Where <code>myAwesomeapp.com/passwordReset</code> is the base URL.</p>

<p>After the user clicks the link, the user is sent to the base URL. The password reset token can then be obtained from the query string.</p>

<p>To complete password reset, collect and submit the user&rsquo;s new password with the reset token to Stormpath.</p>

<div class='docs-note'><p>To complete the password reset, you do not need any identifying information from the user. Only the password reset token and the new password are required.</p>
</div>


<p>The password is changed as follows:</p>

<pre><code>require "stormpath-sdk"
...
...  
href = 'https://api.stormpath.com/v1/applications/APP_UID_HERE'
application = client.applications.get href

# getting the Account from the token and changing the password
account = application.verify_password_reset_token 'PASS_RESET_TOKEN'
account.password = 'New Password'
account.save
</code></pre>

<hr />

<h2><a id="ruby-sample-code"></a>Ruby Sample Code</h2>

<h3><a id="heroku-ruby-sample-app"></a>Heroku Ruby Sample App</h3>

<p>This <a href="https://github.com/stormpath/stormpath-heroku-ruby-sample">application</a> is a rudimentary Ruby test application that can run on Heroku to demonstrate how to communicate successfully with the Stormpath REST API.</p>

<p><strong>Code:</strong></p>

<pre><code>require "stormpath-sdk"
require "sinatra"
require "cgi"

get '/' do

    begin

        application_url = ENV['STORMPATH_URL']
        api_key_id = ENV['STORMPATH_API_KEY_ID']
        api_key_secret = ENV['STORMPATH_API_KEY_SECRET']

        api_key = Stormpath::ApiKey.new api_key_id, api_key_secret
        client = Stormpath::Client.new  api_key: api_key

        application = client.applications.get application_url

        inspect_result = application.inspect

        "&lt;h2&gt;Your Heroku Stormpath configuration works!&lt;/h2&gt;&lt;/br&gt;Here's your application information:&lt;/br&gt;&lt;/br&gt;" +
            CGI::escapeHTML(inspect_result)

    rescue Exception =&gt; e

        "Something went wrong: " + e.message

    end

end
</code></pre>

<h3><a id="create-a-stormpath-sdk-client-using-a-stormpath-api-key-file"></a>Create a Stormpath SDK Client Using a Stormpath API Key File</h3>

<p>The following code shows how to create a Stormpath SDK client using a Stormpath API key file and communicate with the Stormpath REST API.</p>

<p><strong>Code:</strong></p>

<pre><code>#!/usr/bin/env ruby

require 'optparse'
require 'rubygems'
require 'stormpath-sdk'

options = {}
help_called = false

opt_parser = OptionParser.new do |opt|
    opt.banner = "Usage: ruby stormpath.rb COMMAND [OPTIONS]"
    opt.separator ""
    opt.separator "This script helps you test the Stormpath Ruby SDK."
    opt.separator ""
    opt.separator "If no option is specified, the Client instance is displayed with a 'to_s' call."
    opt.separator ""
    opt.separator  "Commands"
    opt.separator  "     file: use the specified file to retrieve API Key Information."
    opt.separator  ""
    opt.separator  "Options"

    opt.on("-o","--option OPTION","Available options to perform on the Ruby SDK.") do |option|
        options[:option] = option
    end

    opt.separator  "         tenant: get the a Tenant representation based on the provided API Key" +
                     " with a call to 'inspect' on that Tenant."

    opt.on("-h","--help","Help on this script.") do
        puts opt_parser
        help_called = true
    end

    opt.separator  ""
    opt.separator  "Examples:"
    opt.separator  "    Get Tenant from file: ruby stormpath.rb file -o tenant YOUR_FILE_HERE_REPLACEME"

end
opt_parser.parse!
case ARGV[0]

    when "file"

        opt = options[:option]
        file = ARGV[1]

        if !file.nil? and File::exist? file

            client = Stormpath::Client.new({
                api_key_file_location: file
            })

            if (opt == 'tenant')

                puts "Getting tenant from Client..."
                begin

                    puts client.tenant.inspect
                    puts "Done"

                rescue Stormpath::Error =&gt; e

                    p '** Error Retrieving Tenant **'
                    p 'Message: ' + e.message
                    p 'HTTP Status: ' + e.status.to_s
                    p 'Developer Message: ' + e.developer_message
                    p 'More Information: ' + e.more_info
                    p 'Error Code: ' + e.code.to_s

                end

            else
                puts "Showing Client instance..."
                puts client.to_s
                puts "Done"

            end

        else
            puts "File #{file} does not exist."
        end

    else
        if !help_called
            puts opt_parser
        end
end
</code></pre>

<p>To run this sample, you require the Stormpath Ruby SDK gem installed on your system. You can install it using the following command:</p>

<pre><code>gem install stormpath-sdk --pre
</code></pre>

<p>Then, assuming you saved the code shown above in a file called stormpath.rb, run:</p>

<pre><code>ruby stormpath.rb file ~/.stormpath/your_stormpath_api_key.properties -o tenant
</code></pre>

<p>This prints your tenant data, such as name, link to applications, and directories. If you see your tenant @properties printed, you have successfully communicated with Stormpath through the Ruby SDK!</p>

<hr />

<h2><a id="administering-stormpath"></a>Administering Stormpath</h2>

<p>For more information about administering Stormpath using the Admin Console, please refer to the <a href="http://stormpath.com/docs/console/product-guide">Admin Console Product Guide</a>.</p>

<hr />

<h2><a id="glossary-of-terms"></a>Glossary of Terms</h2>

<table>
<thead>
<tr>
<th align="left">Attribute </th>
<th align="left"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a id="account"></a>Account </td>
<td align="left"> An <strong>account</strong> is a unique identity within a directory. Stormpath does not use the term <em>user</em> because it implies a person, while accounts can represent a person, 3rd-party software, or non-human clients. Accounts can be used to log in to applications.</td>
</tr>
<tr>
<td align="left"><a id="agent"></a>Agent </td>
<td align="left"> An <strong>agent</strong> populates LDAP directories. An agent status reflects communication/error state because the agent is communicating with Stormpath.</td>
</tr>
<tr>
<td align="left"><a id="apikey"></a>API Key </td>
<td align="left"> An <strong>API key</strong> is a unique ID paired with a secret value. API keys are used by software applications to communicate with Stormpath through the Stormpath REST API.</td>
</tr>
<tr>
<td align="left"><a id="application"></a>Application </td>
<td align="left"> An <strong>application</strong> is a software application that communicates with Stormpath. It is typically a real world application that you are building, such as a web application, but it can also be infrastructural software, such as a Unix or Web server.</td>
</tr>
<tr>
<td align="left"><a id="authentication"></a>Authentication </td>
<td align="left"> <strong>Authentication</strong> is the act of proving someone (or something) is actually who they say they are. When an account is authenticated, there is a high degree of certainty that the account identity is legitimate.</td>
</tr>
<tr>
<td align="left"><a id="authorization"></a>Authorization </td>
<td align="left"> <strong>Authorization</strong>, also known as Access Control, is the process of managing and enforcing access to protected resources, functionality, or behavior.</td>
</tr>
<tr>
<td align="left"><a id="directory"></a>Directory </td>
<td align="left"> A <strong>directory</strong> is a collection of accounts and groups. Administrators can use different directories to create silos of accounts. For example, customers and employees can be stored in different directories.</td>
</tr>
<tr>
<td align="left"><a id="directory-agent"></a>Directory Agent </td>
<td align="left"> A <strong>directory agent</strong> is a Stormpath software application installed on your corporate network to securely synchronize an on-premise directory, such as LDAP or Active Directory, into a Stormpath cloud directory.</td>
</tr>
<tr>
<td align="left"><a id="directory-mirroring"></a>Directory Mirroring </td>
<td align="left"> <strong>Directory mirroring</strong> securely replicates selected data from one (source) directory to another (target or mirrored) directory for authentication and access control. The source directory is the authoritative source for all data. Changes are propagated to the target/mirror directory for convenience and performance benefits.</td>
</tr>
<tr>
<td align="left"><a id="group"></a>Group </td>
<td align="left"> A <strong>group</strong> is a collection of accounts within a directory. In Stormpath, for anyone familiar with Role-Based Access Control, the term group is used instead of role.</td>
</tr>
<tr>
<td align="left"><a id="group-membership"></a>Group Membership </td>
<td align="left"> A <strong>group membership</strong> is a two-way mapping between an account and a group.</td>
</tr>
<tr>
<td align="left"><a id="account-store"></a>Account Store </td>
<td align="left"> A <strong>account store</strong> is a directory or group associated with an application for account authentication. Accounts within account stores associated with an application can login to that application.</td>
</tr>
<tr>
<td align="left"><a id="AccountStoreMapping"></a>Account Store Mapping </td>
<td align="left"> An <strong>account store mapping</strong> is a mapping between a group or directory and an application.</td>
</tr>
<tr>
<td align="left"><a id="identity-management"></a>Identity Management </td>
<td align="left"> <strong>Identity management</strong> is the management, authentication, authorization, and permissions of identities to increase security and productivity, while decreasing cost, downtime, and repetitive tasks.</td>
</tr>
<tr>
<td align="left"><a id="role"></a>Role </td>
<td align="left">A <strong>role</strong> is a classification of accounts, such as administrators or employees. In Stormpath, roles are represented as groups.</td>
</tr>
<tr>
<td align="left"><a id="rbac"></a>Role-Based Access Control </td>
<td align="left"> <strong>Role-Based Access Control</strong> (RBAC) is the act of controlling access to protected resources or behavior based on the groups assigned to a particular account. RBAC is done using Stormpath groups.</td>
</tr>
<tr>
<td align="left"><a id="rest-api-def"></a>REST API </td>
<td align="left"> <strong>REST API</strong> is a software architectural style enabling data transfer and functionality using common web-based communication protocols. Stormpath provides a REST API for tenants so they can easily integrate Stormpath with their software applications.</td>
</tr>
<tr>
<td align="left"><a id="tenant"></a>Tenant </td>
<td align="left"> A <strong>tenant</strong> is a private partition within Stormpath containing all data and settings—specifically your applications, directories, groups and accounts. When you sign up for Stormpath, a tenant is created for you. You can add other user accounts (for example, for your co-workers) to your tenant to help you manage your data. For convenience, many companies like to have one tenant where they can easily manage all application, directory, and account information across their organization.*</td>
</tr>
</tbody>
</table>


<div class='docs-note'><p>*You must know your tenant when logging in to the Admin Console website. There is a &#8220;Forgot Tenant&#8221; link on the login page if you do not know what your tenant is.</p>
</div>


            <div id="bottom-wrapper">
                     <div class="region region-bottom">
    <div id="block-block-1" class="block block-block first odd">

      
   Copyright © 2013 StormPath&nbsp;&nbsp;|&nbsp;&nbsp;All rights reserved 
</div><!-- /.block -->
<div id="block-menu-menu-footer-menu" class="block block-menu last even" role="navigation">

      
  <ul class="menu"><li class="first leaf"><a href="http://www.stormpath.com/privacy_policy">Privacy policy</a></li>
<li class="last leaf"><a href="http://www.stormpath.com/terms_of_service">Terms of Service</a></li>
</ul>
</div><!-- /.block -->
  </div><!-- /.region -->

            </div>          	
    	  </div>



<aside class="sidebars">
  
    <section class="region region-sidebar-first column sidebar">
      
<div id="block-stormpath-docs-languages" class="block block-stormpath-docs first odd">
 <form class="stormpath-docs-select-language" action="/docs/java/product-guide" method="post" id="stormpath-docs-language-form" accept-charset="UTF-8"><div><div class="form-item form-type-select form-item-language">
  <label for="edit-language">Language: </label>
 <select id="edit-language" name="language" class="form-select">
  
  
 	
    <option value="rest">REST API</option>
 	
    <option value="java">Java</option>
 	
    <option value="ruby" selected>Ruby</option>
 	
    <option value="python">Python</option>
 	
    <option value="php">PHP</option>
 	
    <option value="console">Admin Console</option>
 	
 </select>
</div>
<input type="hidden" name="form_id" value="stormpath_docs_language_form">
</div></form>
</div>

<script type="text/javascript">
	var sp_docs_menu = {};
	
		sp_docs_menu['_includes'] = [];
		
	
		sp_docs_menu['_layouts'] = [];
		
	
		sp_docs_menu['assets'] = [];
		
	
		sp_docs_menu['console'] = [];
		
			sp_docs_menu['console'].push('product-guide');
		
			sp_docs_menu['console'].push('quickstart');
		
	
		sp_docs_menu['errors'] = [];
		
			sp_docs_menu['errors'].push('2000');
		
			sp_docs_menu['errors'].push('2001');
		
			sp_docs_menu['errors'].push('2002');
		
			sp_docs_menu['errors'].push('2003');
		
			sp_docs_menu['errors'].push('2004');
		
			sp_docs_menu['errors'].push('2005');
		
			sp_docs_menu['errors'].push('2006');
		
			sp_docs_menu['errors'].push('2007');
		
			sp_docs_menu['errors'].push('2008');
		
			sp_docs_menu['errors'].push('2009');
		
			sp_docs_menu['errors'].push('2010');
		
			sp_docs_menu['errors'].push('2011');
		
			sp_docs_menu['errors'].push('2012');
		
			sp_docs_menu['errors'].push('2013');
		
			sp_docs_menu['errors'].push('2014');
		
			sp_docs_menu['errors'].push('2015');
		
			sp_docs_menu['errors'].push('2016');
		
			sp_docs_menu['errors'].push('2017');
		
			sp_docs_menu['errors'].push('2018');
		
			sp_docs_menu['errors'].push('2100');
		
			sp_docs_menu['errors'].push('2101');
		
			sp_docs_menu['errors'].push('2102');
		
			sp_docs_menu['errors'].push('2103');
		
			sp_docs_menu['errors'].push('2104');
		
			sp_docs_menu['errors'].push('2105');
		
			sp_docs_menu['errors'].push('2106');
		
			sp_docs_menu['errors'].push('2107');
		
			sp_docs_menu['errors'].push('3000');
		
			sp_docs_menu['errors'].push('3001');
		
			sp_docs_menu['errors'].push('3002');
		
			sp_docs_menu['errors'].push('3003');
		
			sp_docs_menu['errors'].push('3004');
		
			sp_docs_menu['errors'].push('5100');
		
			sp_docs_menu['errors'].push('5101');
		
			sp_docs_menu['errors'].push('5102');
		
			sp_docs_menu['errors'].push('5103');
		
			sp_docs_menu['errors'].push('5114');
		
			sp_docs_menu['errors'].push('6100');
		
			sp_docs_menu['errors'].push('9000');
		
			sp_docs_menu['errors'].push('9001');
		
			sp_docs_menu['errors'].push('9002');
		
			sp_docs_menu['errors'].push('9003');
		
			sp_docs_menu['errors'].push('9004');
		
			sp_docs_menu['errors'].push('9005');
		
			sp_docs_menu['errors'].push('9006');
		
	
		sp_docs_menu['home'] = [];
		
	
		sp_docs_menu['how-do-i'] = [];
		
	
		sp_docs_menu['images'] = [];
		
	
		sp_docs_menu['java'] = [];
		
			sp_docs_menu['java'].push('product-guide');
		
			sp_docs_menu['java'].push('quickstart');
		
	
		sp_docs_menu['javascripts'] = [];
		
	
		sp_docs_menu['php'] = [];
		
			sp_docs_menu['php'].push('product-guide');
		
			sp_docs_menu['php'].push('quickstart');
		
	
		sp_docs_menu['python'] = [];
		
			sp_docs_menu['python'].push('product-guide');
		
			sp_docs_menu['python'].push('quickstart');
		
	
		sp_docs_menu['rest'] = [];
		
			sp_docs_menu['rest'].push('api');
		
			sp_docs_menu['rest'].push('product-guide');
		
			sp_docs_menu['rest'].push('quickstart');
		
	
		sp_docs_menu['ruby'] = [];
		
			sp_docs_menu['ruby'].push('product-guide');
		
			sp_docs_menu['ruby'].push('quickstart');
		
	
		sp_docs_menu['sample-apps'] = [];
		
	
		sp_docs_menu['stylesheets'] = [];
		
	
</script>


<div id="block-stormpath-docs-docs-menu" class="block block-stormpath-docs last even">
  
  
        
  	
  
        
  	
  
        
  	
  
        
  	
                
                
		<ul class="menu">
		
			<li class="leaf">
			
				<a href="/ruby/quickstart">Ruby Quickstart Guide</a>
			
			
			</li>
		
			<li class="leaf active-trail">
			
				<a href="/ruby/product-guide">Ruby Product Guide</a>
			
			
				<ul class="menu"><li class="leaf"><a href="#what-is-stormpath" data-level="0" class="fragment">What is Stormpath?</a><ul class="menu"><li class="leaf"><a href="#architectural-overview" data-level="1" class="fragment">Architectural Overview</a><ul class="menu"></ul></li><li class="leaf"><a href="#stormpath-admin-console" data-level="1" class="fragment">Stormpath Admin Console</a><ul class="menu"></ul></li><li class="leaf"><a href="#rest-api" data-level="1" class="fragment">REST API</a><ul class="menu"></ul></li><li class="leaf"><a href="#ruby-sdk" data-level="1" class="fragment">Ruby SDK</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#sdk-concepts" data-level="0" class="fragment">SDK Concepts</a><ul class="menu"><li class="leaf"><a href="#client" data-level="1" class="fragment">Client</a><ul class="menu"></ul></li><li class="leaf"><a href="#high-level-overview" data-level="1" class="fragment">High-level Overview</a><ul class="menu"></ul></li><li class="leaf"><a href="#detailed-design" data-level="1" class="fragment">Detailed Design</a><ul class="menu"></ul></li><li class="leaf"><a href="#resources-and-proxying" data-level="1" class="fragment">Resources and Proxying</a><ul class="menu"></ul></li><li class="leaf"><a href="#error-handling" data-level="1" class="fragment">Error Handling</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#applications" data-level="0" class="fragment">Applications</a><ul class="menu"><li class="leaf"><a href="#locate-the-application-rest-url" data-level="1" class="fragment">Locate the Application REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-applications" data-level="1" class="fragment">List Applications</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-an-application" data-level="1" class="fragment">Retrieve an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#register-an-application" data-level="1" class="fragment">Register an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#edit-an-application" data-level="1" class="fragment">Edit an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#enable-an-application" data-level="1" class="fragment">Enable an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#disable-an-application" data-level="1" class="fragment">Disable an Application</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-an-application" data-level="1" class="fragment">Delete an Application</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#account-store-mappings" data-level="0" class="fragment">Account Store Mappings</a><ul class="menu"><li class="leaf"><a href="#account-store-mapping-resource" data-level="1" class="fragment">Account Store Mapping Resource</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#directories" data-level="0" class="fragment">Directories</a><ul class="menu"><li class="leaf"><a href="#locate-the-directory-rest-url" data-level="1" class="fragment">Locate the Directory REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-directories" data-level="1" class="fragment">List Directories</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-a-directory" data-level="1" class="fragment">Retrieve a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-a-directory" data-level="1" class="fragment">Create a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#map-directories-to-applications" data-level="1" class="fragment">Map Directories to Applications</a><ul class="menu"></ul></li><li class="leaf"><a href="#edit-directory-details" data-level="1" class="fragment">Edit Directory Details</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-agent-configuration" data-level="1" class="fragment">Update Agent Configuration</a><ul class="menu"></ul></li><li class="leaf"><a href="#enable-a-directory" data-level="1" class="fragment">Enable a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#disable-a-directory" data-level="1" class="fragment">Disable a Directory</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-a-directory" data-level="1" class="fragment">Delete a Directory</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#accounts" data-level="0" class="fragment">Accounts</a><ul class="menu"><li class="leaf"><a href="#locate-the-account-rest-url" data-level="1" class="fragment">Locate the Account REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#authenticate-an-account" data-level="1" class="fragment">Authenticate an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-accounts" data-level="1" class="fragment">List Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-an-account" data-level="1" class="fragment">Retrieve an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-an-account" data-level="1" class="fragment">Create an Account</a><ul class="menu"></ul></li><li class="leaf"><a href="#edit-account-details" data-level="1" class="fragment">Edit Account Details</a><ul class="menu"></ul></li><li class="leaf"><a href="#assign-accounts-to-groups" data-level="1" class="fragment">Assign Accounts to Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#remove-accounts-from-groups" data-level="1" class="fragment">Remove Accounts from Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#enable-accounts" data-level="1" class="fragment">Enable Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#disable-accounts" data-level="1" class="fragment">Disable Accounts</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-an-account" data-level="1" class="fragment">Delete an Account</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#groups" data-level="0" class="fragment">Groups</a><ul class="menu"><li class="leaf"><a href="#locate-the-group-rest-url" data-level="1" class="fragment">Locate the Group REST URL</a><ul class="menu"></ul></li><li class="leaf"><a href="#list-groups" data-level="1" class="fragment">List Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-a-group" data-level="1" class="fragment">Retrieve a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-groups" data-level="1" class="fragment">Create Groups</a><ul class="menu"></ul></li><li class="leaf"><a href="#edit-group-details" data-level="1" class="fragment">Edit Group Details</a><ul class="menu"></ul></li><li class="leaf"><a href="#enable-a-group" data-level="1" class="fragment">Enable a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#disable-a-group" data-level="1" class="fragment">Disable a Group</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-a-group" data-level="1" class="fragment">Delete a Group</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#custom-data" data-level="0" class="fragment">Custom Data</a><ul class="menu"><li class="leaf"><a href="#create-custom-data" data-level="1" class="fragment">Create Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#retrieve-custom-data" data-level="1" class="fragment">Retrieve Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#update-custom-data" data-level="1" class="fragment">Update Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-custom-data" data-level="1" class="fragment">Delete Custom Data</a><ul class="menu"></ul></li><li class="leaf"><a href="#delete-custom-data-field" data-level="1" class="fragment">Delete Custom Data Field</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#workflow-automations" data-level="0" class="fragment">Workflow Automations</a><ul class="menu"><li class="leaf"><a href="#account-registration-and-verification" data-level="1" class="fragment">Account Registration and Verification</a><ul class="menu"></ul></li><li class="leaf"><a href="#password-reset" data-level="1" class="fragment">Password Reset</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#ruby-sample-code" data-level="0" class="fragment">Ruby Sample Code</a><ul class="menu"><li class="leaf"><a href="#heroku-ruby-sample-app" data-level="1" class="fragment">Heroku Ruby Sample App</a><ul class="menu"></ul></li><li class="leaf"><a href="#create-a-stormpath-sdk-client-using-a-stormpath-api-key-file" data-level="1" class="fragment">Create a Stormpath SDK Client Using a Stormpath API Key File</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#administering-stormpath" data-level="0" class="fragment">Administering Stormpath</a><ul class="menu"></ul></li><li class="leaf"><a href="#glossary-of-terms" data-level="0" class="fragment">Glossary of Terms</a><ul class="menu"></ul></li></ul>
			
			</li>
		
			<li class="leaf">
			
				<a href="https://github.com/stormpath/stormpath-sdk-ruby" target="_blank"><span>Ruby SDK on Github</span></a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="https://github.com/stormpath/stormpath-ruby-samples" target="_blank"><span>Ruby Sample Apps</span></a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="https://github.com/stormpath/stormpath-rails" target="_blank"><span>Rails Ruby Gem</span></a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="https://github.com/stormpath/stormpath-rails-sample" target="_blank"><span>Rails Sample Web App</span></a>
			
			
			</li>
		
		</ul>
  	
  
        
  	
  
        
  	
  
        
  	
                
                       <div class="menu-divider"></div> 
                
                
		<ul class="menu">
		
			<li class="leaf">
			
				<a href="/how-do-i">How Do I..?</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/errors">Stormpath Error Codes</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/sample-apps">Sample Apps</a>
			
			
			</li>
		
		</ul>
  	
  
</div>
    </section>
  

  
</aside>


        </div>
      </div>
    </div>
  </div>
</div>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<!-- Google Code for Remarketing tag -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1002663385;
var google_conversion_label = "wSRZCLfkjQQQ2duN3gM";
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
/* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1002663385/?value=0&amp;label=wSRZCLfkjQQQ2duN3gM&amp;guid=ON&amp;script=0"/>
</div>
</noscript>

<!-- AdRoll Code -->
<script type="text/javascript">
adroll_adv_id = "RVWGHIV3GJCLHIUDNFIMNY";
adroll_pix_id = "L2WE5KAWDRDBVP46PZZBQJ";
(function () {
var oldonload = window.onload;
window.onload = function(){
__adroll_loaded=true;
var scr = document.createElement("script");
var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
scr.setAttribute('async', 'true');
scr.type = "text/javascript";
scr.src = host + "/j/roundtrip.js";
((document.getElementsByTagName('head') || [null])[0] ||
document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
if(oldonload){oldonload()}};
}());
</script>

<!-- Start Visual Website Optimizer Asynchronous Code -->
<script type="text/javascript">
var _vwo_code=(function(){
var account_id=36938,
settings_tolerance=2000,
library_tolerance=1500,
use_existing_jquery=false,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script>
<!-- End Visual Website Optimizer Asynchronous Code -->

<!-- CrazyEgg -->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0017/1602.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>

<!-- Perfect Audience -->
<script type="text/javascript">
(function() {
window._pa = window._pa || {};
// _pa.orderId = "";
// _pa.revenue = "";
var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.perfectaudience.com/serve/51fc2c6f1b440adfcc000099.js";
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
})();
</script>


</body>
</html>
