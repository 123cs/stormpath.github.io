
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using Stormpath's ID Site to Host your User Management UI - Stormpath</title>
  <meta name="author" content="Stormpath, Inc.">

  
  <meta name="description" content="This feature is currently in Beta. If you have any questions, bug reports, or enhancement requests please email support@stormpath.com. Currently &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stormpath.github.io/guides/using-id-site">
  <link href="/favicon.ico" rel="icon">

  <style>
  @import url("/stylesheets/normalize.css?mrrrji");
  @import url("/stylesheets/wireframes.css?mrrrji");
  @import url("/stylesheets/html-elements.css?mrrrji");
  @import url("/stylesheets/tabs.css?mrrrji");
  @import url("/stylesheets/tinybox2.css?mrrrji");
  @import url("/stylesheets/pages.css?mrrrji");
  @import url("/stylesheets/docs.css?mrrrji");
  @import url("/stylesheets/blocks.css?mrrrji");
  @import url("/stylesheets/navigation.css?mrrrji");
  @import url("/stylesheets/views-styles.css?mrrrji");
  @import url("/stylesheets/nodes.css?mrrrji");
  @import url("/stylesheets/comments.css?mrrrji");
  @import url("/stylesheets/forms.css?mrrrji");
  @import url("/stylesheets/fields.css?mrrrji");
  @import url("/stylesheets/layouts/responsive-sidebars.css?mrrrji");
  </style>

  <link href="/atom.xml" rel="alternate" title="Stormpath" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>



  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Covered+By+Your+Grace|Open+Sans:300italic,400italic,600italic,700italic,800italic,300,400,600,700,800" media="all" />

<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/cupertino/jquery-ui.css" />
<link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/mono-blue.min.css" />

<!--[if lt IE 9]>
<script src="/javascripts/html5-respond.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29159574-1']);
  _gaq.push(['_setDomainName', 'stormpath.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- kissmetrics -->
<script type="text/javascript">
  var _kmq = _kmq || [];
  var _kmk = _kmk || '684b854336bd3a6523260ebd991eec06b18b929a';
  function _kms(u){
    setTimeout(function(){
      var d = document, f = d.getElementsByTagName('script')[0],
      s = d.createElement('script');
      s.type = 'text/javascript'; s.async = true; s.src = u;
      f.parentNode.insertBefore(s, f);
    }, 1);
  }
  _kms('//i.kissmetrics.com/i.js');
  _kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
</script>

<!-- Optimizely -->
<script src="//cdn.optimizely.com/js/225847041.js"></script>

  

</head>

<body  class="not-front  node-type-documentation  ">
<!-- Qualaroo for stormpath.com -->
<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript" src="//s3.amazonaws.com/ki.js/47725/9JM.js" async="true"></script>
      
<script type="text/javascript" src="//assets.zendesk.com/external/zenbox/v2.6/zenbox.js"></script>
<style type="text/css" media="screen, projection">
  @import url(//assets.zendesk.com/external/zenbox/v2.6/zenbox.css);
</style>
<script type="text/javascript">
  if (typeof(Zenbox) !== "undefined") {
    Zenbox.init({
      dropboxID:   "20184231",
      url:         "https://stormpath.zendesk.com",
      tabTooltip:  "Get Help",
      tabImageURL: "/images/tab_questions_black_right.png",
      tabColor:    "689ed0",
      tabPosition: "Right"
    });
  }
</script>


<script src="/javascripts/stormpath_docs.js"></script>
<script type="text/javascript">
	var sp_docs_menu = {};
	
		sp_docs_menu['_includes'] = [];
		
	
		sp_docs_menu['_layouts'] = [];
		
	
		sp_docs_menu['assets'] = [];
		
	
		sp_docs_menu['console'] = [];
		
			sp_docs_menu['console'].push('product-guide');
		
			sp_docs_menu['console'].push('quickstart');
		
	
		sp_docs_menu['errors'] = [];
		
			sp_docs_menu['errors'].push('2000');
		
			sp_docs_menu['errors'].push('2001');
		
			sp_docs_menu['errors'].push('2002');
		
			sp_docs_menu['errors'].push('2003');
		
			sp_docs_menu['errors'].push('2004');
		
			sp_docs_menu['errors'].push('2005');
		
			sp_docs_menu['errors'].push('2006');
		
			sp_docs_menu['errors'].push('2007');
		
			sp_docs_menu['errors'].push('2008');
		
			sp_docs_menu['errors'].push('2009');
		
			sp_docs_menu['errors'].push('2010');
		
			sp_docs_menu['errors'].push('2011');
		
			sp_docs_menu['errors'].push('2012');
		
			sp_docs_menu['errors'].push('2013');
		
			sp_docs_menu['errors'].push('2014');
		
			sp_docs_menu['errors'].push('2015');
		
			sp_docs_menu['errors'].push('2016');
		
			sp_docs_menu['errors'].push('2017');
		
			sp_docs_menu['errors'].push('2018');
		
			sp_docs_menu['errors'].push('2100');
		
			sp_docs_menu['errors'].push('2101');
		
			sp_docs_menu['errors'].push('2102');
		
			sp_docs_menu['errors'].push('2103');
		
			sp_docs_menu['errors'].push('2104');
		
			sp_docs_menu['errors'].push('2105');
		
			sp_docs_menu['errors'].push('2106');
		
			sp_docs_menu['errors'].push('2107');
		
			sp_docs_menu['errors'].push('3000');
		
			sp_docs_menu['errors'].push('3001');
		
			sp_docs_menu['errors'].push('3002');
		
			sp_docs_menu['errors'].push('3003');
		
			sp_docs_menu['errors'].push('3004');
		
			sp_docs_menu['errors'].push('4001');
		
			sp_docs_menu['errors'].push('4002');
		
			sp_docs_menu['errors'].push('5010');
		
			sp_docs_menu['errors'].push('5100');
		
			sp_docs_menu['errors'].push('5101');
		
			sp_docs_menu['errors'].push('5102');
		
			sp_docs_menu['errors'].push('5103');
		
			sp_docs_menu['errors'].push('5104');
		
			sp_docs_menu['errors'].push('5106');
		
			sp_docs_menu['errors'].push('5108');
		
			sp_docs_menu['errors'].push('5110');
		
			sp_docs_menu['errors'].push('5112');
		
			sp_docs_menu['errors'].push('5114');
		
			sp_docs_menu['errors'].push('6100');
		
			sp_docs_menu['errors'].push('6201');
		
			sp_docs_menu['errors'].push('6202');
		
			sp_docs_menu['errors'].push('7200');
		
			sp_docs_menu['errors'].push('7201');
		
			sp_docs_menu['errors'].push('7202');
		
			sp_docs_menu['errors'].push('9000');
		
			sp_docs_menu['errors'].push('9001');
		
			sp_docs_menu['errors'].push('9002');
		
			sp_docs_menu['errors'].push('9003');
		
			sp_docs_menu['errors'].push('9004');
		
			sp_docs_menu['errors'].push('9005');
		
			sp_docs_menu['errors'].push('9006');
		
	
		sp_docs_menu['express'] = [];
		
			sp_docs_menu['express'].push('quickstart');
		
	
		sp_docs_menu['flask'] = [];
		
			sp_docs_menu['flask'].push('quickstart');
		
	
		sp_docs_menu['guides'] = [];
		
			sp_docs_menu['guides'].push('ad-ldap');
		
			sp_docs_menu['guides'].push('api-key-management');
		
			sp_docs_menu['guides'].push('dev-test-prod-environments');
		
			sp_docs_menu['guides'].push('multi-tenant');
		
			sp_docs_menu['guides'].push('social-integrations');
		
			sp_docs_menu['guides'].push('using-id-site');
		
	
		sp_docs_menu['home'] = [];
		
	
		sp_docs_menu['how-do-i'] = [];
		
	
		sp_docs_menu['images'] = [];
		
	
		sp_docs_menu['integrations'] = [];
		
	
		sp_docs_menu['java'] = [];
		
			sp_docs_menu['java'].push('product-guide');
		
			sp_docs_menu['java'].push('quickstart');
		
	
		sp_docs_menu['javascripts'] = [];
		
	
		sp_docs_menu['nodejs'] = [];
		
			sp_docs_menu['nodejs'].push('quickstart');
		
	
		sp_docs_menu['php'] = [];
		
			sp_docs_menu['php'].push('product-guide');
		
			sp_docs_menu['php'].push('quickstart');
		
	
		sp_docs_menu['python'] = [];
		
			sp_docs_menu['python'].push('product-guide');
		
			sp_docs_menu['python'].push('quickstart');
		
	
		sp_docs_menu['rest'] = [];
		
			sp_docs_menu['rest'].push('api');
		
			sp_docs_menu['rest'].push('product-guide');
		
			sp_docs_menu['rest'].push('quickstart');
		
	
		sp_docs_menu['ruby'] = [];
		
			sp_docs_menu['ruby'].push('product-guide');
		
			sp_docs_menu['ruby'].push('quickstart');
		
	
		sp_docs_menu['sample-apps'] = [];
		
	
		sp_docs_menu['stylesheets'] = [];
		
	
</script>

<div id="page">

  <div id="header-wrapper">
  	<header id="header" role="banner" class="container">
      <hgroup id="name-and-slogan">
  <h1 id="site-name">
    <a href="http://www.stormpath.com/" title="Home" rel="home"><span>Stormpath</span></a>
  </h1>
</hgroup><!-- /#name-and-slogan -->

<div id="navigation"><div class="menu-button">Menu</div>
<nav id="main-menu" role="navigation">
  <h2 class="element-invisible">Main menu</h2>
<ul class="links inline clearfix">
<li class="menu-1413 first"><a href="/" title="Documentation">Docs</a></li>
<li class="menu-710"><a href="http://www.stormpath.com/product">Product</a></li>
<li class="menu-709"><a href="http://www.stormpath.com/pricing">Pricing</a></li>
<li class="menu-438"><a href="https://support.stormpath.com/" title="">Support</a></li>
<li class="menu-547"><a href="http://www.jobscore.com/jobs/stormpath" title="Jobs at Stormpath. Join us!">Jobs</a></li>
<li class="menu-556"><a href="http://api.stormpath.com" title="">Log in</a></li>
<li class="menu-1328 last cta-button"><a href="https://api.stormpath.com/register" title="">Sign up</a></li>
</ul>
</nav>
</div>
    </header>
  </div>
  <div id="main-wrapper">
    <div id="main" class="container">
      <div id="main-inner">
        <div id="main-inner-inner">
          <div id="content" class="column" role="main">
            <a id="main-content"></a>
            
              <h1 class="title" id="page-title">Using Stormpath's ID Site to Host your User Management UI</h1>
            
            <div class="sharing">
    <div class="addthis_sharing_toolbox"></div>
</div>
          	<div class='docs-info'><p>  <strong>This feature is currently in Beta.</strong>  If you have any questions, bug reports, or enhancement requests please email support@stormpath.com.</p>
</div>




<div class='docs-info'><p>Currently supported Stormpath SDKs for this feature include: <strong>Java</strong>.  Other language platforms are on their way soon.</p>
</div>


<p>In this guide, we discuss how to set up Stormpath to host a set of web pages that enable your applications to quickly and securely offer common identity management functions like login, registration, and password reset.</p>

<div class='docs-tip'><p>ID site page are a convenience feature in Stormpath.  If you prefer to build and host your own pages, you can recreate much of the functionality using Stormpath&#8217;s SDKs and Core API.</p>
</div>


<h2><a id="what-is-an-id-site"></a>What is an ID Site</h2>

<p>Stormpath ID Site is a set of hosted and pre-built user interface screens that take care of common identity functions for your applications&mdash; login, registration, password reset.  ID Site can be access via your own custom domain like id.mydomain.com and shared across multiple applications to create centralized authentication if needed.</p>

<p>The screens, and even the functionality, of ID site are completely customizable.  You have full access to the source code of the ID Site screens so you can make simple changes like adding your own logo and changing CSS or more complex changes like adding fields, adding javascript code, adding screens, removing screens, and even changing how the screens behave.</p>

<h2><a id="why-should-i-use-stormpath-id-site"></a>Why should I use Stormpath ID Site?</h2>

<p>Building, securing, and maintaining identity screens for your users is time consuming, full of security concerns, and often more complex than many developers estimate.  Stormpath ID Site gives you and your development team peace of mind that you will have best in class user security quickly and easily, with very little code&mdash; minimizing risk to your project timeline.</p>

<p>Stormpath ID Sites fully decouples your identity screens from your applications, making it incredibly easy to provide the same login / registration pages for multiple applications &mdash; achieving centralized user management and authentication with a clean and easy user experience.</p>

<h2><a id="how-does-id-site-work"></a>How does ID Site Work</h2>

<p>To demonstrate how the SDK works, we’ll use an example. Imagine you are building a Stormtrooper application for managing Stormtrooper equipment— like awesome helmets and blasters. The application is trooperapp.com and is using Stormpath&rsquo;s ID Site for Login and Registration.</p>

<p>Once trooperapp.com is rendered by the browser, login and registration buttons are available for the unauthenticated user.  Clicking on these buttons will call your server-side application at specific endpoints.  For illustration, the login button will invoke <code>/login</code> and registration will invoke <code>/register</code>. Your application using the Stormpath SDK will securely redirect the user to the ID Site along with a cryptographically signed JSON Web Token (JWT) that includes information like the <code>Callback URI</code>, <code>Path</code> to a specific ID Site page, and any <code>State</code> you think is important for your application.</p>

<p>On the ID Site, the user will enter their data and complete the appropriate action, like Login.  ID Site will automatically detect any Workflow or Social Login configurations set in Stormpath and show the appropriate buttons, messaging, and behavior.</p>

<p>After the user has logged in successfully, they will be redirected back to your application&rsquo;s <code>Callback URI</code>.  For illustration purposes, this could be <code>http://trooperapp.com/handle-id-site-redirect</code>.  When the ID Site redirects back to your application, it will pass a secure JWT that represents the account in Stormpath.  Using the Stormpath SDK, your application will handle the request to <code>/handle-id-site-redirect</code>, validate that the JWT is correct, and return an <code>Account Result</code>. The <code>Account Result</code> will include the Stormpath <code>Account</code> object and additional information, such as any state that was passed by your application or if the account returned is newly created.</p>

<!-- When a user wants to login to or register for your application, your application will redirect them to your ID Site.  On your ID Site, the user will see will enter their data and complete the appropriate action, like Login.  ID Site will automatically detect any Workflow or Social Login configurations you have set in Stormpath and show the appropriate buttons, messaging, and behavior.

On a Login, your ID Site will validate the user's credentials and create a security assertion that will be sent back to your application letting your application know that the current user is authenticated and should be trusted.  That security assertion is cryptographically signed by Stormpath using a shared secret known by your application.  This means that only Stormpath and your application can understand the assertion, thwarting certain attack vectors including [man-in-the-middle attacks](http://en.wikipedia.org/wiki/Man-in-the-middle_attack). 

Once your application receives the security assertion, your application will use the Stormpath SDK to verify and unpack the user data.  -->


<p></p>

<p><img src="/images/docs/ID-diagram.png" alt="" /></p>

<!-- sequence diagram -->


<h2><a id="setting-up-your-id-site"></a>Setting up your ID Site</h2>

<p>Your ID Site uses a default configuration for testing purposes, but can be fully configured to host customized code or to use your own custom domain.</p>

<p>To set up your ID Site, log into the <a href="https://api.stormpath.com">Administrator Console</a> and:</p>

<ol>
<li>Click on the <code>ID Site</code> Tab</li>
<li>Add your application URLs that will be allowed process the callbacks from the ID Site to the <code>Authorized Redirect URIs</code> property.  These URLs will be hosted by your application and will use the Stormpath SDK to process the security assertions about the user that ID Site send back.</li>
<li>Click the <code>Update</code> button at the bottom of the page</li>
</ol>


<!-- I feel like we really need to better explain Authorized Redirect URIs.  With an example perhaps. -->




<!-- screen shot -->


<p>Once you configure your ID site, a default subdomain will be created on <code>stormpath.io</code>.  The default ID Site URL follows the format of <code>tenant-name.id.stormpath.io</code> where tenant-name is the name of your Stormpath <code>Tenant</code>.</p>

<div class='docs-warning'><p>Your ID Site URL can only be accessed via a redirect from a Stormpath enabled application because ID Site expects a cryptographically signed token with specific data in it.  Simply visiting your ID Site URL in a browser will give you an error.</p>
</div>


<p>For more advanced configurations, there are additional properties in the ID Site configuration that can help:</p>

<ul>
<li>Set a Logo to appear at the top of the default ID Site</li>
<li>Set a custom domain name (like id.mydomain.com) and SSL certificate to host your ID Site from your domain, securely</li>
<li>Set a custom github repo to host your ID Site (to host custom code)</li>
</ul>


<!-- I feel like we need to talk about this more -->


<h3><a id="setting-your-own-custom-domain-name-and-ssl-certificate"></a>Setting your own custom domain name and SSL certificate</h3>

<p>By default, the address of your ID Site is tenant-name.id.stormpath.io. However, you can change the address to a subdomain of your own website, such as id.mysite.com. This is called setting up a custom domain name.</p>

<p>For example, going back to our Stormpath Equipment Application trooperapp.com and the URL of your main website is trooperapp.com. After signing up to Stormpath, the initial address of your ID Site might be something like happy-rebel.id.stormpath.io. You can change the ID Site&rsquo;s address to a subdomain of your company&rsquo;s website like id.trooperapp.com.</p>

<p>The workflow for changing the address consists of the following steps:</p>

<ul>
<li>Get a domain name and a subdomain (if not already done)</li>
<li>Make the subdomain an alias of your ID Site on Stormpath</li>
<li>Enable the custom domain in Stormpath&rsquo;s ID Site configuration</li>
<li>Input SSL information for Stormpath to host</li>
</ul>


<h4>Getting a domain name and a subdomain</h4>

<p>If not already done, you must register a domain name and add an ID subdomain to it.</p>

<div class='docs-note'><p>Working with domain names and subdomains can be confusing because it&#8217;s something most of us rarely do. Consult your system administrator, if you have one, before proceeding.</p>
</div>


<ul>
<li><p><em>Purchase and register a domain name with a domain registrar.</em> You can purchase and register a domain name from any domain registrar, including GoDaddy, Yahoo! Domains, 1&amp;1, Netregistry, or Register.com. For instructions, see the Help on the registrar&rsquo;s website.</p></li>
<li><p><em>Create a subdomain for your domain for your ID Site.</em> See the Help on the registrar&rsquo;s website for instructions on adding a subdomain. You can call the subdomain &ldquo;id&rdquo;, &ldquo;login&rdquo; or something similar. Example: id.trooperapp.com.</p></li>
</ul>


<h4>Making the subdomain an alias of your ID Site on Stormpath</h4>

<p>The next step is to make your subdomain an alias of your ID Site on Stormpath. An alias is simply an alternate address for a website. For example, you can make the addresses &ldquo;id.trooperapp.com&rdquo; and &ldquo;happy-rebel.id.stormpath.io&rdquo; interchangeable as far as web browsers are concerned.</p>

<div class='docs-note'><p>Consult your system administrator, if you have one, before proceeding.</p>
</div>


<p>To make your subdomain an alias of your ID Site website on Stormpath, you must use your domain registrar&rsquo;s tools and UI.  These steps will generally include:</p>

<ul>
<li>Log in to your domain registrar&rsquo;s control panel.</li>
<li>Look for the option to change DNS records.</li>
<li>Locate or create the CNAME records for your domain.</li>
<li>Point the CNAME record from your subdomain (ex. &ldquo;id&rdquo; or &ldquo;login&rdquo;) to your ID Site subdomain (ex. happy-rebel.id.stormpath.io)</li>
</ul>


<div class='docs-note'><p>It takes time for changes to the DNS system to be implemented. Typically, it can take anywhere from a few hours to a day, depending on your Time To Live (TTL) settings in the registrar&#8217;s control panel. In the example above, the TTL is 14,400 seconds, or 4 hours.</p>
</div>


<h4>Enabling the custom domain in Stormpath&rsquo;s ID Site configuration</h4>

<p>After making your subdomain an alias of your support ID Site on Stormpath, you must enable a custom domain in the Stormpath. If you omit this step, your subdomain will point to a error page rather than your ID Site.</p>

<p>To set up a custom domain on ID Site, log into the <a href="https://api.stormpath.com">Administrator Console</a> and:</p>

<ol>
<li>Click on the <code>ID Site</code> Tab</li>
<li>Click the <code>Custom</code> option under <code>Domain Name</code></li>
<li>Type in the subdomain for your ID Site (ex: id.trooperapp.com)</li>
<li>Click the <code>Update</code> button at the bottom of the page</li>
</ol>


<h4>Setting up SSL on your ID Site</h4>

<p>Since Stormpath is hosting the ID Site under your custom subdomain, to secure it using SSL you must provide the SSL certificate information to Stormpath.Creating SSL certificates is an involved task which requires working with a certificate authority such as Verisign and includes:</p>

<ol>
<li>Generating a certificate request (CSR) with a Distinguished Name (DN) that matches your subdomain (ex. id.trooperapp.com)</li>
<li>Provide the CSR file to a certificate authority such as Verisign. The certificate authority generates a SSL certificate and gives it to you so that it can be installed on Stormpath&rsquo;s servers.</li>
</ol>


<p>Once the SSL certificate is retrieved from the certificate authority, you can log into the <a href="https://api.stormpath.com">Administrator Console</a> and configure SSL by:</p>

<ol>
<li>Click on the <code>ID Site</code> Tab</li>
<li>Open the zip to retrieve your .pem file if needed.</li>
<li>Copy the text for the SSL certificate and Private Key to the appropriate text boxes on the <code>ID Site</code> Tab</li>
<li>Click the <code>Update</code> button at the bottom of the page</li>
</ol>


<p>When the ID Site is updated, the SSL information is uploaded to Stormpath and will be update your ID Site automatically.</p>

<h3><a id="customizing-id-site-look-feel-and-behavior"></a>Customizing ID Site look, feel, and behavior</h3>

<p>Your ID Site can be customized to have your own look and feel. Simple customization, like adding a logo, can be doing via Stormpath&rsquo;s Admin Console.</p>

<p>Below is the default look and feel for your ID Site:</p>

<p><img src="/images/guides/Login.png" width="700" alt="" /></p>

<p>More advanced customization can be achieved by forking the <a href="https://github.com/stormpath/idsite-src">default ID Site source code found on GitHub</a> and then pointing ID Site to your new GitHub repository.  Stormpath infrastructure can detect any changes to a specific branch in your GitHub repository and automatically sync your file to the Stormpath infrastructure.</p>

<!-- anything we want to add here? Angular SPA? Stormpath.js? Fluffy kittens, rainbows, and unicorns? -->


<h2><a id="setting-up-your-application-to-use-id-site"></a>Setting up your Application to use ID Site</h2>

<p>In order to set up your application to use ID Site, you will need to install the Stormpath SDK and register the application in Stormpath.  The Stormpath SDK and hosted ID Site will do most of the work for your application, including signing and unpacking secure communication between themselves.  With the SDK installed, you will need to implement two steps:</p>

<ul>
<li>Send a User to the ID Site to Login, Register, etc.</li>
<li>Consume responses from the ID Site to your Application</li>
</ul>


<h3><a id="sending-a-user-to-the-id-site-to-authenticate--sign-up"></a>Sending a User to the ID Site to Authenticate / Sign up</h3>

<p>When a user wants to login to or register for your application, you will need to redirect them to your ID Site. The Stormpath SDK will generate a secure URL for the HTTP redirect on your application&rsquo;s behalf and include data needed by ID Site.</p>

<p>A typical set of steps in your application are as follows:</p>

<ol>
<li>You render your application with a login button</li>
<li>The user clicks the login button which will send a request to you server</li>
<li>Your server will use the Stormpath SDK to get the redirection URL for the ID Site</li>
<li>Your server responds with an HTTP 302 which redirects the user to the ID Site URL</li>
</ol>


<p>To build an ID Site URL for redirection, you must ask the Stormpath <code>Application</code> object for an <code>ID Site URL Builder</code>.  From the builder, you can set important properties to pass information and make sure the ID Site can call back to your application.</p>

<p>To get an <code>ID Site URL Builder</code>:</p>

<pre><code>    Application application = client.getResource(applicationRestUrl, Application.class);

    IdSiteUrlBuilder idSiteBuilder = application.newIdSiteUrlBuilder();
</code></pre>

<div class='docs-info'><p><strong>Reminder</strong> - An <code>Application</code> in Stormpath is a representation of your real world application.  For more info check out our <a href="https://stormpath.com/tutorial/">Tutorial</a> or <a href="/java/product-guide/">Product Guide</a>.</p>
</div>


<p>The <code>ID Site URL Builder</code> will allow you to configure the URL to include:</p>

<ul>
<li><code>Callback URI</code> (required)&ndash; The callback URI will be called by ID Site when a successful login or registration event occurs. The Callback URI is <strong>required</strong> for the builder and it must match an <code>Authorized Redirect URI</code> in the Admin Console&rsquo;s ID Site settings.  See the <a href="#setting-up-your-id-site">Setting up your ID Site</a> section in this guide.</li>
<li><code>Path</code> (optional)&ndash; a relative link to a page in your ID Site.  The default ID Site does not require a path and will default to the login page.  If you would like to send the user to a specific page in ID site, like the registration page or the forgot password page, you would set that in the <code>Path</code>.  If you are using the default ID Site, the URLs are:

<ul>
<li>Registration &ndash; <code>/#/register</code></li>
<li>Forgot Password &ndash; <code>/#/forgot</code></li>
</ul>
</li>
<li><code>State</code> (optional) &ndash; a string that stores information that your application needs <em>after</em> the user is redirected back to your application.  You may need to store information about what page the user was on, or any variables that are important for your application.</li>
</ul>


<p>Once the parameters are configured on your <code>ID Site URL Builder</code>, you can call the <code>build</code> method to get a string representation of the URL.</p>

<p>The HTTP response to the user should resemble:</p>

<pre><code>    HTTP/1.1 302 Found

    Cache-Control: no-store no-cache
    Pragma: no-cache
    Expires: -1
    Location: %%GENERATED_ID_SITE_URL_FROM_BUILDER%%
</code></pre>

<p>Creating the redirection with an <code>HTTPServletResponse</code> would follow:</p>

<pre><code>response.setStatus(HTTPServletResponse.SC_FOUND);
response.setHeader("Cache-control", "no-cache, no-store");
response.setHeader("Pragma", "no-cache");
response.setHeader("Expires", "-1");
response.setHeader("Location", idSiteBuilder.build());
</code></pre>

<!-- do we want to include the example? -->


<!-- 
To demonstrate how the SDK works, we’ll use an example. Imagine you are  building a Stormtrooper application for managing Stormtrooper equipment— like awesome helmets and blasters. The application is using Stormpath's ID Site for authentication.
-->


<h3><a id="consuming-responses-from-the-id-site-to-your-application"></a>Consuming responses from the ID Site to your Application</h3>

<p>Once the user has logged in, created an account, or verified an account, the ID Site will redirect the user along with a security assertion back to your application.  ID Site will use the <code>Callback URI</code> you included when you first redirected the user to ID Site.  The Stormpath SDK will verify the cryptographic signature on the assertion and and unpacks the user information.</p>

<p>For example:</p>

<pre><code>public void authenticate(HttpServletRequest request, HttpServletResponse response) {
     Application application = client.getResource(applicationRestUrl, Application.class);

     AccountResult accountResult = application.newIdSiteCallbackHandler(request).getAccountResult();

     Account account = accountResult.getAccount();
}   
</code></pre>

<p>The <code>AccountResult</code> will be able to give your application the ability to understand:</p>

<ul>
<li>The <code>Account</code> for the successful account result</li>
<li>A <code>boolean</code> that will return true for a newly created account</li>
<li>A <code>String</code> of the state that was set when using the <code>ID Site URL Builder</code></li>
</ul>


<p>Once the account is retrieved, you can get access to additional account properties that are important to your application, such as <code>Groups</code> or <code>CustomData</code></p>

<!-- 
## Notes on security
A major feature of ID Site is security.  With ID Site:

All user authentication is handled on a Stormpath hosted ID Site to Stormpath directly.  So they're no additional hops to secure

Communication between ID site and Stormpath is using one time use tokens.  So no replay attacks.  

Info being sent from ID site back to your app is being signed that only your app and id site have shared secret.  All of this is transparent to the developer its all handled by the sdk.

ALl comm is over SSL.  Host their SSL -->


<h2><a id="wrapping-up"></a>Wrapping up</h2>

<p>In this guide, we discussed how to set up a Stormpath ID Site as well as how your application can leverage your ID Site to provide common application work flows around user login and registration. This feature is currently in beta. If you have any questions, bug reports, or enhancement requests please email <a href="&#x6d;&#x61;&#x69;&#x6c;&#116;&#x6f;&#x3a;&#x73;&#x75;&#x70;&#x70;&#111;&#x72;&#116;&#x40;&#x73;&#x74;&#x6f;&#x72;&#x6d;&#112;&#x61;&#x74;&#104;&#46;&#x63;&#x6f;&#x6d;&#x2e;">&#115;&#x75;&#x70;&#x70;&#x6f;&#114;&#x74;&#64;&#115;&#x74;&#x6f;&#x72;&#109;&#112;&#97;&#116;&#x68;&#46;&#x63;&#111;&#x6d;&#46;</a></p>

            <div id="spread-word">
<hr>

<h2> Help Us Spread the Word </h2>

<p>Did you find this valuable?  If you've enjoyed playing with Stormpath or are excited about what we've built, please help us spread the world with a quick tweet or by just telling a friend.  Thank you!</p>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:title="Checkout Stormpath, it helps you set up complete user management in your application in minutes."
addthis:url="https://stormpath.com" >
  <a class="addthis_button_twitter"></a>
  <a class="addthis_button_preferred_2"></a>
  <a class="addthis_button_preferred_3"></a>
  <a class="addthis_button_preferred_4"></a>
  <a class="addthis_button_compact"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f5ed709512978e9"></script>
<!-- AddThis Button END -->
<p>
</div>
            <div id="bottom-wrapper">
                     <div class="region region-bottom">
    <div id="block-block-1" class="block block-block first odd">

      
   Copyright © 2014 StormPath&nbsp;&nbsp;|&nbsp;&nbsp;All rights reserved 
</div><!-- /.block -->
<div id="block-menu-menu-footer-menu" class="block block-menu last even" role="navigation">

      
  <ul class="menu"><li class="first leaf"><a href="http://www.stormpath.com/privacy_policy">Privacy policy</a></li>
<li class="last leaf"><a href="http://www.stormpath.com/terms_of_service">Terms of Service</a></li>
</ul>
</div><!-- /.block -->
  </div><!-- /.region -->

            </div>          	
    	  </div>



<aside class="sidebars">
  
    <section class="region region-sidebar-first column sidebar">
      
<div id="block-stormpath-docs-languages" class="block block-stormpath-docs first odd">
 <form class="stormpath-docs-select-language" action="/docs/java/product-guide" method="post" id="stormpath-docs-language-form" accept-charset="UTF-8"><div><div class="form-item form-type-select form-item-language">
  <label for="edit-language">Language: </label>
 <select id="edit-language" name="language" class="form-select">
  
  
 	
    <option value="rest">REST API</option>
 	
    <option value="java">Java</option>
 	
    <option value="nodejs">Node.js</option>
 	
    <option value="python">Python</option>
 	
    <option value="ruby">Ruby</option>
 	
    <option value="php">PHP</option>
 	
    <option value="guides" selected>Guides</option>
 	
    <option value="console">Admin Console</option>
 	
 </select>
</div>
<input type="hidden" name="form_id" value="stormpath_docs_language_form">
</div></form>
</div>

<script type="text/javascript">
	var sp_docs_menu = {};
	
		sp_docs_menu['_includes'] = [];
		
	
		sp_docs_menu['_layouts'] = [];
		
	
		sp_docs_menu['assets'] = [];
		
	
		sp_docs_menu['console'] = [];
		
			sp_docs_menu['console'].push('product-guide');
		
			sp_docs_menu['console'].push('quickstart');
		
	
		sp_docs_menu['errors'] = [];
		
			sp_docs_menu['errors'].push('2000');
		
			sp_docs_menu['errors'].push('2001');
		
			sp_docs_menu['errors'].push('2002');
		
			sp_docs_menu['errors'].push('2003');
		
			sp_docs_menu['errors'].push('2004');
		
			sp_docs_menu['errors'].push('2005');
		
			sp_docs_menu['errors'].push('2006');
		
			sp_docs_menu['errors'].push('2007');
		
			sp_docs_menu['errors'].push('2008');
		
			sp_docs_menu['errors'].push('2009');
		
			sp_docs_menu['errors'].push('2010');
		
			sp_docs_menu['errors'].push('2011');
		
			sp_docs_menu['errors'].push('2012');
		
			sp_docs_menu['errors'].push('2013');
		
			sp_docs_menu['errors'].push('2014');
		
			sp_docs_menu['errors'].push('2015');
		
			sp_docs_menu['errors'].push('2016');
		
			sp_docs_menu['errors'].push('2017');
		
			sp_docs_menu['errors'].push('2018');
		
			sp_docs_menu['errors'].push('2100');
		
			sp_docs_menu['errors'].push('2101');
		
			sp_docs_menu['errors'].push('2102');
		
			sp_docs_menu['errors'].push('2103');
		
			sp_docs_menu['errors'].push('2104');
		
			sp_docs_menu['errors'].push('2105');
		
			sp_docs_menu['errors'].push('2106');
		
			sp_docs_menu['errors'].push('2107');
		
			sp_docs_menu['errors'].push('3000');
		
			sp_docs_menu['errors'].push('3001');
		
			sp_docs_menu['errors'].push('3002');
		
			sp_docs_menu['errors'].push('3003');
		
			sp_docs_menu['errors'].push('3004');
		
			sp_docs_menu['errors'].push('4001');
		
			sp_docs_menu['errors'].push('4002');
		
			sp_docs_menu['errors'].push('5010');
		
			sp_docs_menu['errors'].push('5100');
		
			sp_docs_menu['errors'].push('5101');
		
			sp_docs_menu['errors'].push('5102');
		
			sp_docs_menu['errors'].push('5103');
		
			sp_docs_menu['errors'].push('5104');
		
			sp_docs_menu['errors'].push('5106');
		
			sp_docs_menu['errors'].push('5108');
		
			sp_docs_menu['errors'].push('5110');
		
			sp_docs_menu['errors'].push('5112');
		
			sp_docs_menu['errors'].push('5114');
		
			sp_docs_menu['errors'].push('6100');
		
			sp_docs_menu['errors'].push('6201');
		
			sp_docs_menu['errors'].push('6202');
		
			sp_docs_menu['errors'].push('7200');
		
			sp_docs_menu['errors'].push('7201');
		
			sp_docs_menu['errors'].push('7202');
		
			sp_docs_menu['errors'].push('9000');
		
			sp_docs_menu['errors'].push('9001');
		
			sp_docs_menu['errors'].push('9002');
		
			sp_docs_menu['errors'].push('9003');
		
			sp_docs_menu['errors'].push('9004');
		
			sp_docs_menu['errors'].push('9005');
		
			sp_docs_menu['errors'].push('9006');
		
	
		sp_docs_menu['express'] = [];
		
			sp_docs_menu['express'].push('quickstart');
		
	
		sp_docs_menu['flask'] = [];
		
			sp_docs_menu['flask'].push('quickstart');
		
	
		sp_docs_menu['guides'] = [];
		
			sp_docs_menu['guides'].push('ad-ldap');
		
			sp_docs_menu['guides'].push('api-key-management');
		
			sp_docs_menu['guides'].push('dev-test-prod-environments');
		
			sp_docs_menu['guides'].push('multi-tenant');
		
			sp_docs_menu['guides'].push('social-integrations');
		
			sp_docs_menu['guides'].push('using-id-site');
		
	
		sp_docs_menu['home'] = [];
		
	
		sp_docs_menu['how-do-i'] = [];
		
	
		sp_docs_menu['images'] = [];
		
	
		sp_docs_menu['integrations'] = [];
		
	
		sp_docs_menu['java'] = [];
		
			sp_docs_menu['java'].push('product-guide');
		
			sp_docs_menu['java'].push('quickstart');
		
	
		sp_docs_menu['javascripts'] = [];
		
	
		sp_docs_menu['nodejs'] = [];
		
			sp_docs_menu['nodejs'].push('quickstart');
		
	
		sp_docs_menu['php'] = [];
		
			sp_docs_menu['php'].push('product-guide');
		
			sp_docs_menu['php'].push('quickstart');
		
	
		sp_docs_menu['python'] = [];
		
			sp_docs_menu['python'].push('product-guide');
		
			sp_docs_menu['python'].push('quickstart');
		
	
		sp_docs_menu['rest'] = [];
		
			sp_docs_menu['rest'].push('api');
		
			sp_docs_menu['rest'].push('product-guide');
		
			sp_docs_menu['rest'].push('quickstart');
		
	
		sp_docs_menu['ruby'] = [];
		
			sp_docs_menu['ruby'].push('product-guide');
		
			sp_docs_menu['ruby'].push('quickstart');
		
	
		sp_docs_menu['sample-apps'] = [];
		
	
		sp_docs_menu['stylesheets'] = [];
		
	
</script>


<div id="block-stormpath-docs-docs-menu" class="block block-stormpath-docs last even">
  
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
  
        
  	
                
                
		<ul class="menu">
		
			<li class="leaf">
			
				<a href="/guides/multi-tenant">Multi-Tenant SaaS Applications with Stormpath</a>
			
			
			</li>
		
			<li class="leaf active-trail">
			
				<a href="/guides/using-id-site">Using ID Site</a>
			
			
				<ul class="menu"><li class="leaf"><a href="#what-is-an-id-site" data-level="0" class="fragment">What is an ID Site</a><ul class="menu"></ul></li><li class="leaf"><a href="#why-should-i-use-stormpath-id-site" data-level="0" class="fragment">Why should I use Stormpath ID Site?</a><ul class="menu"></ul></li><li class="leaf"><a href="#how-does-id-site-work" data-level="0" class="fragment">How does ID Site Work</a><ul class="menu"></ul></li><li class="leaf"><a href="#setting-up-your-id-site" data-level="0" class="fragment">Setting up your ID Site</a><ul class="menu"><li class="leaf"><a href="#setting-your-own-custom-domain-name-and-ssl-certificate" data-level="1" class="fragment">Setting your own custom domain name and SSL certificate</a><ul class="menu"></ul></li><li class="leaf"><a href="#customizing-id-site-look-feel-and-behavior" data-level="1" class="fragment">Customizing ID Site look, feel, and behavior</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#setting-up-your-application-to-use-id-site" data-level="0" class="fragment">Setting up your Application to use ID Site</a><ul class="menu"><li class="leaf"><a href="#sending-a-user-to-the-id-site-to-authenticate--sign-up" data-level="1" class="fragment">Sending a User to the ID Site to Authenticate / Sign up</a><ul class="menu"></ul></li><li class="leaf"><a href="#consuming-responses-from-the-id-site-to-your-application" data-level="1" class="fragment">Consuming responses from the ID Site to your Application</a><ul class="menu"></ul></li></ul></li><li class="leaf"><a href="#wrapping-up" data-level="0" class="fragment">Wrapping up</a><ul class="menu"></ul></li></ul>
			
			</li>
		
			<li class="leaf">
			
				<a href="/guides/social-integrations">Integrating Stormpath with Facebook and Google</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/guides/ad-ldap">Integrating Stormpath with Active Directory and LDAP</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/guides/dev-test-prod-environments">Setting up Development and Production Environments</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/guides/api-key-management">Using Stormpath for API Key Management</a>
			
			
			</li>
		
		</ul>
  	
  
        
  	
                
                       <div class="menu-divider"></div> 
                
                
		<ul class="menu">
		
			<li class="leaf">
			
				<a href="/how-do-i">How Do I..?</a>
			
			
			</li>
		
			<li class="leaf">
			
				<a href="/errors">Stormpath Error Codes</a>
			
			
			</li>
		
		</ul>
  	
  
</div>
    </section>
  

  
</aside>


        </div>
      </div>
    </div>
  </div>
</div>
  
<script src="//yandex.st/highlightjs/8.0/highlight.min.js"></script>

<script>
$(function() {
   hljs.initHighlightingOnLoad();

   /* javascript for codetab to stop the page from shifting when changing tabs (tab sync) */
   var currentEventTab;
   var initialObjectTopOffset;
   var initialPageYOffset;

   $('.tabs').tabs({
		activate: function(event ,ui){

			//if the dom event, grab the hotness 
			if(event.cancelable){
				currentEventTab = event.target;
				initialObjectTopOffset = $(currentEventTab).offset().top;
				initialPageYOffset = window.pageYOffset;
			}
			//change ze tab
			$('.tabs').tabs('option', 'active', ui.newTab.index());

			//grab the new offsets
			var afterChangeOffset = $(currentEventTab).offset().top;
			var afterPageYOffset = window.pageYOffset;

			//do ze scroll
			$('body').scrollTop(initialPageYOffset - (initialObjectTopOffset - afterChangeOffset));
		}
	});
});
</script>









  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<!-- Google Code for Remarketing tag -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1002663385;
var google_conversion_label = "wSRZCLfkjQQQ2duN3gM";
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
/* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1002663385/?value=0&amp;label=wSRZCLfkjQQQ2duN3gM&amp;guid=ON&amp;script=0"/>
</div>
</noscript>

<!-- AdRoll Code -->
<script type="text/javascript">
adroll_adv_id = "RVWGHIV3GJCLHIUDNFIMNY";
adroll_pix_id = "L2WE5KAWDRDBVP46PZZBQJ";
(function () {
var oldonload = window.onload;
window.onload = function(){
__adroll_loaded=true;
var scr = document.createElement("script");
var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
scr.setAttribute('async', 'true');
scr.type = "text/javascript";
scr.src = host + "/j/roundtrip.js";
((document.getElementsByTagName('head') || [null])[0] ||
document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
if(oldonload){oldonload()}};
}());
</script>

<!-- Start Visual Website Optimizer Asynchronous Code -->
<script type="text/javascript">
var _vwo_code=(function(){
var account_id=36938,
settings_tolerance=2000,
library_tolerance=1500,
use_existing_jquery=false,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script>
<!-- End Visual Website Optimizer Asynchronous Code -->

<!-- CrazyEgg -->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0017/1602.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>

<!-- Perfect Audience -->
<script type="text/javascript">
(function() {
window._pa = window._pa || {};
// _pa.orderId = "";
// _pa.revenue = "";
var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.perfectaudience.com/serve/51fc2c6f1b440adfcc000099.js";
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
})();
</script>


</body>
</html>
