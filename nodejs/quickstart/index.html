
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Stormpath Node.js Quickstart - Stormpath</title>
  <meta name="author" content="Stormpath, Inc.">

  
  <meta name="description" content="10-minute Tutorial to Stormpath in Node.js">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stormpath.github.io/nodejs/quickstart">
  <link href="/favicon.ico" rel="icon">



<style>
@import url("/stylesheets/normalize.css?mrrrji");
@import url("/stylesheets/wireframes.css?mrrrji");
@import url("/stylesheets/html-elements.css?mrrrji");
@import url("/stylesheets/tabs.css?mrrrji");
@import url("/stylesheets/tinybox2.css?mrrrji");
@import url("/stylesheets/flexnav.css?mrrrji");
@import url("/stylesheets/pages.css?mrrrji");
@import url("/stylesheets/docs.css?mrrrji");
@import url("/stylesheets/blocks.css?mrrrji");
@import url("/stylesheets/navigation.css?mrrrji");
@import url("/stylesheets/views-styles.css?mrrrji");
@import url("/stylesheets/nodes.css?mrrrji");
@import url("/stylesheets/comments.css?mrrrji");
@import url("/stylesheets/forms.css?mrrrji");
@import url("/stylesheets/fields.css?mrrrji");
@import url("/stylesheets/layouts/responsive-sidebars.css?mrrrji");
</style>













  <link href="/atom.xml" rel="alternate" title="Stormpath" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Covered+By+Your+Grace|Open+Sans:300italic,400italic,600italic,700italic,800italic,300,400,600,700,800" media="all" />

<!--[if lt IE 9]>
<script src="/javascripts/html5-respond.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29159574-1']);
  _gaq.push(['_setDomainName', 'stormpath.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- kissmetrics -->
<script type="text/javascript">
  var _kmq = _kmq || [];
  var _kmk = _kmk || '684b854336bd3a6523260ebd991eec06b18b929a';
  function _kms(u){
    setTimeout(function(){
      var d = document, f = d.getElementsByTagName('script')[0],
      s = d.createElement('script');
      s.type = 'text/javascript'; s.async = true; s.src = u;
      f.parentNode.insertBefore(s, f);
    }, 1);
  }
  _kms('//i.kissmetrics.com/i.js');
  _kms('//doug1izaerwt3.cloudfront.net/' + _kmk + '.1.js');
</script>

<!-- Optimizely -->
<script src="//cdn.optimizely.com/js/225847041.js"></script>

  

</head>

<body  class="not-front  quickstart  ">
<!-- Qualaroo for stormpath.com -->
<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript" src="//s3.amazonaws.com/ki.js/47725/9JM.js" async="true"></script>
      
<script type="text/javascript" src="//assets.zendesk.com/external/zenbox/v2.6/zenbox.js"></script>
<style type="text/css" media="screen, projection">
  @import url(//assets.zendesk.com/external/zenbox/v2.6/zenbox.css);
</style>
<script type="text/javascript">
  if (typeof(Zenbox) !== "undefined") {
    Zenbox.init({
      dropboxID:   "20184231",
      url:         "https://stormpath.zendesk.com",
      tabTooltip:  "Get Help",
      tabImageURL: "/images/tab_questions_black_right.png",
      tabColor:    "689ed0",
      tabPosition: "Right"
    });
  }
</script>


<div id="page">

  <div id="header-wrapper">
  	<header id="header" role="banner" class="container">
      <hgroup id="name-and-slogan">
  <h1 id="site-name">
    <a href="http://www.stormpath.com/" title="Home" rel="home"><span>Stormpath</span></a>
  </h1>
</hgroup><!-- /#name-and-slogan -->

<div id="navigation"><div class="menu-button">Menu</div>
<nav id="main-menu" role="navigation">
  <h2 class="element-invisible">Main menu</h2>
<ul class="links inline clearfix">
<li class="menu-1413 first"><a href="/" title="Documentation">Docs</a></li>
<li class="menu-710"><a href="http://www.stormpath.com/product">Product</a></li>
<li class="menu-709"><a href="http://www.stormpath.com/pricing">Pricing</a></li>
<li class="menu-438"><a href="https://support.stormpath.com/" title="">Support</a></li>
<li class="menu-547"><a href="http://www.jobscore.com/jobs/stormpath" title="Jobs at Stormpath. Join us!">Jobs</a></li>
<li class="menu-556"><a href="http://api.stormpath.com" title="">Log in</a></li>
<li class="menu-1328 last cta-button"><a href="https://api.stormpath.com/register" title="">Sign up</a></li>
</ul>
</nav>
</div>
    </header>
  </div>
  
  <div id="main-wrapper">
    <div id="main" class="container">
      <div id="main-inner">
        <div id="main-inner-inner">
          <div id="content" class="column" role="main">
            <a id="main-content"></a>
            
              <h1 class="title" id="page-title">Stormpath Node.js Quickstart</h1>
            
          	<p>This quickstart will get you up and running with Stormpath in about 10 minutes and give you a good initial feel for the Stormpath Node.js SDK.</p>

<p>Let&rsquo;s get started!</p>

<hr />

<h2>Install the Stormpath <b>npm</b> Module</h2>

<p>Once you have an API Key, navigate to a folder that will include the node app and run</p>

<pre><code>npm install stormpath --save
</code></pre>

<p>This will install the official Stormpath npm module and store the dependency in <code>package.json</code>.</p>

<hr />

<h2>Get an API Key</h2>

<p>All requests to the Stormpath must be authenticated with an API Key. To get an API key:</p>

<ol>
<li><a href="https://api.stormpath.com/register">Sign up for Stormpath here</a>.  You&rsquo;ll be sent a verification email.</li>
<li>Click the link in the verification email.</li>
<li>Log in to the <a href="https://api.stormpath.com">Stormpath Admin Console</a>.</li>
<li>In the top-right corner of the resulting page, visit <strong>Settings</strong> > <strong>My Account</strong>.</li>
<li>On the Account Details page, under <strong>Security Credentials</strong>, click <strong>Create API Key</strong>.</li>
</ol>


<p> This will generate your API Key and download it to your computer as an <code>apiKey.properties</code> file. If you open the file in a text editor, you will see something similar to the following:</p>

<pre><code>    apiKey.id = 144JVZINOFEBNCMG9EXAMPLE
    apiKey.secret = lWxOiKqKNwJmSldbiSkEbkNjgh2uRSNAb+AEXAMPLE
</code></pre>

<hr />

<h2>Coding Time!</h2>

<p>Now that set up is complete, you can start building something.  One of the first things that you need to do is include <code>stormpath</code> module in your javascript, like so:</p>

<pre><code>var stormpath = require('stormpath');
</code></pre>

<p>Once this is done, you can initialize a Stormpath <code>client</code> based on an API Key ID and Secret.</p>

<pre><code>//Generate a Stormpath client based on your API Key and Secret
var apiKey = new stormpath.ApiKey('YOUR_API_KEY_ID', 'YOUR_API_KEY_SECRET');
var client = new stormpath.Client({apiKey: apiKey});
</code></pre>

<p>A <code>client</code> instance is your starting point for all interactions with the Stormpath API &ndash; once you have a Client instance, you can do everything else.</p>

<h3>Create an Application</h3>

<p>To be able to start to create accounts, you need to have an <code>Application</code> and <code>Directory</code> in Stormpath.  If you just signed up for the quickstart you can add (and retrieve, update, or delete) an application and directory from the API like so:</p>

<pre><code>//Some application properties
var app = {
  name: 'My Awesome Application!',
  description: 'No, Srsly. It\'s Awesome.'
};

//Create the App
client.createApplication(app, {createDirectory: true} ,function onAppCreated(err, createdApp){
      if (err) throw err;
      app = createdApp;
});
</code></pre>

<p>Once the application is created, it will automatically create a <code>Directory</code> resource based on the name of application and set it as the default account store for any new accounts for the application.</p>

<h3>Create a User Account</h3>

<p>To create an account, you define the account as a JSON object and use the application to create it:</p>

<pre><code>var account = {
    givenName: 'Tom',
    surname: 'Abbott',
    email:'stormtrooper@stormpath.com',
    password:'AwesomeSecurePassword1',
    customData: {
        favoriteAnimal: 'Miley Cyrus',
    }
}

//Create the account
app.createAccount(account, function(err, account){
    if (err) throw err;
    accountSuccessfullyCreated(account);
});
</code></pre>

<p>Stormpath has a standard account format (givenName, surname, email, etc&hellip;), but you can also store application specific custom fields in a schema-less customData object.</p>

<h3>Search for a User Account</h3>

<p>Getting accounts from an application is easy too.  You can ask the application to retrieve accounts based on standard fields by doing:</p>

<pre><code>app.getAccounts({email:'stormtropper@stormpath.com'}, function(err, accounts){
    if (err) throw err;

    accounts.each(function (err, account, index){
        console.log(account);
    });
});
</code></pre>

<p>You could also use wild cards such as <code>{email: *@stormpath.com}</code> to return all accounts with an email from the stormpath.com domain.</p>

<p>You can also do more advance options and method chaining like:</p>

<pre><code>app.getAccounts().search({surname:'Abbott'})
    .orderBy({givenName:1})
    .exec(function (err, accounts){
        accounts.each(hanndleAccount);
    });
</code></pre>

<h3>Authenticate a User Account</h3>

<p>Once you have accounts in directories that are associated with an application, you can authenticate a user like so:</p>

<pre><code>app.authenticateAccount({
    username:'stormtropper@stormpath.com',
    password:'AwesomeSecurePassword1'
}, function(err, result){
    if (err) throw err;
    result.getAccount(function(err, account){
        console.log(account);
    });
});
</code></pre>

<p>That will output the authenticated account.  From here, you could update account fields, get the groups or roles associated with the account, or even trigger a password reset workflow.</p>

<hr />

<!-- >## Help us spread the word

If you found this tutorial helpful and think our product is cool, please help us out with a quick tweet.

Look! We even make it easy for you with a nice button :)

&#8211;>


<hr />

<h2>What&rsquo;s Next</h2>

<p>You&rsquo;ve just scratched the surface of what you can do in Stormpath.  Want to learn more?  Here are a few other easy guides you can jump into.</p>

<ul>
<li><a href="https://github.com/stormpath/passport-stormpath">Build an Express.js + Passport.js App with Stormpath</a></li>
<li><a href="(http://docs.stormpath.com/nodejs/api/home">Complete Node.js API Reference Guide</a>)</li>
<li><a href="http://docs.stormpath.com/guides/multi-tenant/">Guide to Building Multitenant Applications</a></li>
<li><a href="http://docs.stormpath.com/guides/social-integrations/">Social Login &amp; Integration Guide</a></li>
</ul>


    	  </div>



<aside class="sidebars">
  

  
</aside>


        </div>
      </div>
    </div>
  </div>
  
    <div id="footer-wrapper">
      <div id="footer-wrapper">
                <footer id="footer" class="region region-footer">
    <div id="block-boxes-follow-footer" class="block block-boxes block-boxes-simple first odd">

        <h2 class="block-title">Connect with us</h2>
    
  <div id='boxes-box-follow_footer' class='boxes-box'><div class="boxes-box-content"> <ul class="follow-links-footer">
<li><a href="https://github.com/stormpath" class="github">GitHub</a></li>
<li><a href="http://www.twitter.com/gostormpath" class="twitter">Twitter</a></li>
<li><a href="http://www.facebook.com/pages/Stormpath/259202314149649" class="facebook">Facebook</a></li>
<li><a href="mailto:info@stormpath.com" class="email">E-mail us</a></li>

</ul> </div></div>
</div><!-- /.block -->
<div id="block-boxes-footer-left" class="block block-boxes block-boxes-simple even">

      
  <div id='boxes-box-footer_left' class='boxes-box'><div class="boxes-box-content"> <h2 class="stormpath-footer">Stormpath</h2>
<p class="p1">Stormpath is the first easy and secure user management and authentication service for developers. &nbsp;With a simple REST API integration, developers can reduce development and operations costs, while protecting users with best-in-class security.</p> </div></div>
</div><!-- /.block -->
<div id="block-menu-menu-main-footer-menu" class="block block-menu odd" role="navigation">

      
<ul class="menu">
  <li class="first leaf"><a href="http://www.stormpath.com/resources" title="Stormpath Resources">Resources</a></li>
  <li class="leaf"><a href="http://www.stormpath.com/about" title="">About</a></li>
  <li class="leaf"><a href="http://www.stormpath.com/blog" title="">Blog</a></li>
  <li class="leaf"><a href="http://www.stormpath.com/press" title="">Press &amp; News</a></li>
  <li class="leaf"><a href="http://www.jobscore.com/jobs/stormpath" title="">Jobs</a></li>
  <li class="leaf"><a href="http://status.stormpath.com" title="Status Report for Stormpath API service and Management Console">Status Report</a></li>
  <li class="last leaf"><a href="http://www.stormpath.com/contact" title="">Contact</a></li>
</ul>
</div><!-- /.block -->
<div id="block-menu-menu-documentation" class="block block-menu even" role="navigation">

        <h2 class="block-title">Documentation</h2>
    
<ul class="menu">
  <li class="first leaf"><a href="/rest/quickstart" title="REST API Documentation">REST API Documentation</a></li>
  <li class="leaf"><a href="/java/quickstart" title="Java Documentation">Java Documentation</a></li>
  <li class="leaf"><a href="/php/quickstart" title="PHP Documentation">PHP Documentation</a></li>
  <li class="leaf"><a href="/ruby/quickstart" title="Ruby Documentation">Ruby Documentation</a></li>
  <li class="last leaf"><a href="/python/quickstart" title="Python Documentation">Python Documentation</a></li>
</ul>
</div><!-- /.block -->
<div id="block-boxes-get-started-box" class="block block-boxes block-boxes-simple odd">

      
  <div id='boxes-box-get_started_box' class='boxes-box'><div class="boxes-box-content cta-button"> <a href="https://api.stormpath.com/register" class="medium-green-button">Get Started for Free</a> </div></div>
</div><!-- /.block -->

  </footer><!-- region__footer -->
  

      </div>

      <div id="bottom-wrapper">
                <div class="region region-bottom">
    <div id="block-block-1" class="block block-block first odd">

      
   Copyright © 2014 StormPath&nbsp;&nbsp;|&nbsp;&nbsp;All rights reserved 
</div><!-- /.block -->
<div id="block-menu-menu-footer-menu" class="block block-menu last even" role="navigation">

      
  <ul class="menu"><li class="first leaf"><a href="http://www.stormpath.com/privacy_policy">Privacy policy</a></li>
<li class="last leaf"><a href="http://www.stormpath.com/terms_of_service">Terms of Service</a></li>
</ul>
</div><!-- /.block -->
  </div><!-- /.region -->

      </div>
    </div>
  
</div>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<!-- Google Code for Remarketing tag -->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1002663385;
var google_conversion_label = "wSRZCLfkjQQQ2duN3gM";
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
/* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1002663385/?value=0&amp;label=wSRZCLfkjQQQ2duN3gM&amp;guid=ON&amp;script=0"/>
</div>
</noscript>

<!-- AdRoll Code -->
<script type="text/javascript">
adroll_adv_id = "RVWGHIV3GJCLHIUDNFIMNY";
adroll_pix_id = "L2WE5KAWDRDBVP46PZZBQJ";
(function () {
var oldonload = window.onload;
window.onload = function(){
__adroll_loaded=true;
var scr = document.createElement("script");
var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
scr.setAttribute('async', 'true');
scr.type = "text/javascript";
scr.src = host + "/j/roundtrip.js";
((document.getElementsByTagName('head') || [null])[0] ||
document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
if(oldonload){oldonload()}};
}());
</script>

<!-- Start Visual Website Optimizer Asynchronous Code -->
<script type="text/javascript">
var _vwo_code=(function(){
var account_id=36938,
settings_tolerance=2000,
library_tolerance=1500,
use_existing_jquery=false,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script>
<!-- End Visual Website Optimizer Asynchronous Code -->

<!-- CrazyEgg -->
<script type="text/javascript">
setTimeout(function(){var a=document.createElement("script");
var b=document.getElementsByTagName("script")[0];
a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0017/1602.js?"+Math.floor(new Date().getTime()/3600000);
a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
</script>

<!-- Perfect Audience -->
<script type="text/javascript">
(function() {
window._pa = window._pa || {};
// _pa.orderId = "";
// _pa.revenue = "";
var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.perfectaudience.com/serve/51fc2c6f1b440adfcc000099.js";
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
})();
</script>


</body>
</html>
